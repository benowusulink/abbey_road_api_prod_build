{"mappings":"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","sources":["<anon>","src/javascript/estates-page/controller/controller.js","src/javascript/estates-page/model/model.js","src/javascript/estates-page/view/view.js"],"sourcesContent":["\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global = globalThis;\n    var parcelRequire = $parcel$global[\"parcelRequire8ea6\"];\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"kShGt\", function(module, exports) {\n\n$parcel$export(module.exports, \"Estates_controller\", () => $f326917f7fe9f45b$export$c735fcc5c69788eb);\n\nvar $1igQN = parcelRequire(\"1igQN\");\n\nvar $edyy0 = parcelRequire(\"edyy0\");\nclass $f326917f7fe9f45b$export$c735fcc5c69788eb {\n    constructor(){\n        this.model = new (0, $1igQN.Estates_model)();\n        this.view = new (0, $edyy0.Estates_view)();\n        this.model.registerListener((state)=>{\n            this.view.render_page_elements(state);\n        });\n        this.model.fetch_estate_elements();\n    }\n}\n\n});\nparcelRegister(\"1igQN\", function(module, exports) {\n\n$parcel$export(module.exports, \"Estates_model\", () => $0f148b0776ddaff4$export$1ecb0017af8e631a);\nclass $0f148b0776ddaff4$export$1ecb0017af8e631a {\n    constructor(){\n        this.state = {\n            loading: true,\n            estate_elements: [],\n            estate_elements_empty: null,\n            estate_main_text: {\n                id: null,\n                text: ''\n            }\n        };\n        this.listeners = [];\n    }\n    setState = (newState)=>{\n        this.state = {\n            ...this.state,\n            ...newState\n        };\n        this.notifyListeners();\n        console.log(this.state);\n        return this.state;\n    };\n    registerListener = (listener)=>{\n        this.listeners = [\n            ...this.listeners,\n            listener\n        ];\n        listener(this.state);\n    };\n    notifyListeners = ()=>{\n        this.listeners.forEach((listener)=>{\n            listener(this.state);\n        });\n    };\n    fetch_estate_elements = ()=>{\n        var res, res1, element, image, group, err;\n        fetch(\"https://www.abbeyroad.org.uk/api/estates-page/fetch_page_elements\").then((res)=>{\n            return res.json();\n        }).then((res)=>{\n            // successful fetch from estate_page tables  \n            if (res.success && res.estate_page && typeof res.estate_page === 'object' && Array.isArray(res.estate_page.estate_page_images) && Array.isArray(res.estate_page.estate_page_elements)) {\n                const estatePage = res.estate_page;\n                // 1️⃣ Group estate_page_elements by estate_title\n                const elementsMap = {};\n                let mainTextObj = null;\n                estatePage.estate_page_elements.forEach((element)=>{\n                    // Capture main text object\n                    if (element.estate_id === \"estates-main-article1-p1\") mainTextObj = {\n                        id: element.estate_id,\n                        estate_main_text: element.estate_main_text\n                    };\n                    // Group into a map first\n                    if (element.estate_title) {\n                        if (!elementsMap[element.estate_title]) elementsMap[element.estate_title] = [];\n                        elementsMap[element.estate_title].push(element);\n                    }\n                });\n                // Convert to array of groups\n                let groupedElements = Object.entries(elementsMap).map(([title, items])=>({\n                        estate_title: title,\n                        elements: items\n                    }));\n                // 2️⃣ Group estate_page_images by estate_category\n                const imagesMap = {};\n                estatePage.estate_page_images.forEach((image)=>{\n                    const category = image.estate_category;\n                    if (category) {\n                        if (!imagesMap[category]) imagesMap[category] = [];\n                        imagesMap[category].push(image);\n                    }\n                });\n                // 3️⃣ Merge images into groupedElements if estate_title matches estate_category\n                groupedElements = groupedElements.map((group)=>{\n                    const images = imagesMap[group.estate_title] || [];\n                    return {\n                        ...group,\n                        images: images // new property containing matching images\n                    };\n                });\n                console.log(\"succesfful fetch\");\n                this.setState({\n                    loading: false,\n                    estate_elements: groupedElements,\n                    estate_elements_empty: null,\n                    estate_main_text: {\n                        id: mainTextObj.id,\n                        text: mainTextObj.estate_main_text\n                    }\n                });\n            } else // successful fetch but empty tables\n            if (res.success && res.estate_page === null) this.setState({\n                loading: false,\n                estate_elements: [],\n                estate_elements_empty: true,\n                estate_main_text: {\n                    id: null,\n                    text: ''\n                }\n            });\n            else this.setState({\n                loading: false,\n                estate_elements: [],\n                estate_elements_empty: null,\n                estate_main_text: {\n                    id: null,\n                    text: ''\n                }\n            });\n        }).catch((err)=>{\n            console.log(err);\n        });\n    };\n}\n\n});\n\nparcelRegister(\"edyy0\", function(module, exports) {\n\n$parcel$export(module.exports, \"Estates_view\", () => $a59d14025f8669c7$export$ec11318d4fa72ed6);\nclass $a59d14025f8669c7$export$ec11318d4fa72ed6 {\n    constructor(){\n        // stopping multiple re renders after initial render of elements\n        this.initial_elements_render = false;\n        this.estate_element_images = [];\n        this.current_image_index = {};\n        this.slideshowIntervals = {};\n    }\n    render_page_elements = (state)=>{\n        // caching parent elements of page elements\n        const estates_main_section1 = document.getElementById(\"estates-main-section1\");\n        const estates_main_text_parent_div = document.getElementById(\"estates-main-article1\");\n        // if elements are loading \n        if (state.loading) {\n            // estates main text loading \n            const estates_main_text_loading = document.createElement(\"div\");\n            estates_main_text_loading.setAttribute(\"id\", \"estates-main-article1-p1-loading\");\n            estates_main_text_loading.classList.add(\"loading\");\n            estates_main_text_parent_div.appendChild(estates_main_text_loading);\n            //estates main article loading\n            const estates_main_section1_loading = document.createElement(\"div\");\n            estates_main_section1_loading.setAttribute(\"id\", \"estates-main-section1-loading\");\n            estates_main_section1_loading.classList.add(\"loading\");\n            estates_main_section1.appendChild(estates_main_section1_loading);\n        } else {\n            // remove loading elements\n            const estates_main_text_loading = document.getElementById(\"estates-main-article1-p1-loading\");\n            const estates_main_section1_loading = document.getElementById(\"estates-main-section1-loading\");\n            estates_main_text_loading.remove();\n            estates_main_section1_loading.remove();\n            // if estate_elements & estate_main_text exist\n            if (Array.isArray(state.estate_elements) && state.estate_elements.length > 0 && state.estate_elements.every((el)=>typeof el.estate_title === \"string\" && Array.isArray(el.elements) && Array.isArray(el.images)) && state.estate_main_text && typeof state.estate_main_text === \"object\" && typeof state.estate_main_text.id === \"string\" && typeof state.estate_main_text.text === \"string\" && this.initial_elements_render === false) {\n                console.log(state.estate_main_text);\n                // create estates main text\n                const main_text_p = document.createElement(\"p\");\n                main_text_p.setAttribute(\"id\", state.estate_main_text.id);\n                // formatting text \n                const text = state.estate_main_text.text;\n                const sentences = text.split(/(?<=\\.)\\s+(?=[A-Z])/);\n                main_text_p.textContent = '';\n                sentences.forEach((sentence, index)=>{\n                    const textNode = document.createTextNode(sentence);\n                    main_text_p.appendChild(textNode);\n                    // Add a line break after every sentence except the last\n                    if (index < sentences.length - 1) {\n                        main_text_p.appendChild(document.createElement(\"br\"));\n                        main_text_p.appendChild(document.createElement(\"br\"));\n                    }\n                });\n                estates_main_text_parent_div.appendChild(main_text_p);\n                // create article divs\n                state.estate_elements.forEach((element)=>{\n                    const article = document.createElement(\"article\");\n                    const mainDiv1 = document.createElement(\"div\");\n                    const mainDiv2 = document.createElement(\"div\");\n                    const mainDiv1_h3 = document.createElement(\"h3\");\n                    const mainDiv1_p = document.createElement(\"p\");\n                    const mainDiv1_div1 = document.createElement(\"div\");\n                    const mainDiv1_div2 = document.createElement(\"div\");\n                    const mainDiv1_div1_div1 = document.createElement(\"div\");\n                    const mainDiv1_div1_div2 = document.createElement(\"div\");\n                    const mainDiv1_div1_div1_a1 = document.createElement(\"a\");\n                    const mainDiv1_div1_div1_a2 = document.createElement(\"a\");\n                    const mainDiv1_div1_div2_p1 = document.createElement(\"p\");\n                    const mainDiv1_div1_div2_p2 = document.createElement(\"p\");\n                    const mainDiv2_div1 = document.createElement(\"div\");\n                    const mainDiv2_div1_div1 = document.createElement(\"div\");\n                    const mainDiv2_div1_div2 = document.createElement(\"div\");\n                    const mainDiv2_div1_div3 = document.createElement(\"div\");\n                    // adding relevant attributes \n                    article.setAttribute(\"id\", element.estate_title);\n                    article.classList.add(\"estates-main-section1-article1\");\n                    mainDiv1.classList.add(\"estates-main-section1-article1-div1\");\n                    mainDiv2.classList.add(\"estates-main-section1-article1-div2\");\n                    mainDiv1_h3.setAttribute(\"id\", `${element.elements[0].estate_id}_title`);\n                    mainDiv1_h3.classList.add(\"estates-main-section1-article1-div-h3\");\n                    mainDiv1_p.setAttribute(\"id\", `${element.elements[0].estate_id}_desc`);\n                    mainDiv1_p.classList.add(\"estates-main-section1-article1-div-p\");\n                    mainDiv1_div1.classList.add(\"estates-main-section1-article1-div-div1\");\n                    mainDiv1_div2.classList.add(\"estates-main-section1-article1-div-div1\");\n                    mainDiv1_div1_div1.classList.add(\"estates-main-section1-article1-div-div1\");\n                    mainDiv1_div1_div2.classList.add(\"estates-main-section1-article1-div2-div2-div1\");\n                    mainDiv1_div1_div1_a1.setAttribute(\"id\", `${element.elements[0].estate_id}_google_maps`);\n                    mainDiv1_div1_div1_a1.setAttribute(\"href\", element.elements[0].estate_google_maps_url);\n                    mainDiv1_div1_div1_a1.setAttribute(\"target\", \"_blank\");\n                    mainDiv1_div1_div1_a1.classList.add(\"estates-main-section1-article1-div2-div2-a\");\n                    mainDiv1_div1_div1_a2.setAttribute(\"id\", `${element.elements[0].estate_id}_google_street`);\n                    mainDiv1_div1_div1_a2.setAttribute(\"href\", element.elements[0].estate_google_street_url);\n                    mainDiv1_div1_div1_a2.setAttribute(\"target\", \"_blank\");\n                    mainDiv1_div1_div1_a2.classList.add(\"estates-main-section1-article1-div2-div2-a\");\n                    mainDiv1_div1_div2_p1.classList.add(\"estates-main-section1-article1-div2-div2-span1-p\");\n                    mainDiv1_div1_div2_p2.classList.add(\"estates-main-section1-article1-div2-div2-span1-p2\");\n                    mainDiv1_div1_div2_p2.setAttribute(\"id\", `${element.elements[0].estate_id}_address`);\n                    mainDiv2_div1.classList.add(\"estates-main-section1-article1-div2-div1\");\n                    mainDiv2_div1.setAttribute(\"id\", `${element.estate_title}_img_div`);\n                    mainDiv2_div1_div1.classList.add(\"estates-main-section1-article1-div2-div1-img-backward\");\n                    mainDiv2_div1_div1.setAttribute(\"id\", `${element.estate_title}_div_backward`);\n                    mainDiv2_div1_div2.classList.add(\"estates-main-section1-article1-div2-div1-img-forward\");\n                    mainDiv2_div1_div2.setAttribute(\"id\", `${element.estate_title}_div_forward`);\n                    mainDiv2_div1_div3.classList.add(\"estates-main-section1-article1-div2-div1-img-footer\");\n                    mainDiv2_div1_div3.setAttribute(\"id\", `${element.estate_title}_div_footer`);\n                    // adding text content \n                    mainDiv1_h3.textContent = element.elements[0].estate_title;\n                    // formatting text \n                    const text = element.elements[0].estate_text;\n                    const sentences = text.split(/(?<=\\.)\\s+(?=[A-Z])/);\n                    mainDiv1_p.textContent = '';\n                    sentences.forEach((sentence, index)=>{\n                        const textNode = document.createTextNode(sentence);\n                        mainDiv1_p.appendChild(textNode);\n                        // Add a line break after every sentence except the last\n                        if (index < sentences.length - 1) {\n                            mainDiv1_p.appendChild(document.createElement(\"br\"));\n                            mainDiv1_p.appendChild(document.createElement(\"br\"));\n                        }\n                    });\n                    mainDiv1_div1_div1_a1.textContent = \"Google Maps Location\";\n                    mainDiv1_div1_div1_a2.textContent = \"Google Street Location\";\n                    mainDiv1_div1_div2_p1.textContent = \"Address:\";\n                    mainDiv1_div1_div2_p2.textContent = element.elements[0].estate_address;\n                    mainDiv2_div1_div1.textContent = \"<\";\n                    mainDiv2_div1_div2.textContent = \">\";\n                    // appending elements\n                    estates_main_section1.appendChild(article);\n                    article.append(mainDiv1, mainDiv2);\n                    mainDiv1.append(mainDiv1_h3, mainDiv1_p, mainDiv1_div1, mainDiv1_div2);\n                    mainDiv2.appendChild(mainDiv2_div1);\n                    mainDiv1_div1.appendChild(mainDiv1_div1_div1);\n                    mainDiv1_div2.appendChild(mainDiv1_div1_div2);\n                    mainDiv1_div1_div1.append(mainDiv1_div1_div1_a1, mainDiv1_div1_div1_a2);\n                    mainDiv1_div1_div2.append(mainDiv1_div1_div2_p1, mainDiv1_div1_div2_p2);\n                    mainDiv2.appendChild(mainDiv2_div1);\n                    mainDiv2_div1.append(mainDiv2_div1_div1, mainDiv2_div1_div2, mainDiv2_div1_div3);\n                    const images_object = {};\n                    let image_index = 1;\n                    // creating image elements & appending first image\n                    element.images.forEach((image)=>{\n                        const img = document.createElement(\"img\");\n                        img.classList.add(\"estates-main-section1-article1-div2-div1-img\");\n                        img.setAttribute(\"id\", `${element.estate_title}_img_${image_index}`);\n                        img.setAttribute(\"src\", (0, image.estate_image_production_url));\n                        if (!images_object[image.estate_category]) images_object[image.estate_category] = [];\n                        images_object[image.estate_category].push(img);\n                        image_index = image_index + 1;\n                        console.log(image_index);\n                    });\n                    this.estate_element_images = [\n                        ...this.estate_element_images,\n                        images_object\n                    ];\n                    console.log(this.estate_element_images);\n                });\n                this.initial_elements_render = true;\n                this.autochange_img_and_forward_and_backward_event_listener();\n            } else {\n                // caching parent containers \n                const main_p_article = document.getElementById(\"estates-main-article1\");\n                const main_p_section = document.getElementById(\"estates-main-section1\");\n                const p = document.createElement(\"p\");\n                const p2 = document.createElement(\"p\");\n                p.setAttribute(\"id\", \"estates-main-article1-p1\");\n                p.textContent = \"Currently no information about our estates, Please visit Later\";\n                p2.setAttribute(\"id\", \"estates-main-section1-p1\");\n                p2.textContent = \"Currently no information about our estates, Please visit Later\";\n                main_p_article.appendChild(p);\n                main_p_section.appendChild(p2);\n                console.error(\"Invalid or missing data\");\n            }\n        }\n    };\n    autochange_img_and_forward_and_backward_event_listener = ()=>{\n        // ensure trackers exist\n        this.slideshowIntervals = this.slideshowIntervals || {};\n        this.current_image_index = this.current_image_index || {};\n        const articles = Array.from(document.getElementsByClassName(\"estates-main-section1-article1\"));\n        const change_image_id = (category, change_image)=>{\n            // clear any existing interval for this category first\n            if (this.slideshowIntervals[category]) clearInterval(this.slideshowIntervals[category]);\n            const id = setInterval(change_image, 10000);\n            this.slideshowIntervals[category] = id;\n        };\n        // fadeSwap: fade out current image, then insert & fade in new image\n        const fadeSwap = (imgDiv, sourceImgElement)=>{\n            const oldImg = imgDiv.querySelector(\".estates-main-section1-article1-div2-div1-img\");\n            const newImg = sourceImgElement.cloneNode(true);\n            newImg.classList.add(\"estates-main-section1-article1-div2-div1-img\");\n            newImg.classList.remove(\"show\"); // start hidden\n            const TRANS_MS = 1000; // must match CSS transition duration (500ms)\n            if (oldImg) {\n                // when old finishes fading out, remove it and insert new\n                const onOldTransitionEnd = ()=>{\n                    oldImg.removeEventListener(\"transitionend\", onOldTransitionEnd);\n                    if (oldImg.parentNode) oldImg.parentNode.removeChild(oldImg);\n                    imgDiv.prepend(newImg);\n                    // ensure browser registers insertion, then add show to fade in\n                    requestAnimationFrame(()=>newImg.classList.add(\"show\"));\n                };\n                // start fade-out\n                oldImg.classList.remove(\"show\");\n                oldImg.addEventListener(\"transitionend\", onOldTransitionEnd);\n                // fallback in case transitionend doesn't fire\n                setTimeout(()=>{\n                    if (document.body.contains(oldImg)) {\n                        oldImg.removeEventListener(\"transitionend\", onOldTransitionEnd);\n                        if (oldImg.parentNode) oldImg.parentNode.removeChild(oldImg);\n                        imgDiv.prepend(newImg);\n                        requestAnimationFrame(()=>newImg.classList.add(\"show\"));\n                    }\n                }, TRANS_MS + 100);\n            } else {\n                // no old image, just insert and fade in\n                imgDiv.prepend(newImg);\n                requestAnimationFrame(()=>newImg.classList.add(\"show\"));\n            }\n        };\n        articles.forEach((article)=>{\n            // for each article find the matching images array\n            this.estate_element_images.forEach((img_cat)=>{\n                const categoryName = Object.keys(img_cat)[0]; // string\n                if (categoryName === article.id) {\n                    const imagesArray = img_cat[categoryName]; // array of HTMLImageElement\n                    if (!Array.isArray(imagesArray) || imagesArray.length === 0) return;\n                    const imgDiv = document.getElementById(`${article.id}_img_div`);\n                    if (!imgDiv) return;\n                    // initialise index and show first image immediately\n                    this.current_image_index[categoryName] = 0;\n                    const firstImageClone = imagesArray[0].cloneNode(true);\n                    firstImageClone.classList.add(\"estates-main-section1-article1-div2-div1-img\", \"show\");\n                    imgDiv.prepend(firstImageClone);\n                    // slideshow change function: show next image (wrap)\n                    const change_image = ()=>{\n                        const len = imagesArray.length;\n                        if (len <= 1) return; // nothing to rotate\n                        const nextIndex = (this.current_image_index[categoryName] + 1) % len;\n                        const nextSource = imagesArray[nextIndex];\n                        fadeSwap(imgDiv, nextSource);\n                        this.current_image_index[categoryName] = nextIndex;\n                    };\n                    // start interval for this category (keyed by categoryName)\n                    change_image_id(categoryName, change_image);\n                }\n            });\n            // event listeners for manual navigation\n            const back_btn = document.getElementById(`${article.id}_div_backward`);\n            const forward_btn = document.getElementById(`${article.id}_div_forward`);\n            const event_listener = (event, direction)=>{\n                const imgDiv = document.getElementById(`${article.id}_img_div`);\n                const visibleImg = imgDiv && imgDiv.querySelector(\".estates-main-section1-article1-div2-div1-img.show\");\n                const imgElement = visibleImg || imgDiv && imgDiv.children[0];\n                if (!imgElement) return;\n                const imgCatObj = this.estate_element_images.find((ic)=>Object.keys(ic)[0] === article.id);\n                if (!imgCatObj) return;\n                const imagesArray = Object.values(imgCatObj)[0];\n                const len = imagesArray.length;\n                if (!len) return;\n                // find current index\n                let currentIndex = imagesArray.findIndex((img)=>img.id === imgElement.id);\n                if (currentIndex === -1) currentIndex = imagesArray.findIndex((img)=>img.src === imgElement.src);\n                if (currentIndex === -1) return;\n                // compute new index with correct wrap\n                const newIndex = direction === \"back\" ? (currentIndex - 1 + len) % len : (currentIndex + 1) % len;\n                // swap with fade\n                fadeSwap(imgDiv, imagesArray[newIndex]);\n                // update index tracker (keyed by category/article id)\n                this.current_image_index[article.id] = newIndex;\n                // stop/clear the auto-interval for this article (optional)\n                if (this.slideshowIntervals && this.slideshowIntervals[article.id]) {\n                    clearInterval(this.slideshowIntervals[article.id]);\n                    delete this.slideshowIntervals[article.id];\n                }\n            };\n            if (back_btn) back_btn.addEventListener(\"click\", (e)=>event_listener(e, \"back\"));\n            if (forward_btn) forward_btn.addEventListener(\"click\", (e)=>event_listener(e, \"forward\"));\n        });\n    };\n}\n\n});\n\n\n\n//# sourceMappingURL=controller.191285d4.js.map\n","import {Estates_model} from '../model/model.js';\nimport {Estates_view} from '../view/view.js';\n\nexport class Estates_controller {\n\tconstructor(){\n\n\t\tthis.model = new Estates_model();\n\t\tthis.view = new Estates_view();\n\n\t\tthis.model.registerListener((state)=>{\n\t\t\tthis.view.render_page_elements(state)\n\t\t});\n\n\t\tthis.model.fetch_estate_elements();\n\n\t}\n}","\nexport class Estates_model {\n\n\tconstructor(){\n\n\t\tthis.state = {\n\t\t\tloading: true,\n\t\t\testate_elements:[],\n\t\t\testate_elements_empty: null,\n\t\t\testate_main_text:{\n\t\t\t\tid: null,\n\t\t\t\ttext: ''\n\t\t\t}\n\t\t}\n\n\t\tthis.listeners = [];\n\t}\n\n\tsetState = (newState) =>{ \n    \tthis.state = {...this.state,...newState};\n    \tthis.notifyListeners();\n    \tconsole.log(this.state)\n    \treturn this.state\n    }\n\n    registerListener = (listener) => {\n\n    \tthis.listeners = [...this.listeners, listener]\n\n    \tlistener(this.state)\n    }\n\n    notifyListeners = () => {\n    \tthis.listeners.forEach((listener)=>{\n    \t\tlistener(this.state)\n\t\t})\n    }\n\n    fetch_estate_elements = () => {\n\n\n    \tif(process.env.NODE_ENV === \"production\"){\n\t\tfetch(\"https://www.abbeyroad.org.uk/api/estates-page/fetch_page_elements\")\n    \t\t.then((res)=>{\n    \t\t\treturn res.json()\n    \t\t})\n    \t\t.then((res)=>{\n\n    \t\t\t// successful fetch from estate_page tables  \n    \t\t\tif(res.success &&\n    \t\t\t\tres.estate_page &&\n\t    \t\t\ttypeof res.estate_page === 'object' &&\n\t    \t\t\tArray.isArray(res.estate_page.estate_page_images) &&\n\t    \t\t\tArray.isArray(res.estate_page.estate_page_elements)){\n\n\n\t\t\t\t\tconst estatePage = res.estate_page;\n\n\t\t\t\t\t// 1️⃣ Group estate_page_elements by estate_title\n\t\t\t\t\tconst elementsMap = {};\n\t\t\t\t\tlet mainTextObj = null;\n\n\t\t\t\t\testatePage.estate_page_elements.forEach(element => {\n\t\t\t\t\t  // Capture main text object\n\t\t\t\t\t  if (element.estate_id === \"estates-main-article1-p1\") {\n\t\t\t\t\t    mainTextObj = {\n\t\t\t\t\t      id: element.estate_id,\n\t\t\t\t\t      estate_main_text: element.estate_main_text\n\t\t\t\t\t    };\n\t\t\t\t\t  }\n\n\t\t\t\t\t  // Group into a map first\n\t\t\t\t\t  if (element.estate_title) {\n\t\t\t\t\t    if (!elementsMap[element.estate_title]) {\n\t\t\t\t\t      elementsMap[element.estate_title] = [];\n\t\t\t\t\t    }\n\t\t\t\t\t    elementsMap[element.estate_title].push(element);\n\t\t\t\t\t  }\n\t\t\t\t\t});\n\n\t\t\t\t\t// Convert to array of groups\n\t\t\t\t\tlet groupedElements = Object.entries(elementsMap).map(([title, items]) => ({\n\t\t\t\t\t  estate_title: title,\n\t\t\t\t\t  elements: items\n\t\t\t\t\t}));\n\n\t\t\t\t\t// 2️⃣ Group estate_page_images by estate_category\n\t\t\t\t\tconst imagesMap = {};\n\t\t\t\t\testatePage.estate_page_images.forEach(image => {\n\t\t\t\t\t  const category = image.estate_category;\n\t\t\t\t\t  if (category) {\n\t\t\t\t\t    if (!imagesMap[category]) {\n\t\t\t\t\t      imagesMap[category] = [];\n\t\t\t\t\t    }\n\t\t\t\t\t    imagesMap[category].push(image);\n\t\t\t\t\t  }\n\t\t\t\t\t});\n\n\t\t\t\t\t// 3️⃣ Merge images into groupedElements if estate_title matches estate_category\n\t\t\t\t\tgroupedElements = groupedElements.map(group => {\n\t\t\t\t\t  const images = imagesMap[group.estate_title] || [];\n\t\t\t\t\t  return {\n\t\t\t\t\t    ...group,\n\t\t\t\t\t    images // new property containing matching images\n\t\t\t\t\t  };\n\t\t\t\t\t});\n\n\t\t\t\t\tconsole.log(\"succesfful fetch\")\n\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\testate_elements:groupedElements,\n\t\t\t\t\t\testate_elements_empty: null,\n\t\t\t\t\t\testate_main_text:{\n\t\t\t\t\t\t\tid: mainTextObj.id,\n\t\t\t\t\t\t\ttext: mainTextObj.estate_main_text\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n    \t\t\t}\n    \t\t\t// unsuccessful fetch from estate_page tables OR empty tables \n    \t\t\telse{\n\n    \t\t\t\t// successful fetch but empty tables\n    \t\t\t\tif(res.success && res.estate_page === null){\n    \t\t\t\t\tthis.setState({\n\t\t\t\t    \t\tloading: false,\n\t\t\t\t\t\t\testate_elements:[],\n\t\t\t\t\t\t\testate_elements_empty: true,\n\t\t\t\t\t\t\testate_main_text:{\n\t\t\t\t\t\t\t\t\tid: null,\n\t\t\t\t\t\t\t\t\ttext: ''\n\t\t\t\t\t\t\t}\n\t\t\t    \t\t})\n    \t\t\t\t}\n    \t\t\t\t// unsuccessful fetch from estate_page\n    \t\t\t\telse{\n\n    \t\t\t\t\tthis.setState({\n\t\t\t\t    \t\tloading: false,\n\t\t\t\t\t\t\testate_elements:[],\n\t\t\t\t\t\t\testate_elements_empty: null,\n\t\t\t\t\t\t\testate_main_text:{\n\t\t\t\t\t\t\t\t\tid: null,\n\t\t\t\t\t\t\t\t\ttext: ''\n\t\t\t\t\t\t\t}\n\t\t\t    \t\t})\n    \t\t\t\t}\n    \t\t\t}\n\n    \t\t})\n    \t\t.catch((err)=>{\n    \t\t\tconsole.log(err)\n    \t\t})\n    \t}\n    \telse{\n\n    \t\tfetch(\"http://localhost:3001/api/estates-page/fetch_page_elements\")\n    \t\t.then((res)=>{\n    \t\t\treturn res.json()\n    \t\t})\n    \t\t.then((res)=>{\n\n    \t\t\t// successful fetch from estate_page tables  \n    \t\t\tif(res.success &&\n    \t\t\t\tres.estate_page &&\n\t    \t\t\ttypeof res.estate_page === 'object' &&\n\t    \t\t\tArray.isArray(res.estate_page.estate_page_images) &&\n\t    \t\t\tArray.isArray(res.estate_page.estate_page_elements)){\n\n\n\t\t\t\t\tconst estatePage = res.estate_page;\n\n\t\t\t\t\tconsole.log(estatePage)\n\n\t\t\t\t\t// 1️⃣ Group estate_page_elements by estate_title\n\t\t\t\t\tconst elementsMap = {};\n\t\t\t\t\tlet mainTextObj = null;\n\n\t\t\t\t\testatePage.estate_page_elements.forEach(element => {\n\t\t\t\t\t  // Capture main text object\n\t\t\t\t\t  if (element.estate_id === \"estates-main-article1-p1\") {\n\t\t\t\t\t    mainTextObj = {\n\t\t\t\t\t      id: element.estate_id,\n\t\t\t\t\t      estate_main_text: element.estate_main_text\n\t\t\t\t\t    };\n\t\t\t\t\t  }\n\t\t\t\t\t  console.log(mainTextObj)\n\n\t\t\t\t\t  // Group into a map first\n\t\t\t\t\t  if (element.estate_title) {\n\t\t\t\t\t    if (!elementsMap[element.estate_title]) {\n\t\t\t\t\t      elementsMap[element.estate_title] = [];\n\t\t\t\t\t    }\n\t\t\t\t\t    elementsMap[element.estate_title].push(element);\n\t\t\t\t\t  }\n\t\t\t\t\t});\n\n\t\t\t\t\t// Convert to array of groups\n\t\t\t\t\tlet groupedElements = Object.entries(elementsMap).map(([title, items]) => ({\n\t\t\t\t\t  estate_title: title,\n\t\t\t\t\t  elements: items\n\t\t\t\t\t}));\n\n\t\t\t\t\t// 2️⃣ Group estate_page_images by estate_category\n\t\t\t\t\tconst imagesMap = {};\n\t\t\t\t\testatePage.estate_page_images.forEach(image => {\n\t\t\t\t\t  const category = image.estate_category;\n\t\t\t\t\t  if (category) {\n\t\t\t\t\t    if (!imagesMap[category]) {\n\t\t\t\t\t      imagesMap[category] = [];\n\t\t\t\t\t    }\n\t\t\t\t\t    imagesMap[category].push(image);\n\t\t\t\t\t  }\n\t\t\t\t\t});\n\n\t\t\t\t\t// 3️⃣ Merge images into groupedElements if estate_title matches estate_category\n\t\t\t\t\tgroupedElements = groupedElements.map(group => {\n\t\t\t\t\t  const images = imagesMap[group.estate_title] || [];\n\t\t\t\t\t  return {\n\t\t\t\t\t    ...group,\n\t\t\t\t\t    images // new property containing matching images\n\t\t\t\t\t  };\n\t\t\t\t\t});\n\n\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\testate_elements:groupedElements,\n\t\t\t\t\t\testate_elements_empty: null,\n\t\t\t\t\t\testate_main_text:{\n\t\t\t\t\t\t\tid: mainTextObj.id,\n\t\t\t\t\t\t\ttext: mainTextObj.estate_main_text\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n    \t\t\t}\n    \t\t\t// unsuccessful fetch from estate_page tables OR empty tables \n    \t\t\telse{\n\n    \t\t\t\t// successful fetch but empty tables\n    \t\t\t\tif(res.success && res.estate_page === null){\n    \t\t\t\t\tthis.setState({\n\t\t\t\t    \t\tloading: false,\n\t\t\t\t\t\t\testate_elements:[],\n\t\t\t\t\t\t\testate_elements_empty: true,\n\t\t\t\t\t\t\testate_main_text:{\n\t\t\t\t\t\t\t\t\tid: null,\n\t\t\t\t\t\t\t\t\ttext: ''\n\t\t\t\t\t\t\t}\n\t\t\t    \t\t})\n    \t\t\t\t}\n    \t\t\t\t// unsuccessful fetch from estate_page\n    \t\t\t\telse{\n\n    \t\t\t\t\tthis.setState({\n\t\t\t\t    \t\tloading: false,\n\t\t\t\t\t\t\testate_elements:[],\n\t\t\t\t\t\t\testate_elements_empty: null,\n\t\t\t\t\t\t\testate_main_text:{\n\t\t\t\t\t\t\t\t\tid: null,\n\t\t\t\t\t\t\t\t\ttext: ''\n\t\t\t\t\t\t\t}\n\t\t\t    \t\t})\n    \t\t\t\t}\n    \t\t\t}\n\n    \t\t})\n    \t\t.catch((err)=>{\n    \t\t\tconsole.log(err)\n    \t\t})\n    \t}\n    }\n}","export class Estates_view{\n\n\tconstructor(){\n\n\t\t// stopping multiple re renders after initial render of elements\n\t\tthis.initial_elements_render = false;\n\n\t\tthis.estate_element_images = [];\n\n\t\tthis.current_image_index = {}\n\n\t\tthis.slideshowIntervals = {};\n\t}\n\n\trender_page_elements = (state) => {\n\n\t\t// caching parent elements of page elements\n\t\tconst estates_main_section1 = \n\t\tdocument.getElementById(\"estates-main-section1\");\n\n\t\tconst estates_main_text_parent_div = \n\t\tdocument.getElementById(\"estates-main-article1\");\n\n\t\t// if elements are loading \n\t\tif(state.loading){\n\n\t\t\t// estates main text loading \n\t\t\tconst estates_main_text_loading = \n\t\t\tdocument.createElement(\"div\");\n\t\t\testates_main_text_loading\n\t\t\t.setAttribute(\"id\", \"estates-main-article1-p1-loading\");\n\t\t\testates_main_text_loading.classList.add(\"loading\");\n\t\t\testates_main_text_parent_div.appendChild(estates_main_text_loading)\n\n\t\t\t//estates main article loading\n\t\t\tconst estates_main_section1_loading = \n\t\t\tdocument.createElement(\"div\");\n\t\t\testates_main_section1_loading\n\t\t\t.setAttribute(\"id\", \"estates-main-section1-loading\");\n\t\t\testates_main_section1_loading.classList.add(\"loading\");\n\t\t\testates_main_section1.appendChild(estates_main_section1_loading)\n\n\t\t}\n\t\t// if elements have finished loading \n\t\telse{\n\n\t\t    // remove loading elements\n\t\t    const estates_main_text_loading = \n\t\t  \tdocument.getElementById(\"estates-main-article1-p1-loading\");\n\t\t  \tconst estates_main_section1_loading = \n\t\t  \tdocument.getElementById(\"estates-main-section1-loading\");\n\t\t  \testates_main_text_loading.remove();\n\t\t  \testates_main_section1_loading.remove();\n\n\t\t\t// if estate_elements & estate_main_text exist\n\t\t\tif (\n\t\t\t  Array.isArray(state.estate_elements) &&\n\t\t\t  state.estate_elements.length > 0 &&\n\t\t\t  state.estate_elements.every(el =>\n\t\t\t    typeof el.estate_title === \"string\" &&\n\t\t\t    Array.isArray(el.elements) &&\n\t\t\t    Array.isArray(el.images)\n\t\t\t  ) &&\n\t\t\t  state.estate_main_text &&\n\t\t\t  typeof state.estate_main_text === \"object\" &&\n\t\t\t  typeof state.estate_main_text.id === \"string\" &&\n\t\t\t  typeof state.estate_main_text.text === \"string\" &&\n\t\t\t  this.initial_elements_render === false\n\t\t\t) {\n\n\t\t\tconsole.log(state.estate_main_text)\n\n\t\t\t  // create estates main text\n\t\t\t  const main_text_p = document.createElement(\"p\");\n\t\t\t  main_text_p.setAttribute(\"id\", state.estate_main_text.id);\n\t\t\t  // formatting text \n\t\t\t  const text = state.estate_main_text.text;\n\t\t\t  const sentences = text.split(/(?<=\\.)\\s+(?=[A-Z])/);\n\t\t\t  main_text_p.textContent = '';\n\t\t\t  sentences.forEach((sentence, index) => {\n\t\t\t\t  const textNode = document.createTextNode(sentence);\n\t\t\t\t  main_text_p.appendChild(textNode);\n\t\t\t\t  \n\t\t\t\t  // Add a line break after every sentence except the last\n\t\t\t\t  if (index < sentences.length - 1) {\n\t\t\t\t    main_text_p.appendChild(document.createElement(\"br\"));\n\t\t\t\t    main_text_p.appendChild(document.createElement(\"br\"));\n\t\t\t\t  }\n\t\t\t   });\n\t\t\t  estates_main_text_parent_div.appendChild(main_text_p);\n\n\t\t\t  // create article divs\n\t\t\t\tstate.estate_elements.forEach((element)=>{\n\n\t\t\t\t\tconst article = document.createElement(\"article\");\n\n\t\t\t\t\tconst mainDiv1 = document.createElement(\"div\");\n\t\t\t\t\tconst mainDiv2 = document.createElement(\"div\");\n\n\t\t\t\t\tconst mainDiv1_h3 = document.createElement(\"h3\");\n\t\t\t\t\tconst mainDiv1_p = document.createElement(\"p\");\n\t\t\t\t\tconst mainDiv1_div1 = document.createElement(\"div\");\n\t\t\t\t\tconst mainDiv1_div2 = document.createElement(\"div\");\n\n\t\t\t\t\tconst mainDiv1_div1_div1 = document.createElement(\"div\");\n\t\t\t\t\tconst mainDiv1_div1_div2 = document.createElement(\"div\");\n\n\t\t\t\t\tconst mainDiv1_div1_div1_a1 = document.createElement(\"a\");\n\t\t\t\t\tconst mainDiv1_div1_div1_a2 = document.createElement(\"a\");\n\t\t\t\t\tconst mainDiv1_div1_div2_p1 = document.createElement(\"p\");\n\t\t\t\t\tconst mainDiv1_div1_div2_p2 = document.createElement(\"p\");\n\n\t\t\t\t\tconst mainDiv2_div1 = document.createElement(\"div\");\n\n\t\t\t\t\tconst mainDiv2_div1_div1 = document.createElement(\"div\");\n\t\t\t\t\tconst mainDiv2_div1_div2 = document.createElement(\"div\");\n\t\t\t\t\tconst mainDiv2_div1_div3 = document.createElement(\"div\");\n\n\t\t\t\t\t// adding relevant attributes \n\t\t\t\t\tarticle.setAttribute(\"id\", element.estate_title)\n\t\t\t\t\tarticle.classList.add(\"estates-main-section1-article1\");\n\n\t\t\t\t\tmainDiv1.classList.add(\"estates-main-section1-article1-div1\");\n\t\t\t\t\tmainDiv2.classList.add(\"estates-main-section1-article1-div2\");\n\n\t\t\t\t\tmainDiv1_h3.setAttribute(\"id\", `${element.elements[0].estate_id}_title`);\n\t\t\t\t\tmainDiv1_h3.classList.add(\"estates-main-section1-article1-div-h3\");\n\t\t\t\t\tmainDiv1_p.setAttribute(\"id\",`${element.elements[0].estate_id}_desc`);\n\t\t\t\t\tmainDiv1_p.classList.add(\"estates-main-section1-article1-div-p\");\n\t\t\t\t\tmainDiv1_div1.classList.add(\"estates-main-section1-article1-div-div1\");\n\t\t\t\t\tmainDiv1_div2.classList.add(\"estates-main-section1-article1-div-div1\");\n\n\t\t\t\t\tmainDiv1_div1_div1.classList.add(\"estates-main-section1-article1-div-div1\");\n\t\t\t\t\tmainDiv1_div1_div2.classList.add(\"estates-main-section1-article1-div2-div2-div1\");\n\n\t\t\t\t\tmainDiv1_div1_div1_a1.setAttribute(\"id\", `${element.elements[0].estate_id}_google_maps`)\n\t\t\t\t\tmainDiv1_div1_div1_a1.setAttribute(\"href\", element.elements[0].estate_google_maps_url)\n\t\t\t\t\tmainDiv1_div1_div1_a1.setAttribute(\"target\", \"_blank\")\n\t\t\t\t\tmainDiv1_div1_div1_a1.classList.add(\"estates-main-section1-article1-div2-div2-a\");\n\t\t\t\t\tmainDiv1_div1_div1_a2.setAttribute(\"id\", `${element.elements[0].estate_id}_google_street`)\n\t\t\t\t\tmainDiv1_div1_div1_a2.setAttribute(\"href\", element.elements[0].estate_google_street_url)\n\t\t\t\t\tmainDiv1_div1_div1_a2.setAttribute(\"target\", \"_blank\")\n\t\t\t\t\tmainDiv1_div1_div1_a2.classList.add(\"estates-main-section1-article1-div2-div2-a\");\n\t\t\t\t\tmainDiv1_div1_div2_p1.classList.add(\"estates-main-section1-article1-div2-div2-span1-p\");\n\t\t\t\t\tmainDiv1_div1_div2_p2.classList.add(\"estates-main-section1-article1-div2-div2-span1-p2\");\n\t\t\t\t\tmainDiv1_div1_div2_p2.setAttribute(\"id\", `${element.elements[0].estate_id}_address`);\n\n\t\t\t\t\tmainDiv2_div1.classList.add(\"estates-main-section1-article1-div2-div1\");\n\t\t\t\t\tmainDiv2_div1.setAttribute(\"id\", `${element.estate_title}_img_div`)\n\n\t\t\t\t\tmainDiv2_div1_div1.classList.add(\"estates-main-section1-article1-div2-div1-img-backward\");\n\t\t\t\t\tmainDiv2_div1_div1.setAttribute(\"id\", `${element.estate_title}_div_backward`)\n\t\t\t\t\tmainDiv2_div1_div2.classList.add(\"estates-main-section1-article1-div2-div1-img-forward\");\n\t\t\t\t\tmainDiv2_div1_div2.setAttribute(\"id\", `${element.estate_title}_div_forward`)\n\t\t\t\t\tmainDiv2_div1_div3.classList.add(\"estates-main-section1-article1-div2-div1-img-footer\");\n\t\t\t\t\tmainDiv2_div1_div3.setAttribute(\"id\", `${element.estate_title}_div_footer`)\n\n\t\t\t\t\t// adding text content \n\t\t\t\t\tmainDiv1_h3.textContent = element.elements[0].estate_title;\n\n\t\t\t\t\t\t// formatting text \n\t\t\t\t\t  const text = element.elements[0].estate_text;\n\t\t\t\t\t  const sentences = text.split(/(?<=\\.)\\s+(?=[A-Z])/);\n\t\t\t\t\t  mainDiv1_p.textContent = '';\n\t\t\t\t\t  sentences.forEach((sentence, index) => {\n\t\t\t\t\t\t  const textNode = document.createTextNode(sentence);\n\t\t\t\t\t\t  mainDiv1_p.appendChild(textNode);\n\t\t\t\t\t\t  \n\t\t\t\t\t\t  // Add a line break after every sentence except the last\n\t\t\t\t\t\t  if (index < sentences.length - 1) {\n\t\t\t\t\t\t    mainDiv1_p.appendChild(document.createElement(\"br\"));\n\t\t\t\t\t\t    mainDiv1_p.appendChild(document.createElement(\"br\"));\n\t\t\t\t\t\t  }\n\t\t\t\t\t   });\n\n\t\t\t\t\tmainDiv1_div1_div1_a1.textContent = \"Google Maps Location\";\n\t\t\t\t\tmainDiv1_div1_div1_a2.textContent = \"Google Street Location\";\n\t\t\t\t\tmainDiv1_div1_div2_p1.textContent = \"Address:\";\n\t\t\t\t\tmainDiv1_div1_div2_p2.textContent = element.elements[0].estate_address;\n\t\t\t\t\tmainDiv2_div1_div1.textContent = \"<\";\n\t\t\t\t\tmainDiv2_div1_div2.textContent = \">\";\n\n\t\t\t\t\t// appending elements\n\t\t\t\t\testates_main_section1.appendChild(article);\n\t\t\t\t\tarticle.append(mainDiv1,mainDiv2);\n\t\t\t\t\tmainDiv1.append(mainDiv1_h3,mainDiv1_p,mainDiv1_div1,mainDiv1_div2);\n\t\t\t\t\tmainDiv2.appendChild(mainDiv2_div1);\n\t\t\t\t\tmainDiv1_div1.appendChild(mainDiv1_div1_div1);\n\t\t\t\t\tmainDiv1_div2.appendChild(mainDiv1_div1_div2);\n\t\t\t\t\tmainDiv1_div1_div1.append(mainDiv1_div1_div1_a1,mainDiv1_div1_div1_a2)\n\t\t\t\t\tmainDiv1_div1_div2.append(mainDiv1_div1_div2_p1,mainDiv1_div1_div2_p2)\n\t\t\t\t\tmainDiv2.appendChild(mainDiv2_div1);\n\t\t\t\t\tmainDiv2_div1.append(mainDiv2_div1_div1,mainDiv2_div1_div2,mainDiv2_div1_div3);\n\n\t\t\t\t\tconst images_object = {};\n\n\t\t\t\t\tlet image_index = 1;\n\n\t\t\t\t\t// creating image elements & appending first image\n\t\t\t\t\telement.images.forEach((image)=>{\n\n\t\t\t\t\t\tconst img = document.createElement(\"img\");\n\t\t\t\t\t\timg.classList.add(\"estates-main-section1-article1-div2-div1-img\");\n\t\t\t\t\t\timg.setAttribute(\"id\", `${element.estate_title}_img_${image_index}`)\n\t\t\t\t\t\timg.setAttribute(\"src\", process.env.NODE_ENV === \"production\" ? \n\t\t\t\t\t\t\timage.estate_image_production_url: image.estate_image_development_url \n\t\t\t\t\t\t)\n\n\t\t\t\t\t    if (!images_object[image.estate_category]) {\n\t\t\t\t\t      images_object[image.estate_category] = [];\n\t\t\t\t\t    }\n\n\t\t\t\t\t\timages_object[image.estate_category].push(img)\n\n\t\t\t\t\t\timage_index = image_index +1;\n\n\t\t\t\t\t\tconsole.log(image_index)\n\t\t\t\t\t\n\t\t\t\t\t})\n\n\t\t\t\t\tthis.estate_element_images = [...this.estate_element_images,images_object]\n\t\t\t\t\tconsole.log(this.estate_element_images)\n\t\t\t\t})\n\n\t\t\t\tthis.initial_elements_render = true;\n\t\t\t\tthis.autochange_img_and_forward_and_backward_event_listener();\n\t\t\t} \n\t\t\t// if estate_elements & estate_main_text DOESNT exist\n\t\t\telse {\n\n\t\t\t\t// caching parent containers \n\t\t\t\tconst main_p_article = document.getElementById(\"estates-main-article1\");\n\t\t\t\tconst main_p_section = document.getElementById(\"estates-main-section1\");\n\t\t\t\tconst p = document.createElement(\"p\");\n\t\t\t\tconst p2 = document.createElement(\"p\");\n\n\t\t\t\tp.setAttribute(\"id\", \"estates-main-article1-p1\");\n\t\t\t\tp.textContent = \"Currently no information about our estates, Please visit Later\";\n\t\t\t\tp2.setAttribute(\"id\", \"estates-main-section1-p1\");\n\t\t\t\tp2.textContent = \"Currently no information about our estates, Please visit Later\";\n\n\t\t\t\tmain_p_article.appendChild(p);\n\t\t\t\tmain_p_section.appendChild(p2);\n\n\t\t\t  \n\t\t\t  console.error(\"Invalid or missing data\");\n\t\t\t}\n\n\t\t}\n\t}\n\n\tautochange_img_and_forward_and_backward_event_listener = () => {\n\t  // ensure trackers exist\n\t  this.slideshowIntervals = this.slideshowIntervals || {};\n\t  this.current_image_index = this.current_image_index || {};\n\n\t  const articles = Array.from(document.getElementsByClassName(\"estates-main-section1-article1\"));\n\n\t  const change_image_id = (category, change_image) => {\n\t    // clear any existing interval for this category first\n\t    if (this.slideshowIntervals[category]) {\n\t      clearInterval(this.slideshowIntervals[category]);\n\t    }\n\t    const id = setInterval(change_image, 10000);\n\t    this.slideshowIntervals[category] = id;\n\t  };\n\n\t  // fadeSwap: fade out current image, then insert & fade in new image\n\t  const fadeSwap = (imgDiv, sourceImgElement) => {\n\t    const oldImg = imgDiv.querySelector(\".estates-main-section1-article1-div2-div1-img\");\n\t    const newImg = sourceImgElement.cloneNode(true);\n\t    newImg.classList.add(\"estates-main-section1-article1-div2-div1-img\");\n\t    newImg.classList.remove(\"show\"); // start hidden\n\n\t    const TRANS_MS = 1000; // must match CSS transition duration (500ms)\n\n\t    if (oldImg) {\n\t      // when old finishes fading out, remove it and insert new\n\t      const onOldTransitionEnd = () => {\n\t        oldImg.removeEventListener(\"transitionend\", onOldTransitionEnd);\n\t        if (oldImg.parentNode) oldImg.parentNode.removeChild(oldImg);\n\n\t        imgDiv.prepend(newImg);\n\t        // ensure browser registers insertion, then add show to fade in\n\t        requestAnimationFrame(() => newImg.classList.add(\"show\"));\n\t      };\n\n\t      // start fade-out\n\t      oldImg.classList.remove(\"show\");\n\t      oldImg.addEventListener(\"transitionend\", onOldTransitionEnd);\n\n\t      // fallback in case transitionend doesn't fire\n\t      setTimeout(() => {\n\t        if (document.body.contains(oldImg)) {\n\t          oldImg.removeEventListener(\"transitionend\", onOldTransitionEnd);\n\t          if (oldImg.parentNode) oldImg.parentNode.removeChild(oldImg);\n\t          imgDiv.prepend(newImg);\n\t          requestAnimationFrame(() => newImg.classList.add(\"show\"));\n\t        }\n\t      }, TRANS_MS + 100);\n\n\t    } else {\n\t      // no old image, just insert and fade in\n\t      imgDiv.prepend(newImg);\n\t      requestAnimationFrame(() => newImg.classList.add(\"show\"));\n\t    }\n\t  };\n\n\t  articles.forEach((article) => {\n\t    // for each article find the matching images array\n\t    this.estate_element_images.forEach((img_cat) => {\n\t      const categoryName = Object.keys(img_cat)[0]; // string\n\t      if (categoryName === article.id) {\n\t        const imagesArray = img_cat[categoryName]; // array of HTMLImageElement\n\t        if (!Array.isArray(imagesArray) || imagesArray.length === 0) return;\n\n\t        const imgDiv = document.getElementById(`${article.id}_img_div`);\n\t        if (!imgDiv) return;\n\n\t        // initialise index and show first image immediately\n\t        this.current_image_index[categoryName] = 0;\n\t        const firstImageClone = imagesArray[0].cloneNode(true);\n\t        firstImageClone.classList.add(\"estates-main-section1-article1-div2-div1-img\", \"show\");\n\t        imgDiv.prepend(firstImageClone);\n\n\t        // slideshow change function: show next image (wrap)\n\t        const change_image = () => {\n\t          const len = imagesArray.length;\n\t          if (len <= 1) return; // nothing to rotate\n\t          const nextIndex = (this.current_image_index[categoryName] + 1) % len;\n\t          const nextSource = imagesArray[nextIndex];\n\t          fadeSwap(imgDiv, nextSource);\n\t          this.current_image_index[categoryName] = nextIndex;\n\t        };\n\n\t        // start interval for this category (keyed by categoryName)\n\t        change_image_id(categoryName, change_image);\n\t      }\n\t    });\n\n\t    // event listeners for manual navigation\n\t    const back_btn = document.getElementById(`${article.id}_div_backward`);\n\t    const forward_btn = document.getElementById(`${article.id}_div_forward`);\n\n\t    const event_listener = (event, direction) => {\n\t      const imgDiv = document.getElementById(`${article.id}_img_div`);\n\t      const visibleImg = imgDiv && imgDiv.querySelector(\".estates-main-section1-article1-div2-div1-img.show\");\n\t      const imgElement = visibleImg || (imgDiv && imgDiv.children[0]);\n\t      if (!imgElement) return;\n\n\t      const imgCatObj = this.estate_element_images.find(ic => Object.keys(ic)[0] === article.id);\n\t      if (!imgCatObj) return;\n\n\t      const imagesArray = Object.values(imgCatObj)[0];\n\t      const len = imagesArray.length;\n\t      if (!len) return;\n\n\t      // find current index\n\t      let currentIndex = imagesArray.findIndex(img => img.id === imgElement.id);\n\t      if (currentIndex === -1) currentIndex = imagesArray.findIndex(img => img.src === imgElement.src);\n\t      if (currentIndex === -1) return;\n\n\t      // compute new index with correct wrap\n\t      const newIndex = direction === \"back\"\n\t        ? (currentIndex - 1 + len) % len\n\t        : (currentIndex + 1) % len;\n\n\t      // swap with fade\n\t      fadeSwap(imgDiv, imagesArray[newIndex]);\n\n\t      // update index tracker (keyed by category/article id)\n\t      this.current_image_index[article.id] = newIndex;\n\n\t      // stop/clear the auto-interval for this article (optional)\n\t      if (this.slideshowIntervals && this.slideshowIntervals[article.id]) {\n\t        clearInterval(this.slideshowIntervals[article.id]);\n\t        delete this.slideshowIntervals[article.id];\n\t      }\n\t    };\n\n\t    if (back_btn) back_btn.addEventListener(\"click\", (e) => event_listener(e, \"back\"));\n\t    if (forward_btn) forward_btn.addEventListener(\"click\", (e) => event_listener(e, \"forward\"));\n\t  });\n\t};\n\n}"],"names":["$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","parcelRequire","$parcel$global","globalThis","parcelRegister","register","module","exports","$f326917f7fe9f45b$export$c735fcc5c69788eb","$1igQN","$edyy0","model","Estates_model","view","Estates_view","registerListener","state","render_page_elements","fetch_estate_elements","$0f148b0776ddaff4$export$1ecb0017af8e631a","loading","estate_elements","estate_elements_empty","estate_main_text","id","text","listeners","setState","newState","notifyListeners","console","log","listener","forEach","fetch","then","res","json","success","estate_page","Array","isArray","estate_page_images","estate_page_elements","estatePage","elementsMap","mainTextObj","element","estate_id","estate_title","push","groupedElements","entries","map","title","items","elements","imagesMap","image","category","estate_category","group","images","catch","err","$a59d14025f8669c7$export$ec11318d4fa72ed6","initial_elements_render","estate_element_images","current_image_index","slideshowIntervals","estates_main_section1","document","getElementById","estates_main_text_parent_div","estates_main_text_loading","createElement","setAttribute","classList","add","appendChild","estates_main_section1_loading","remove","length","every","el","main_text_p","sentences","split","textContent","sentence","index","textNode","createTextNode","article","mainDiv1","mainDiv2","mainDiv1_h3","mainDiv1_p","mainDiv1_div1","mainDiv1_div2","mainDiv1_div1_div1","mainDiv1_div1_div2","mainDiv1_div1_div1_a1","mainDiv1_div1_div1_a2","mainDiv1_div1_div2_p1","mainDiv1_div1_div2_p2","mainDiv2_div1","mainDiv2_div1_div1","mainDiv2_div1_div2","mainDiv2_div1_div3","estate_google_maps_url","estate_google_street_url","estate_text","estate_address","append","images_object","image_index","img","estate_image_production_url","autochange_img_and_forward_and_backward_event_listener","main_p_article","main_p_section","p","p2","error","articles","from","getElementsByClassName","change_image_id","change_image","clearInterval","setInterval","fadeSwap","imgDiv","sourceImgElement","oldImg","querySelector","newImg","cloneNode","onOldTransitionEnd","removeEventListener","parentNode","removeChild","prepend","requestAnimationFrame","addEventListener","setTimeout","body","contains","TRANS_MS","img_cat","categoryName","keys","imagesArray","firstImageClone","len","nextIndex","back_btn","forward_btn","event_listener","event","direction","imgElement","visibleImg","children","imgCatObj","find","ic","values","currentIndex","findIndex","src","newIndex"],"version":3,"file":"controller.191285d4.js.map"}