function e(e,t,s,n){Object.defineProperty(e,t,{get:s,set:n,enumerable:!0,configurable:!0})}var t=globalThis.parcelRequire8ea6,s=t.register;s("40Dq0",function(s,n){e(s.exports,"News_and_events_Controller",()=>_);var a=t("6Ozoh"),i=t("3v7Iv");class _{constructor(){this.view=new(0,a.News_and_events_View),this.model=new(0,i.News_and_events_model),this.view.initial_render_for_news_and_events(),this.render_news_and_events_plus_categories()}render_news_and_events_plus_categories=()=>{this.model.registerListener(e=>{this.view.render_news_and_events(e)}),this.model.fetch_news_and_events().then(e=>{e.success&&this.view.add_event_listeners(this.filter_categories)})};filter_categories=(e,t)=>{this.model.filter_news_and_events_categories(e,t)}}}),s("6Ozoh",function(t,s){e(t.exports,"News_and_events_View",()=>n);class n{constructor(){this.main_section=document.getElementById("news_and_events_main_section1_section1"),this.news_section=document.getElementById("section_news"),this.events_section=document.getElementById("section_events"),this.news_cats={categories:[],loaded:!1},this.events_cats={categories:[],loaded:!1}}initial_render_for_news_and_events=()=>{let e=document.getElementById("news_and_events_main_section1-section1-btn-news"),t=document.getElementById("news_and_events_main_section1-section1-btn-events"),s=document.getElementById("news_and_events_main_section1_nav1_ul_news"),n=document.getElementById("news_and_events_main_section1_nav1_ul_events");n.style.display="none",this.news_section.style.display="none",this.events_section.style.display="none",s.style.display="flex",e.addEventListener("click",()=>{n.style.display="none",s.style.display="flex",t.classList.remove("news_and_events_main_section1-section1-btn_selected"),e.classList.add("news_and_events_main_section1-section1-btn_selected"),this.events_section.style.display="none",this.news_section.style.display="flex"}),t.addEventListener("click",()=>{n.style.display="flex",s.style.display="none",t.classList.add("news_and_events_main_section1-section1-btn_selected"),e.classList.remove("news_and_events_main_section1-section1-btn_selected"),this.news_section.style.display="none",this.events_section.style.display="flex"})};render_news_and_events=e=>{if(e.tables_loading){this.news_section.style.display="none",this.events_section.style.display="none";let e=document.createElement("div"),t=document.createElement("div");e.setAttribute("id","news_and_events_main_section1_section1_div1_loading"),t.classList.add("loading"),e.appendChild(t),this.main_section.appendChild(e)}else{let t=t=>{let s=document.getElementById("news_and_events_main_section1_section1_div1_loading");s&&this.main_section.removeChild(s),"news"===t?(this.news_section.style.display="none",this.news_section.replaceChildren(),e.news.news_table.forEach(e=>{let t,s,n=document.createElement("article"),a=document.createElement("div"),i=document.createElement("div"),_=document.createElement("h4"),l=document.createElement("h3"),d=document.createElement("div"),o=document.createElement("h5"),c=document.createElement("div"),r=document.createElement("p");e.news_image?t=document.createElement("img"):s=document.createElement("p"),n.classList.add("section_news_article"),a.classList.add("section_news_article_div1"),i.classList.add("section_news_article_div2"),_.classList.add("section_news_div1_h4"),l.classList.add("section_news_div1_h3"),d.classList.add("section_news_article_div2_div1"),e.news_image?(t.classList.add("section_news_article_div2_div1_img"),t.src=e.news_image,t.alt=`${e.news_headline.toLowerCase()} image`):s.classList.add("section_news_article_div2_div1_p"),o.classList.add("section_news_article_div2_div1_h5"),c.classList.add("section_news_article_div2_div2"),r.classList.add("section_news_article_div2_div2_p"),_.textContent=`Date Published: ${e.news_date}`,l.textContent=`News Title: ${e.news_headline}`,e.news_image||(s.textContent="No Image for this News Article"),o.textContent=`News Category: ${e.news_category}`,r.textContent=e.news_article,this.news_section.appendChild(n),n.append(a,i),a.append(_,l),i.append(d,c),e.news_image?d.append(t,o):d.append(s,o),c.appendChild(r)}),this.news_section.style.display="flex"):"events"===t&&(this.events_section.replaceChildren(),this.events_section.style.display="none",e.events.events_table.forEach(e=>{let t=document.createElement("article"),s=document.createElement("div"),n=document.createElement("div"),a=document.createElement("h4"),i=document.createElement("h3"),_=document.createElement("div"),l=document.createElement("h4"),d=document.createElement("div"),o=document.createElement("span"),c=document.createElement("h3"),r=document.createElement("p"),v=document.createElement("div"),w=document.createElement("span"),m=document.createElement("p");t.classList.add("section_events_article"),s.classList.add("section_events_article_div1"),a.classList.add("section_events_div1_h4"),i.classList.add("section_events_div1_h3"),n.classList.add("section_events_article_div2"),_.classList.add("section_events_article_div2_div1"),l.classList.add("section_events_article_div2_div1_h4"),d.classList.add("section_events_article_div2_div1_div1"),o.classList.add("section_events_article_div2_div1_div1_span"),c.classList.add("section_events_article_div2_div1_div1_h3"),r.classList.add("section_events_article_div2_div1_p"),v.classList.add("section_events_article_div2_div2"),w.classList.add("section_events_article_div2_div1_span"),m.classList.add("section_events_article_div2_div1_span_p"),a.textContent=`Event Date: ${e.event_date}`,i.textContent=`Event Title: ${e.event_headline}`,l.textContent=`Event Time: ${e.event_time}`,o.textContent="Event Address:",c.textContent=e.event_address,r.textContent=`Event Category: ${e.event_type}`,w.textContent="Event Description:",m.textContent=e.event_description,this.events_section.appendChild(t),t.append(s,n),s.append(a,i),n.append(_,v),_.append(l,d,r),d.append(o,c),v.append(w,m)}))},s=e=>{let t=document.getElementById("news_and_events_main_section1_section1_div1_loading");if(t&&this.main_section.removeChild(t),"news"===e){this.news_section.style.display="none",this.news_section.replaceChildren();let e=document.createElement("div"),t=document.createElement("h3");e.id="news_and_events_main_section1_section1_div1_no_news",t.id="news_and_events_main_section1_section1_div1_no_news_h3",t.textContent="Currently No News to Display",e.appendChild(t),this.news_section.appendChild(e),this.news_section.style.display="flex"}else if("events"===e){this.events_section.style.display="none",this.events_section.replaceChildren();let e=document.createElement("div"),t=document.createElement("h3");e.id="news_and_events_main_section1_section1_div1_no_events",t.id="news_and_events_main_section1_section1_div1_no_events_h3",t.textContent="Currently No Events to Display",e.appendChild(t),this.events_section.appendChild(e)}},n=()=>{if(e.categories_loading)Array.from(document.getElementsByClassName("news_and_events_main_section1_nav1_ul_li_ul")).forEach(e=>{if("news_section_ul_category"===e.id){let t=document.createElement("li"),s=document.createElement("div");t.classList.add("news_and_events_main_section1_nav1_ul_li_ul_li"),s.classList.add("loading","news_and_events_main_section1_nav1_ul_li_ul_li_loading"),e.appendChild(t),t.appendChild(s),this.news_cats.loaded=!1}else if("events_section_ul_category"===e.id){let t=document.createElement("li"),s=document.createElement("div");t.classList.add("news_and_events_main_section1_nav1_ul_li_ul_li"),s.classList.add("loading","news_and_events_main_section1_nav1_ul_li_ul_li_loading"),e.appendChild(t),t.appendChild(s),this.events_cats.loaded=!1}});else if(!this.news_cats.loaded&&!this.events_cats.loaded){let t=document.getElementById("news_section_ul_category");t.replaceChildren();let s=document.getElementById("events_section_ul_category");s.replaceChildren(),e.news.news_categories.forEach(e=>{let s=document.createElement("li"),n=document.createElement("p");s.classList.add("news_and_events_main_section1_nav1_ul_li_ul_li"),s.setAttribute("name",e),n.classList.add("news_and_events_main_section1_nav1_ul_li_ul_li_p"),n.textContent=e,t.appendChild(s),s.appendChild(n),this.news_cats.categories.push(s)}),e.events.events_categories.forEach(e=>{let t=document.createElement("li"),n=document.createElement("p");t.classList.add("news_and_events_main_section1_nav1_ul_li_ul_li"),t.setAttribute("name",e),n.classList.add("news_and_events_main_section1_nav1_ul_li_ul_li_p"),n.textContent=e,s.appendChild(t),t.appendChild(n),this.events_cats.categories.push(t)}),this.news_cats.loaded=!0,this.events_cats.loaded=!0}};e.news.news_table.length>0&&e.events.events_table.length>0?(t("events"),t("news")):e.news.news_table.length>0?(t("news"),s("events")):e.events.events_table.length>0?(t("events"),s("news")):(s("news"),s("events")),n()}};add_event_listeners=e=>{let t=Array.from(document.getElementsByClassName("news_and_events_main_section1_nav1_ul_li_date")),s=Array.from(document.getElementsByClassName("news_and_events_main_section1_nav1_ul_li_category"));t.forEach(t=>{if("news_and_events_main_section1_nav1_ul_li_date_news"===t.id){let s=document.getElementById("news_section_ul_date");t.addEventListener("mouseenter",()=>{s.style.display="flex"}),t.addEventListener("mouseleave",()=>{s.style.display="none"}),Array.from(s.children).forEach(t=>{t.addEventListener("click",()=>{"Latest News"===t.getAttribute("name")?(e(t.getAttribute("name"),"News"),s.style.display="none"):"Oldest News"===t.getAttribute("name")&&(e(t.getAttribute("name"),"News"),s.style.display="none")})})}else if("news_and_events_main_section1_nav1_ul_li_date_events"===t.id){let s=document.getElementById("events_section_ul_date");t.addEventListener("mouseenter",()=>{s.style.display="flex"}),t.addEventListener("mouseleave",()=>{s.style.display="none"}),Array.from(s.children).forEach(t=>{t.addEventListener("click",()=>{"Latest Events"===t.getAttribute("name")?(e(t.getAttribute("name"),"Events"),s.style.display="none"):"Oldest Events"===t.getAttribute("name")&&(e(t.getAttribute("name"),"Events"),s.style.display="none")})})}}),s.forEach(t=>{if("news_and_events_main_section1_nav1_ul_li_category_news"===t.id){let s=document.getElementById("news_section_ul_category");t.addEventListener("mouseenter",()=>{s.style.display="flex"}),t.addEventListener("mouseleave",()=>{s.style.display="none"}),this.news_cats.categories.forEach(t=>{t.addEventListener("click",()=>{e(t.getAttribute("name"),"News"),s.style.display="none"})})}else if("news_and_events_main_section1_nav1_ul_li_category_events"===t.id){let s=document.getElementById("events_section_ul_category");t.addEventListener("mouseenter",()=>{s.style.display="flex"}),t.addEventListener("mouseleave",()=>{s.style.display="none"}),this.events_cats.categories.forEach(t=>{t.addEventListener("click",()=>{e(t.getAttribute("name"),"Events"),s.style.display="none"})})}})}}}),s("3v7Iv",function(t,s){e(t.exports,"News_and_events_model",()=>n);class n{constructor(){this.state={news:{news_table:[],news_categories:[]},events:{events_table:[],events_categories:[]},tables_loading:!1,categories_loading:!1},this.listeners=[]}setState=e=>(this.state={...this.state,...e},this.notifyListeners(),console.log(this.state),this.state);getState=e=>{if(this.state[e])return this.state[e];console.log("no state exists")};registerListener=e=>{this.listeners.push(e),e(this.state)};notifyListeners=()=>{this.listeners.forEach(e=>{e(this.state)})};fetch_news_and_events=()=>(this.setState({tables_loading:!0,categories_loading:!0}),fetch("http://localhost:3001/api/news&events_page/fetch_news&events").then(e=>e.json()).then(e=>(console.log(e),e.success&&e.tables)?(this.setState({news:{news_table:e.tables.news_table,news_categories:[]},events:{events_table:[],events_categories:e.tables.events_table},tables_loading:!1}),this.fetch_news_and_event_categories().then(e=>e.success?Promise.resolve(e):Promise.reject(!1)).catch(e=>(console.log(e),Promise.reject(!1)))):(console.log("error"),this.setState({news:{news_table:[],news_categories:[]},events:{events_table:[],events_categories:[]},tables_loading:!1}),this.fetch_news_and_event_categories().then(e=>(console.log(e),e.success)?Promise.resolve(e):Promise.reject(!1)).catch(e=>(console.log(e),Promise.reject(!1))))).catch(e=>(console.log(e),this.setState({news:{news_table:res.tables.news_table,news_categories:[]},events:{events_table:[],events_categories:res.tables.events_table},tables_loading:!1}),Promise.resolve(!1))));fetch_news_and_event_categories=()=>{if(this.state.news.news_table.length>0&&this.state.events.events_table.length>0){let e=["Updates","Community","Services"],t=["Meetings","Fundrasing","Community Outings"],s=[],n=[];return this.state.news.news_table.forEach(e=>{let t=e.news_category.trim(),n=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase();s.includes(n)||s.push(n)}),this.state.events.events_table.forEach(e=>{let t=e.event_type.trim(),s=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase();n.includes(s)||n.push(s)}),n.forEach(e=>{t.includes(e)||t.push(e)}),s.forEach(t=>{e.includes(t)||e.push(t)}),this.setState({news:{news_categories:e,news_table:this.state.news.news_table},events:{events_categories:t,events_table:this.state.events.events_table},tables_loading:!1,categories_loading:!1}),Promise.resolve({success:!0})}if(this.state.news.news_table.length>0){let e=["Updates","Community","Services"],t=[];return this.state.news.news_table.forEach(e=>{let s=e.news_category.trim(),n=s.charAt(0).toUpperCase()+s.slice(1).toLowerCase();t.includes(n)||t.push(n)}),t.forEach(t=>{e.includes(t)||e.push(t)}),this.setState({news:{news_categories:e,news_table:this.state.news.news_table},events:{events_categories:["Meetings","Fundrasing","Community Outings"],events_table:this.state.events.events_table},tables_loading:!1,categories_loading:!1}),Promise.resolve({success:!0})}if(!(this.state.events.events_table.length>0))return this.setState({news:{news_categories:["Updates","Community","Services"],news_table:this.state.news.news_table},events:{events_categories:["Meetings","Fundrasing","Community Outings"],events_table:this.state.events.events_table},tables_loading:!1,categories_loading:!1}),Promise.resolve({success:!0});{let e=["Meetings","Fundrasing","Community Outings"],t=[];return this.state.events.events_table.forEach(e=>{let s=e.event_type.trim(),n=s.charAt(0).toUpperCase()+s.slice(1).toLowerCase();t.includes(n)||t.push(n)}),t.forEach(t=>{e.includes(t)||e.push(t)}),this.setState({news:{news_categories:["Updates","Community","Services"],news_table:this.state.news.news_table},events:{events_categories:e,events_table:this.state.events.events_table},tables_loading:!1,categories_loading:!1}),Promise.resolve({success:!0})}};filter_news_and_events_categories=(e,t)=>{if("Latest News"===e&&"News"===t){let e=[...this.state.news.news_table].sort((e,t)=>{let s=new Date,[n,a,i]=e.news_date.split("-").map(Number),[_,l,d]=t.news_date.split("-").map(Number),o=new Date(i,a-1,n);return Math.abs(o-s)-Math.abs(new Date(d,l-1,_)-s)});this.setState({news:{news_table:e,news_categories:this.state.news.news_categories},events:{events_table:this.state.events.events_table,events_categories:this.state.events.events_categories},tables_loading:this.state.tables_loading,categories_loading:this.state.categories_loading})}else if("Latest Events"===e&&"Events"===t){let e=[...this.state.events.events_table].sort((e,t)=>{let s=new Date,[n,a,i]=e.event_date.split("-").map(Number),[_,l,d]=t.event_date.split("-").map(Number),o=new Date(i,a-1,n),c=new Date(d,l-1,_),r=Math.abs(o-s);return Math.abs(c-s)-r});this.setState({news:{news_table:this.state.news.news_table,news_categories:this.state.news.news_categories},events:{events_table:e,events_categories:this.state.events.events_categories},tables_loading:this.state.tables_loading,categories_loading:this.state.categories_loading})}else if("Oldest News"===e&&"News"===t){let e=[...this.state.news.news_table].sort((e,t)=>{let s=new Date,[n,a,i]=e.news_date.split("-").map(Number),[_,l,d]=t.news_date.split("-").map(Number),o=new Date(i,a-1,n),c=new Date(d,l-1,_),r=Math.abs(o-s);return Math.abs(c-s)-r});this.setState({news:{news_table:e,news_categories:this.state.news.news_categories},events:{events_table:this.state.events.events_table,events_categories:this.state.events.events_categories},tables_loading:this.state.tables_loading,categories_loading:this.state.categories_loading})}else if("Oldest Events"===e&&"Events"===t){let e=[...this.state.events.events_table].sort((e,t)=>{let s=new Date,[n,a,i]=e.event_date.split("-").map(Number),[_,l,d]=t.event_date.split("-").map(Number),o=new Date(i,a-1,n);return Math.abs(o-s)-Math.abs(new Date(d,l-1,_)-s)});this.setState({news:{news_table:this.state.news.news_table,news_categories:this.state.news.news_categories},events:{events_table:e,events_categories:this.state.events.events_categories},tables_loading:this.state.tables_loading,categories_loading:this.state.categories_loading})}else if(e&&"News"===t){let t=[...this.state.news.news_table].sort((t,s)=>{if(t.news_category===e&&s.news_category!==e)return -1;if(s.news_category===e&&t.news_category!==e)return 1;let[n,a,i]=t.news_date.split("-").map(Number),[_,l,d]=s.news_date.split("-").map(Number),o=new Date(i,a-1,n);return new Date(d,l-1,_)-o});this.setState({news:{news_table:t,news_categories:this.state.news.news_categories},events:{events_table:this.state.events.events_table,events_categories:this.state.events.events_categories},tables_loading:this.state.tables_loading,categories_loading:this.state.categories_loading})}else if(e&&"Events"===t){let t=[...this.state.events.events_table].sort((t,s)=>{if(t.event_type===e&&s.event_type!==e)return -1;if(s.event_type===e&&t.event_type!==e)return 1;let[n,a,i]=t.event_date.split("-").map(Number),[_,l,d]=s.event_date.split("-").map(Number),o=new Date(i,a-1,n);return new Date(d,l-1,_)-o});this.setState({news:{news_table:this.state.news.news_table,news_categories:this.state.news.news_categories},events:{events_table:t,events_categories:this.state.events.events_categories},tables_loading:this.state.tables_loading,categories_loading:this.state.categories_loading})}}}});
//# sourceMappingURL=controller.a5c4be29.js.map
