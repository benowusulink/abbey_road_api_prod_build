function e(e,t,a,s){Object.defineProperty(e,t,{get:a,set:s,enumerable:!0,configurable:!0})}var t=globalThis.parcelRequire8ea6,a=t.register;a("1TpwC",function(a,s){e(a.exports,"Board_members_controller",()=>d);var n=t("a16PV"),_=t("fRFVs");class d{constructor(){this.view=new(0,n.Board_members_view),this.model=new(0,_.Board_members_model),this.view.open_and_close_menu_mobile(),this.model.registerListener(e=>{this.view.render_board_documents(e)}),this.model.fetch_board_documents(),this.view.nav_sort_by_event_listener(this.sort_board_documents)}sort_board_documents=e=>{this.model.sort_board_documents(e)}}}),a("a16PV",function(t,a){e(t.exports,"Board_members_view",()=>s);class s{constructor(){}open_and_close_menu_mobile=()=>{let e=document.getElementById("admin_board_members_page_header_mobile_nav_btn"),t=document.getElementById("mobile-menu-close"),a=document.getElementById("mobile-menu");e.addEventListener("click",e=>{a.style.display="none",a.style.display="flex"}),t.addEventListener("click",e=>{a.style.display="none"})};render_board_documents=e=>{let t=document.getElementById("admin_board_members_page_main_div"),a=document.getElementById("admin_board_members_page_main_h2"),s=document.getElementById("admin_board_members_page_main_h21"),n=document.getElementById("admin_board_members_page_main_section"),_=document.getElementById("admin_board_members_page_main_div_mobile"),d=document.getElementById("admin_board_members_page_main_mobile_h2"),i=document.getElementById("admin_board_members_page_main_mobile_h21"),o=document.getElementById("admin_board_members_page_main_mobile_section");return e.loading?void(t.style.display="none",a.style.display="none",s.style.display="none",n.style.display="none",t.style.display="block",_.style.display="none",d.style.display="none",i.style.display="none",o.style.display="none",_.style.display="block"):!1===e.loading&&0===e.board_documents.length?void(t.style.display="none",a.style.display="none",s.style.display="none",n.style.display="none",a.style.display="block",_.style.display="none",d.style.display="none",i.style.display="none",o.style.display="none",d.style.display="flex"):!1===e.loading&&e.board_documents.length>0?void(()=>{t.style.display="none",a.style.display="none",s.style.display="block",n.style.display="flex";let m=document.getElementById("admin_board_members_page_main_section_ul1");m.replaceChildren(),e.board_documents.forEach(e=>{let t=document.createElement("li"),a=document.createElement("a"),s=document.createElement("span"),n=document.createElement("span");t.classList.add("admin_board_members_page_main_section_ul1_li"),a.classList.add("admin_board_members_page_main_section_ul1_li_a"),a.setAttribute("target","_blank"),a.setAttribute("href",e.production_url),s.classList.add("admin_board_members_page_main_section_ul1_li_a_span1"),n.classList.add("admin_board_members_page_main_section_ul1_li_a_span2"),s.textContent=e.name,n.textContent=`Date Added: ${e.date_added}`,m.appendChild(t),t.appendChild(a),a.append(s,n)}),_.style.display="none",d.style.display="none",i.style.display="block",o.style.display="flex";let l=document.getElementById("admin_board_members_page_main_mobile_section_ul1");l.replaceChildren(),e.board_documents.forEach(e=>{let t=document.createElement("li"),a=document.createElement("a"),s=document.createElement("span"),n=document.createElement("span");t.classList.add("admin_board_members_page_main_mobile_section_ul1_li"),a.classList.add("admin_board_members_page_main_mobile_section_ul1_li_a"),a.setAttribute("target","_blank"),a.setAttribute("href",e.production_url),s.classList.add("admin_board_members_page_main_mobile_section_ul1_li_a_span1"),n.classList.add("admin_board_members_page_main_mobile_section_ul1_li_a_span2"),s.textContent=e.name,n.textContent=`Date Added: ${e.date_added}`,l.appendChild(t),t.appendChild(a),a.append(s,n)})})():void 0};nav_sort_by_event_listener=e=>{let t=document.getElementById("admin_board_members_page_main_section_nav_div_h52"),a=document.getElementById("admin_board_members_page_main_section_nav_div_h53");t.addEventListener("click",s=>{e("latest"),a.classList.remove("admin_board_members_page_main_section_nav_div_h5_selected"),t.classList.remove("admin_board_members_page_main_section_nav_div_h5_selected"),t.classList.add("admin_board_members_page_main_section_nav_div_h5_selected")}),a.addEventListener("click",s=>{e("alphabetical order"),t.classList.remove("admin_board_members_page_main_section_nav_div_h5_selected"),a.classList.remove("admin_board_members_page_main_section_nav_div_h5_selected"),a.classList.add("admin_board_members_page_main_section_nav_div_h5_selected")});let s=document.getElementById("admin_board_members_page_main_mobile_section_nav_div_h52"),n=document.getElementById("admin_board_members_page_main_mobile_section_nav_div_h53");s.addEventListener("click",t=>{e("latest"),n.classList.remove("admin_board_members_page_main_mobile_section_nav_div_h5_selected"),s.classList.remove("admin_board_members_page_main_mobile_section_nav_div_h5_selected"),s.classList.add("admin_board_members_page_main_mobile_section_nav_div_h5_selected")}),n.addEventListener("click",t=>{e("alphabetical order"),s.classList.remove("admin_board_members_page_main_mobile_section_nav_div_h5_selected"),n.classList.remove("admin_board_members_page_main_mobile_section_nav_div_h5_selected"),n.classList.add("admin_board_members_page_main_mobile_section_nav_div_h5_selected")})}}}),a("fRFVs",function(t,a){e(t.exports,"Board_members_model",()=>s);class s{constructor(){this.state={loading:!1,board_documents:[]},this.listeners=[]}setState=e=>{let t=(e,a)=>{for(let s in a)"object"!=typeof e[s]||"object"!=typeof a[s]||null===e[s]||null===a[s]||Array.isArray(e[s])||Array.isArray(a[s])?e[s]=a[s]:t(e[s],a[s]);return e};return this.state=t({...this.state},e),this.notifyListeners(),console.log(this.state),this.state};registerListener=e=>{this.listeners=[...this.listeners,e],e(this.state)};notifyListeners=()=>{this.listeners.forEach(e=>{e(this.state)})};fetch_board_documents=()=>{this.setState({loading:!0}),fetch("https://www.abbeyroad.org.uk/api/admin_board_members_page/fetch_board_documents").then(e=>e.json()).then(e=>{e.success?this.setState({loading:!1,board_documents:e.board_documents}):(this.setState({loading:!1}),console.log("error getting board_documents from server"))}).catch(e=>{this.setState({loading:!1}),console.log(e)})};sort_board_documents=e=>{if("latest"===e&&this.state.board_documents.length>0){this.setState({loading:!0});let e=[...this.state.board_documents].sort((e,t)=>{let[a,s,n]=e.date_added.split("/").map(Number),[_,d,i]=t.date_added.split("/").map(Number),o=new Date(n,s-1,a);return new Date(i,d-1,_)-o});this.setState({loading:!1,board_documents:e})}else{if("alphabetical order"!==e||!(this.state.board_documents.length>0))return;this.setState({loading:!0});let t=[...this.state.board_documents].sort((e,t)=>e.name.localeCompare(t.name));this.setState({loading:!1,board_documents:t})}}}});
//# sourceMappingURL=controller.ba4acbc8.js.map
