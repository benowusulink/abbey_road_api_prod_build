function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}var t=globalThis.parcelRequire8ea6,n=t.register;n("dkJDw",function(n,o){e(n.exports,"ContactController",()=>a);var s=t("6oHMy"),i=t("3ZZly");class a{constructor(){this.view=new(0,s.ContactView),this.model=new(0,i.ContactModel),this.view.init(),this.view.submitForm(this.handle_contact_main_section1_form1_submit)}handle_contact_main_section1_form1_submit=e=>this.model.handle_contact_main_section1_form1_submit(e).then(e=>e.status?Promise.resolve({status:!0}):Promise.reject({status:!1})).catch(e=>{console.log(e),Promise.reject({status:!1})})}}),n("6oHMy",function(t,n){e(t.exports,"ContactView",()=>o);class o{constructor(){this.name=window.sessionStorage.getItem("name")?document.getElementById("contact-page-form-name").value=window.sessionStorage.getItem("name"):"",this.email=window.sessionStorage.getItem("email")?document.getElementById("contact-page-form-email").value=window.sessionStorage.getItem("email"):"",this.telephone=window.sessionStorage.getItem("telephone")?document.getElementById("contact-page-form-telephone-number").value=window.sessionStorage.getItem("telephone"):"",this.msg=window.sessionStorage.getItem("msg")?document.getElementById("contact-page-form-msg").value=window.sessionStorage.getItem("msg").trim():"".trim(),this.init=()=>{this.presave_input_data(),this.remove_session_storage_when_form_resets(),this.hide_response_message()}}hide_response_message=()=>{document.getElementById("contact-main-section1-form1-div1").style.display="none"};presave_input_data=()=>{let e=document.getElementById("contact-page-form-name"),t=document.getElementById("contact-page-form-email"),n=document.getElementById("contact-page-form-telephone-number"),o=document.getElementById("contact-page-form-msg");e.addEventListener("input",e=>{this.name=e.target.value.trim(),window.sessionStorage.setItem("name",this.name)}),t.addEventListener("input",e=>{this.email=e.target.value.trim(),window.sessionStorage.setItem("email",this.email)}),n.addEventListener("input",e=>{this.telephone=e.target.value.trim(),window.sessionStorage.setItem("telephone",this.telephone)}),o.addEventListener("input",e=>{e.target.value.trim(),this.msg=e.target.value.trim(),window.sessionStorage.setItem("msg",this.msg)})};remove_session_storage_when_form_resets=()=>{document.getElementById("contact-main-section1-form1-div-div2-input1").addEventListener("click",e=>{window.sessionStorage.removeItem("name"),window.sessionStorage.removeItem("email"),window.sessionStorage.removeItem("telephone"),window.sessionStorage.removeItem("msg")})};submitForm=e=>{let t=document.getElementById("contact-main-section1-form1");console.log("click"),t.addEventListener("submit",t=>{if(t.preventDefault(),this.name=document.getElementById("contact-page-form-name").value.trim(),this.email=document.getElementById("contact-page-form-email").value.trim(),this.telephone=document.getElementById("contact-page-form-telephone-number").value.trim(),this.msg=document.getElementById("contact-page-form-msg").value.trim(),this.name.length>0&&this.email.length>0&&this.telephone.length>0&&this.msg.length>0)if(this.email.includes("@")&&this.email.length>5)e({name:this.name,email:this.email,telephone:this.telephone,msg:this.msg}).then(e=>{if(e.status){let e=document.getElementById("contact-main-section1-form1-div1"),t=document.getElementById("contact-main-section1-form1-div1-p1");e.style.display="flex",t.classList.remove("contact-main-section1-form1-div1-p1-fail"),t.classList.add("contact-main-section1-form1-div1-p1-success"),t.textContent="Message sent successfully",document.getElementById("contact-page-form-name").value="",this.name="",window.sessionStorage.removeItem("name"),document.getElementById("contact-page-form-email").value="",this.email="",window.sessionStorage.removeItem("email"),document.getElementById("contact-page-form-telephone-number").value="",this.telephone="",window.sessionStorage.removeItem("telephone"),document.getElementById("contact-page-form-msg").value="",this.msg="",window.sessionStorage.removeItem("msg")}else{let e=document.getElementById("contact-main-section1-form1-div1"),t=document.getElementById("contact-main-section1-form1-div1-p1");e.style.display="flex",t.classList.add("contact-main-section1-form1-div1-p1-error"),t.textContent="Error sending message"}}).catch(e=>{console.log(e);let t=document.getElementById("contact-main-section1-form1-div1"),n=document.getElementById("contact-main-section1-form1-div1-p1");t.style.display="flex",n.classList.remove("contact-main-section1-form1-div1-p1-success"),n.classList.add("contact-main-section1-form1-div1-p1-fail"),n.textContent="Error sending message"});else{let e=document.getElementById("contact-main-section1-form1-div1"),t=document.getElementById("contact-main-section1-form1-div1-p1");e.style.display="flex",t.classList.remove("contact-main-section1-form1-div1-p1-success"),t.classList.add("contact-main-section1-form1-div1-p1-fail"),t.textContent="Please Enter a valid Email"}else{let e=document.getElementById("contact-main-section1-form1-div1"),t=document.getElementById("contact-main-section1-form1-div1-p1");e.style.display="flex",t.classList.remove("contact-main-section1-form1-div1-p1-success"),t.classList.add("contact-main-section1-form1-div1-p1-fail"),t.textContent="Please Fill out All Fields"}})}}}),n("3ZZly",function(t,n){e(t.exports,"ContactModel",()=>o);class o{constructor(){}handle_contact_main_section1_form1_submit=e=>fetch("https://www.abbeyroad.org.uk/api/contact-page/send_email",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>e.status?Promise.resolve({status:!0}):(console.log(e.msg),Promise.reject({status:!1}))).catch(e=>(console.log(e),Promise.resolve({status:!1})));formattedDate=()=>{let e=new Date,t=`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]} ${e.getDate()} ${e.getFullYear()} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}`;return console.log(t),t}}});
//# sourceMappingURL=controller.37a67607.js.map
