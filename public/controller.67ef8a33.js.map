{"mappings":"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","sources":["<anon>","src/javascript/estates-page/controller/controller.js","src/javascript/estates-page/model/model.js","src/javascript/estates-page/view/view.js"],"sourcesContent":["\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global = globalThis;\n    var parcelRequire = $parcel$global[\"parcelRequire8ea6\"];\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"kShGt\", function(module, exports) {\n\n$parcel$export(module.exports, \"Estates_controller\", () => $f326917f7fe9f45b$export$c735fcc5c69788eb);\n\nvar $1igQN = parcelRequire(\"1igQN\");\n\nvar $edyy0 = parcelRequire(\"edyy0\");\nclass $f326917f7fe9f45b$export$c735fcc5c69788eb {\n    constructor(){\n        this.model = new (0, $1igQN.Estates_model)();\n        this.view = new (0, $edyy0.Estates_view)();\n        this.model.registerListener((state)=>{\n            this.view.render_page_elements(state);\n        });\n        this.model.fetch_estate_elements();\n        this.view.open_and_close_navbar();\n    }\n}\n\n});\nparcelRegister(\"1igQN\", function(module, exports) {\n\n$parcel$export(module.exports, \"Estates_model\", () => $0f148b0776ddaff4$export$1ecb0017af8e631a);\nclass $0f148b0776ddaff4$export$1ecb0017af8e631a {\n    constructor(){\n        this.state = {\n            loading: true,\n            estate_elements: [],\n            estate_elements_empty: null,\n            estate_main_text: {\n                id: null,\n                text: ''\n            }\n        };\n        this.listeners = [];\n    }\n    setState = (newState)=>{\n        this.state = {\n            ...this.state,\n            ...newState\n        };\n        this.notifyListeners();\n        console.log(this.state);\n        return this.state;\n    };\n    registerListener = (listener)=>{\n        this.listeners = [\n            ...this.listeners,\n            listener\n        ];\n        listener(this.state);\n    };\n    notifyListeners = ()=>{\n        this.listeners.forEach((listener)=>{\n            listener(this.state);\n        });\n    };\n    fetch_estate_elements = ()=>{\n        var res, res1, element, image, group, err;\n        fetch(\"https://www.abbeyroad.org.uk/api/estates-page/fetch_page_elements\").then((res)=>{\n            return res.json();\n        }).then((res)=>{\n            // successful fetch from estate_page tables  \n            if (res.success && res.estate_page && typeof res.estate_page === 'object' && Array.isArray(res.estate_page.estate_page_images) && Array.isArray(res.estate_page.estate_page_elements)) {\n                const estatePage = res.estate_page;\n                // 1️⃣ Group estate_page_elements by estate_title\n                const elementsMap = {};\n                let mainTextObj = null;\n                estatePage.estate_page_elements.forEach((element)=>{\n                    // Capture main text object\n                    if (element.estate_id === \"estates-main-article1-p1\") mainTextObj = {\n                        id: element.estate_id,\n                        estate_main_text: element.estate_main_text\n                    };\n                    // Group into a map first\n                    if (element.estate_title) {\n                        if (!elementsMap[element.estate_title]) elementsMap[element.estate_title] = [];\n                        elementsMap[element.estate_title].push(element);\n                    }\n                });\n                // Convert to array of groups\n                let groupedElements = Object.entries(elementsMap).map(([title, items])=>({\n                        estate_title: title,\n                        elements: items\n                    }));\n                // 2️⃣ Group estate_page_images by estate_category\n                const imagesMap = {};\n                estatePage.estate_page_images.forEach((image)=>{\n                    const category = image.estate_category;\n                    if (category) {\n                        if (!imagesMap[category]) imagesMap[category] = [];\n                        imagesMap[category].push(image);\n                    }\n                });\n                // 3️⃣ Merge images into groupedElements if estate_title matches estate_category\n                groupedElements = groupedElements.map((group)=>{\n                    const images = imagesMap[group.estate_title] || [];\n                    return {\n                        ...group,\n                        images: images // new property containing matching images\n                    };\n                });\n                console.log(\"succesfful fetch\");\n                this.setState({\n                    loading: false,\n                    estate_elements: groupedElements,\n                    estate_elements_empty: null,\n                    estate_main_text: {\n                        id: mainTextObj.id,\n                        text: mainTextObj.estate_main_text\n                    }\n                });\n            } else // successful fetch but empty tables\n            if (res.success && res.estate_page === null) this.setState({\n                loading: false,\n                estate_elements: [],\n                estate_elements_empty: true,\n                estate_main_text: {\n                    id: null,\n                    text: ''\n                }\n            });\n            else this.setState({\n                loading: false,\n                estate_elements: [],\n                estate_elements_empty: null,\n                estate_main_text: {\n                    id: null,\n                    text: ''\n                }\n            });\n        }).catch((err)=>{\n            console.log(err);\n        });\n    };\n}\n\n});\n\nparcelRegister(\"edyy0\", function(module, exports) {\n\n$parcel$export(module.exports, \"Estates_view\", () => $a59d14025f8669c7$export$ec11318d4fa72ed6);\nclass $a59d14025f8669c7$export$ec11318d4fa72ed6 {\n    constructor(){\n        // stopping multiple re renders after initial render of elements\n        this.initial_elements_render = false;\n        this.estate_element_images = [];\n        this.estate_element_images_mobile = [];\n        this.current_image_index = {};\n        this.slideshowIntervals = {};\n    }\n    open_and_close_navbar = ()=>{\n        const navbar_btn_open = document.getElementById(\"mobile-menu-btn\");\n        const navbar_btn_close = document.getElementById(\"mobile-menu-close\");\n        const menu = document.getElementById(\"mobile-menu\");\n        navbar_btn_open.addEventListener(\"click\", (event)=>{\n            menu.style.display = 'block';\n        });\n        navbar_btn_close.addEventListener(\"click\", (event)=>{\n            menu.style.display = 'none';\n        });\n    };\n    render_page_elements = (state)=>{\n        // caching parent elements of page elements\n        const estates_main_section1 = document.getElementById(\"estates-main-section1\");\n        const estates_main_text_parent_div = document.getElementById(\"estates-main-article1\");\n        // MOBILE \n        const estates_main_section1_mobile = document.getElementById(\"estates-mobile-card\");\n        const estates_main_text_parent_div_mobile = document.getElementById(\"estates-mobile-about-div1\");\n        // if elements are loading \n        if (state.loading) {\n            // estates main text loading \n            const estates_main_text_loading = document.createElement(\"div\");\n            estates_main_text_loading.setAttribute(\"id\", \"estates-main-article1-p1-loading\");\n            estates_main_text_loading.classList.add(\"loading\");\n            estates_main_text_parent_div.appendChild(estates_main_text_loading);\n            //estates main article loading\n            const estates_main_section1_loading = document.createElement(\"div\");\n            estates_main_section1_loading.setAttribute(\"id\", \"estates-main-section1-loading\");\n            estates_main_section1_loading.classList.add(\"loading\");\n            estates_main_section1.appendChild(estates_main_section1_loading);\n            //MOBILE\n            const previous_text = document.getElementById(\"estates-mobile-p\");\n            if (previous_text) estates_main_text_parent_div_mobile.removeChild(previous_text);\n            const estates_main_text_loading_mobile = document.createElement(\"div\");\n            estates_main_text_loading_mobile.setAttribute(\"id\", \"estates_main_text_loading_mobile\");\n            estates_main_text_loading_mobile.classList.add(\"loading\");\n            estates_main_text_parent_div_mobile.appendChild(estates_main_text_loading_mobile);\n            //estates main article loading\n            console.log(estates_main_section1_mobile);\n            estates_main_section1_mobile.replaceChildren();\n            const estates_main_section1_loading_mobile = document.createElement(\"div\");\n            estates_main_section1_loading_mobile.setAttribute(\"id\", \"estates_main_section1_loading_mobile\");\n            estates_main_section1_loading_mobile.classList.add(\"loading\");\n            estates_main_section1_mobile.appendChild(estates_main_section1_loading_mobile);\n        } else {\n            // remove loading elements\n            const estates_main_text_loading = document.getElementById(\"estates-main-article1-p1-loading\");\n            const estates_main_section1_loading = document.getElementById(\"estates-main-section1-loading\");\n            estates_main_text_loading.remove();\n            estates_main_section1_loading.remove();\n            //MOBILE\n            const estates_main_text_loading_mobile = document.getElementById(\"estates_main_text_loading_mobile\");\n            const estates_main_section1_loading_mobile = document.getElementById(\"estates_main_section1_loading_mobile\");\n            estates_main_text_loading_mobile.remove();\n            estates_main_section1_loading_mobile.remove();\n            // if estate_elements & estate_main_text exist\n            if (Array.isArray(state.estate_elements) && state.estate_elements.length > 0 && state.estate_elements.every((el)=>typeof el.estate_title === \"string\" && Array.isArray(el.elements) && Array.isArray(el.images)) && state.estate_main_text && typeof state.estate_main_text === \"object\" && typeof state.estate_main_text.id === \"string\" && typeof state.estate_main_text.text === \"string\" && this.initial_elements_render === false) {\n                // create estates main text\n                const main_text_p = document.createElement(\"p\");\n                main_text_p.setAttribute(\"id\", state.estate_main_text.id);\n                // formatting text \n                const text = state.estate_main_text.text;\n                const sentences = text.split(/(?<=\\.)\\s+(?=[A-Z])/);\n                main_text_p.textContent = '';\n                sentences.forEach((sentence, index)=>{\n                    const textNode = document.createTextNode(sentence);\n                    main_text_p.appendChild(textNode);\n                    // Add a line break after every sentence except the last\n                    if (index < sentences.length - 1) {\n                        main_text_p.appendChild(document.createElement(\"br\"));\n                        main_text_p.appendChild(document.createElement(\"br\"));\n                    }\n                });\n                estates_main_text_parent_div.appendChild(main_text_p);\n                // MOBILE\n                // create estates main text\n                const main_text_p_mobile = document.createElement(\"p\");\n                main_text_p_mobile.setAttribute(\"id\", \"estates-mobile-p\");\n                main_text_p_mobile.textContent = state.estate_main_text.text;\n                estates_main_text_parent_div_mobile.appendChild(main_text_p_mobile);\n                // create article divs\n                state.estate_elements.forEach((element)=>{\n                    const article = document.createElement(\"article\");\n                    const mainDiv1 = document.createElement(\"div\");\n                    const mainDiv2 = document.createElement(\"div\");\n                    const mainDiv1_h3 = document.createElement(\"h3\");\n                    const mainDiv1_p = document.createElement(\"p\");\n                    const mainDiv1_div1 = document.createElement(\"div\");\n                    const mainDiv1_div2 = document.createElement(\"div\");\n                    const mainDiv1_div1_div1 = document.createElement(\"div\");\n                    const mainDiv1_div1_div2 = document.createElement(\"div\");\n                    const mainDiv1_div1_div1_a1 = document.createElement(\"a\");\n                    const mainDiv1_div1_div1_a2 = document.createElement(\"a\");\n                    const mainDiv1_div1_div2_p1 = document.createElement(\"p\");\n                    const mainDiv1_div1_div2_p2 = document.createElement(\"p\");\n                    const mainDiv2_div1 = document.createElement(\"div\");\n                    const mainDiv2_div1_div1 = document.createElement(\"div\");\n                    const mainDiv2_div1_div2 = document.createElement(\"div\");\n                    const mainDiv2_div1_div3 = document.createElement(\"div\");\n                    // adding relevant attributes \n                    article.setAttribute(\"id\", element.estate_title);\n                    article.classList.add(\"estates-main-section1-article1\");\n                    mainDiv1.classList.add(\"estates-main-section1-article1-div1\");\n                    mainDiv2.classList.add(\"estates-main-section1-article1-div2\");\n                    mainDiv1_h3.setAttribute(\"id\", `${element.elements[0].estate_id}_title`);\n                    mainDiv1_h3.classList.add(\"estates-main-section1-article1-div-h3\");\n                    mainDiv1_p.setAttribute(\"id\", `${element.elements[0].estate_id}_desc`);\n                    mainDiv1_p.classList.add(\"estates-main-section1-article1-div-p\");\n                    mainDiv1_div1.classList.add(\"estates-main-section1-article1-div-div1\");\n                    mainDiv1_div2.classList.add(\"estates-main-section1-article1-div-div1\");\n                    mainDiv1_div1_div1.classList.add(\"estates-main-section1-article1-div-div1\");\n                    mainDiv1_div1_div2.classList.add(\"estates-main-section1-article1-div2-div2-div1\");\n                    mainDiv1_div1_div1_a1.setAttribute(\"id\", `${element.elements[0].estate_id}_google_maps`);\n                    mainDiv1_div1_div1_a1.setAttribute(\"href\", element.elements[0].estate_google_maps_url);\n                    mainDiv1_div1_div1_a1.setAttribute(\"target\", \"_blank\");\n                    mainDiv1_div1_div1_a1.classList.add(\"estates-main-section1-article1-div2-div2-a\");\n                    mainDiv1_div1_div1_a2.setAttribute(\"id\", `${element.elements[0].estate_id}_google_street`);\n                    mainDiv1_div1_div1_a2.setAttribute(\"href\", element.elements[0].estate_google_street_url);\n                    mainDiv1_div1_div1_a2.setAttribute(\"target\", \"_blank\");\n                    mainDiv1_div1_div1_a2.classList.add(\"estates-main-section1-article1-div2-div2-a\");\n                    mainDiv1_div1_div2_p1.classList.add(\"estates-main-section1-article1-div2-div2-span1-p\");\n                    mainDiv1_div1_div2_p2.classList.add(\"estates-main-section1-article1-div2-div2-span1-p2\");\n                    mainDiv1_div1_div2_p2.setAttribute(\"id\", `${element.elements[0].estate_id}_address`);\n                    mainDiv2_div1.classList.add(\"estates-main-section1-article1-div2-div1\");\n                    mainDiv2_div1.setAttribute(\"id\", `${element.estate_title}_img_div`);\n                    mainDiv2_div1_div1.classList.add(\"estates-main-section1-article1-div2-div1-img-backward\");\n                    mainDiv2_div1_div1.setAttribute(\"id\", `${element.estate_title}_div_backward`);\n                    mainDiv2_div1_div2.classList.add(\"estates-main-section1-article1-div2-div1-img-forward\");\n                    mainDiv2_div1_div2.setAttribute(\"id\", `${element.estate_title}_div_forward`);\n                    mainDiv2_div1_div3.classList.add(\"estates-main-section1-article1-div2-div1-img-footer\");\n                    mainDiv2_div1_div3.setAttribute(\"id\", `${element.estate_title}_div_footer`);\n                    // adding text content \n                    mainDiv1_h3.textContent = element.elements[0].estate_title;\n                    // formatting text \n                    const text = element.elements[0].estate_text;\n                    const sentences = text.split(/(?<=\\.)\\s+(?=[A-Z])/);\n                    mainDiv1_p.textContent = '';\n                    sentences.forEach((sentence, index)=>{\n                        const textNode = document.createTextNode(sentence);\n                        mainDiv1_p.appendChild(textNode);\n                        // Add a line break after every sentence except the last\n                        if (index < sentences.length - 1) {\n                            mainDiv1_p.appendChild(document.createElement(\"br\"));\n                            mainDiv1_p.appendChild(document.createElement(\"br\"));\n                        }\n                    });\n                    mainDiv1_div1_div1_a1.textContent = \"Google Maps Location\";\n                    mainDiv1_div1_div1_a2.textContent = \"Google Street Location\";\n                    mainDiv1_div1_div2_p1.textContent = \"Address:\";\n                    mainDiv1_div1_div2_p2.textContent = element.elements[0].estate_address;\n                    mainDiv2_div1_div1.textContent = \"<\";\n                    mainDiv2_div1_div2.textContent = \">\";\n                    // appending elements\n                    estates_main_section1.appendChild(article);\n                    article.append(mainDiv1, mainDiv2);\n                    mainDiv1.append(mainDiv1_h3, mainDiv1_p, mainDiv1_div1, mainDiv1_div2);\n                    mainDiv2.appendChild(mainDiv2_div1);\n                    mainDiv1_div1.appendChild(mainDiv1_div1_div1);\n                    mainDiv1_div2.appendChild(mainDiv1_div1_div2);\n                    mainDiv1_div1_div1.append(mainDiv1_div1_div1_a1, mainDiv1_div1_div1_a2);\n                    mainDiv1_div1_div2.append(mainDiv1_div1_div2_p1, mainDiv1_div1_div2_p2);\n                    mainDiv2.appendChild(mainDiv2_div1);\n                    mainDiv2_div1.append(mainDiv2_div1_div1, mainDiv2_div1_div2, mainDiv2_div1_div3);\n                    const images_object = {};\n                    let image_index = 1;\n                    // creating image elements & appending first image\n                    element.images.forEach((image)=>{\n                        const img = document.createElement(\"img\");\n                        img.classList.add(\"estates-main-section1-article1-div2-div1-img\");\n                        img.setAttribute(\"id\", `${element.estate_title}_img_${image_index}`);\n                        img.setAttribute(\"src\", (0, image.estate_image_production_url));\n                        if (!images_object[image.estate_category]) images_object[image.estate_category] = [];\n                        images_object[image.estate_category].push(img);\n                        image_index = image_index + 1;\n                    });\n                    this.estate_element_images = [\n                        ...this.estate_element_images,\n                        images_object\n                    ];\n                });\n                //MOBILE\n                state.estate_elements.forEach((element)=>{\n                    console.log(element);\n                    const div1 = document.createElement(\"div\");\n                    const div2 = document.createElement(\"div\");\n                    const div3 = document.createElement(\"div\");\n                    const div4 = document.createElement(\"div\");\n                    const div5 = document.createElement(\"div\");\n                    const h3 = document.createElement(\"h3\");\n                    const p1 = document.createElement(\"p\");\n                    const p2 = document.createElement(\"p\");\n                    const a1 = document.createElement(\"a\");\n                    const a2 = document.createElement(\"a\");\n                    const span = document.createElement(\"span\");\n                    div1.classList.add(\"estates-mobile-card-div\");\n                    h3.classList.add(\"estates-mobile-h3\");\n                    div2.classList.add(\"estates-mobile-image-wrapper\");\n                    div3.classList.add(\"estates-mobile-content\");\n                    p1.classList.add(\"estates-mobile-desc\");\n                    div4.classList.add(\"estates-mobile-address\");\n                    div5.classList.add(\"estates-mobile-links\");\n                    h3.textContent = element.elements[0].estate_title;\n                    p1.textContent = element.elements[0].estate_text;\n                    span.textContent = `Address:`;\n                    p2.textContent = element.elements[0].estate_address;\n                    a1.setAttribute(\"href\", element.elements[0].estate_google_maps_url);\n                    a1.textContent = `Google Maps`;\n                    a2.setAttribute(\"href\", element.elements[0].estate_google_street_url);\n                    a2.textContent = `Google Street`;\n                    estates_main_section1_mobile.appendChild(div1);\n                    div1.append(h3, div2, div3);\n                    div3.append(p1, div4, div5);\n                    div4.append(span, p2);\n                    div5.append(a1, a2);\n                    const images_object_mobile = {};\n                    let image_index_mobile = 1;\n                    // creating image elements & appending first image\n                    element.images.forEach((image)=>{\n                        const img = document.createElement(\"img\");\n                        img.classList.add(\"estates-mobile-image\");\n                        img.setAttribute(\"src\", (0, image.estate_image_production_url));\n                        if (!images_object_mobile[image.estate_category]) images_object_mobile[image.estate_category] = [];\n                        images_object_mobile[image.estate_category].push(img);\n                        image_index_mobile = image_index_mobile + 1;\n                    });\n                    this.estate_element_images_mobile = [\n                        ...this.estate_element_images_mobile,\n                        images_object_mobile\n                    ];\n                });\n                this.initial_elements_render = true;\n                this.initDesktopSlideshow();\n                this.initMobileSlideshow();\n            } else {\n                // caching parent containers \n                const main_p_article = document.getElementById(\"estates-main-article1\");\n                const main_p_section = document.getElementById(\"estates-main-section1\");\n                const p = document.createElement(\"p\");\n                const p2 = document.createElement(\"p\");\n                p.setAttribute(\"id\", \"estates-main-article1-p1\");\n                p.textContent = \"Currently no information about our estates, Please visit Later\";\n                p2.setAttribute(\"id\", \"estates-main-section1-p1\");\n                p2.textContent = \"Currently no information about our estates, Please visit Later\";\n                main_p_article.appendChild(p);\n                main_p_section.appendChild(p2);\n                //MOBILE\n                p_mobile.setAttribute(\"id\", \"estates-mobile-p\");\n                p_mobile.textContent = \"Currently no information about our estates, Please visit Later\";\n                p2_mobile.setAttribute(\"id\", \"#no_estates_p\");\n                p2_mobile.textContent = \"Currently no information about our estates, Please visit Later\";\n                main_p_article.appendChild(p2_mobile);\n                main_p_section.appendChild(p2_mobile);\n            }\n        }\n    };\n    initDesktopSlideshow = ()=>{\n        this.slideshowIntervals = this.slideshowIntervals || {};\n        this.current_image_index = this.current_image_index || {};\n        const articles = Array.from(document.getElementsByClassName(\"estates-main-section1-article1\"));\n        const fadeSwap = (imgDiv, sourceImg)=>{\n            const oldImg = imgDiv.querySelector(\".estates-main-section1-article1-div2-div1-img\");\n            const newImg = sourceImg.cloneNode(true);\n            newImg.classList.add(\"estates-main-section1-article1-div2-div1-img\");\n            const TRANS_MS = 1000;\n            if (oldImg) {\n                oldImg.classList.remove(\"show\");\n                setTimeout(()=>{\n                    if (oldImg.parentNode) oldImg.remove();\n                    imgDiv.prepend(newImg);\n                    requestAnimationFrame(()=>newImg.classList.add(\"show\"));\n                }, TRANS_MS);\n            } else {\n                imgDiv.prepend(newImg);\n                requestAnimationFrame(()=>newImg.classList.add(\"show\"));\n            }\n        };\n        articles.forEach((article)=>{\n            const imgDiv = document.getElementById(`${article.id}_img_div`);\n            if (!imgDiv) return;\n            const imgCatObj = this.estate_element_images.find((o)=>Object.keys(o)[0] === article.id);\n            if (!imgCatObj) return;\n            const images = Object.values(imgCatObj)[0];\n            if (!images.length) return;\n            let index = 0;\n            fadeSwap(imgDiv, images[index]);\n            this.slideshowIntervals[article.id] = setInterval(()=>{\n                index = (index + 1) % images.length;\n                fadeSwap(imgDiv, images[index]);\n                this.current_image_index[article.id] = index;\n            }, 10000);\n            const back = document.getElementById(`${article.id}_div_backward`);\n            const forward = document.getElementById(`${article.id}_div_forward`);\n            const manual = (dir)=>{\n                clearInterval(this.slideshowIntervals[article.id]);\n                index = dir === \"back\" ? (index - 1 + images.length) % images.length : (index + 1) % images.length;\n                fadeSwap(imgDiv, images[index]);\n                this.current_image_index[article.id] = index;\n            };\n            back && back.addEventListener(\"click\", ()=>manual(\"back\"));\n            forward && forward.addEventListener(\"click\", ()=>manual(\"forward\"));\n        });\n    };\n    initMobileSlideshow = ()=>{\n        if (!Array.isArray(this.estate_element_images_mobile)) return;\n        this.mobileIntervals = this.mobileIntervals || {};\n        const wrappers = document.querySelectorAll(\".estates-mobile-image-wrapper\");\n        wrappers.forEach((wrapper, i)=>{\n            const imgObj = this.estate_element_images_mobile[i];\n            if (!imgObj) return;\n            const images = Object.values(imgObj)[0];\n            if (!images || images.length === 0) return;\n            wrapper.replaceChildren();\n            images.forEach((img, idx)=>{\n                const clone = img.cloneNode(true);\n                clone.classList.add(\"estates-mobile-image\");\n                if (idx === 0) clone.classList.add(\"show\");\n                wrapper.appendChild(clone);\n            });\n            let index = 0;\n            this.mobileIntervals[i] = setInterval(()=>{\n                const imgs = wrapper.querySelectorAll(\".estates-mobile-image\");\n                imgs[index].classList.remove(\"show\");\n                index = (index + 1) % imgs.length;\n                imgs[index].classList.add(\"show\");\n            }, 10000);\n        });\n    };\n}\n\n});\n\n\n\n//# sourceMappingURL=controller.67ef8a33.js.map\n","import {Estates_model} from '../model/model.js';\nimport {Estates_view} from '../view/view.js';\n\nexport class Estates_controller {\n\tconstructor(){\n\n\t\tthis.model = new Estates_model();\n\t\tthis.view = new Estates_view();\n\n\t\tthis.model.registerListener((state)=>{\n\t\t\tthis.view.render_page_elements(state)\n\t\t});\n\n\t\tthis.model.fetch_estate_elements();\n\t\tthis.view.open_and_close_navbar();\n\n\t}\n}","\nexport class Estates_model {\n\n\tconstructor(){\n\n\t\tthis.state = {\n\t\t\tloading: true,\n\t\t\testate_elements:[],\n\t\t\testate_elements_empty: null,\n\t\t\testate_main_text:{\n\t\t\t\tid: null,\n\t\t\t\ttext: ''\n\t\t\t}\n\t\t}\n\n\t\tthis.listeners = [];\n\t}\n\n\tsetState = (newState) =>{ \n    \tthis.state = {...this.state,...newState};\n    \tthis.notifyListeners();\n    \tconsole.log(this.state)\n    \treturn this.state\n    }\n\n    registerListener = (listener) => {\n\n    \tthis.listeners = [...this.listeners, listener]\n\n    \tlistener(this.state)\n    }\n\n    notifyListeners = () => {\n    \tthis.listeners.forEach((listener)=>{\n    \t\tlistener(this.state)\n\t\t})\n    }\n\n    fetch_estate_elements = () => {\n\n\n    \tif(process.env.NODE_ENV === \"production\"){\n\t\tfetch(\"https://www.abbeyroad.org.uk/api/estates-page/fetch_page_elements\")\n    \t\t.then((res)=>{\n    \t\t\treturn res.json()\n    \t\t})\n    \t\t.then((res)=>{\n\n    \t\t\t// successful fetch from estate_page tables  \n    \t\t\tif(res.success &&\n    \t\t\t\tres.estate_page &&\n\t    \t\t\ttypeof res.estate_page === 'object' &&\n\t    \t\t\tArray.isArray(res.estate_page.estate_page_images) &&\n\t    \t\t\tArray.isArray(res.estate_page.estate_page_elements)){\n\n\n\t\t\t\t\tconst estatePage = res.estate_page;\n\n\t\t\t\t\t// 1️⃣ Group estate_page_elements by estate_title\n\t\t\t\t\tconst elementsMap = {};\n\t\t\t\t\tlet mainTextObj = null;\n\n\t\t\t\t\testatePage.estate_page_elements.forEach(element => {\n\t\t\t\t\t  // Capture main text object\n\t\t\t\t\t  if (element.estate_id === \"estates-main-article1-p1\") {\n\t\t\t\t\t    mainTextObj = {\n\t\t\t\t\t      id: element.estate_id,\n\t\t\t\t\t      estate_main_text: element.estate_main_text\n\t\t\t\t\t    };\n\t\t\t\t\t  }\n\n\t\t\t\t\t  // Group into a map first\n\t\t\t\t\t  if (element.estate_title) {\n\t\t\t\t\t    if (!elementsMap[element.estate_title]) {\n\t\t\t\t\t      elementsMap[element.estate_title] = [];\n\t\t\t\t\t    }\n\t\t\t\t\t    elementsMap[element.estate_title].push(element);\n\t\t\t\t\t  }\n\t\t\t\t\t});\n\n\t\t\t\t\t// Convert to array of groups\n\t\t\t\t\tlet groupedElements = Object.entries(elementsMap).map(([title, items]) => ({\n\t\t\t\t\t  estate_title: title,\n\t\t\t\t\t  elements: items\n\t\t\t\t\t}));\n\n\t\t\t\t\t// 2️⃣ Group estate_page_images by estate_category\n\t\t\t\t\tconst imagesMap = {};\n\t\t\t\t\testatePage.estate_page_images.forEach(image => {\n\t\t\t\t\t  const category = image.estate_category;\n\t\t\t\t\t  if (category) {\n\t\t\t\t\t    if (!imagesMap[category]) {\n\t\t\t\t\t      imagesMap[category] = [];\n\t\t\t\t\t    }\n\t\t\t\t\t    imagesMap[category].push(image);\n\t\t\t\t\t  }\n\t\t\t\t\t});\n\n\t\t\t\t\t// 3️⃣ Merge images into groupedElements if estate_title matches estate_category\n\t\t\t\t\tgroupedElements = groupedElements.map(group => {\n\t\t\t\t\t  const images = imagesMap[group.estate_title] || [];\n\t\t\t\t\t  return {\n\t\t\t\t\t    ...group,\n\t\t\t\t\t    images // new property containing matching images\n\t\t\t\t\t  };\n\t\t\t\t\t});\n\n\t\t\t\t\tconsole.log(\"succesfful fetch\")\n\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\testate_elements:groupedElements,\n\t\t\t\t\t\testate_elements_empty: null,\n\t\t\t\t\t\testate_main_text:{\n\t\t\t\t\t\t\tid: mainTextObj.id,\n\t\t\t\t\t\t\ttext: mainTextObj.estate_main_text\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n    \t\t\t}\n    \t\t\t// unsuccessful fetch from estate_page tables OR empty tables \n    \t\t\telse{\n\n    \t\t\t\t// successful fetch but empty tables\n    \t\t\t\tif(res.success && res.estate_page === null){\n    \t\t\t\t\tthis.setState({\n\t\t\t\t    \t\tloading: false,\n\t\t\t\t\t\t\testate_elements:[],\n\t\t\t\t\t\t\testate_elements_empty: true,\n\t\t\t\t\t\t\testate_main_text:{\n\t\t\t\t\t\t\t\t\tid: null,\n\t\t\t\t\t\t\t\t\ttext: ''\n\t\t\t\t\t\t\t}\n\t\t\t    \t\t})\n    \t\t\t\t}\n    \t\t\t\t// unsuccessful fetch from estate_page\n    \t\t\t\telse{\n\n    \t\t\t\t\tthis.setState({\n\t\t\t\t    \t\tloading: false,\n\t\t\t\t\t\t\testate_elements:[],\n\t\t\t\t\t\t\testate_elements_empty: null,\n\t\t\t\t\t\t\testate_main_text:{\n\t\t\t\t\t\t\t\t\tid: null,\n\t\t\t\t\t\t\t\t\ttext: ''\n\t\t\t\t\t\t\t}\n\t\t\t    \t\t})\n    \t\t\t\t}\n    \t\t\t}\n\n    \t\t})\n    \t\t.catch((err)=>{\n    \t\t\tconsole.log(err)\n    \t\t})\n    \t}\n    \telse{\n\n    \t\tfetch(\"http://localhost:3001/api/estates-page/fetch_page_elements\")\n    \t\t.then((res)=>{\n    \t\t\treturn res.json()\n    \t\t})\n    \t\t.then((res)=>{\n\n    \t\t\t// successful fetch from estate_page tables  \n    \t\t\tif(res.success &&\n    \t\t\t\tres.estate_page &&\n\t    \t\t\ttypeof res.estate_page === 'object' &&\n\t    \t\t\tArray.isArray(res.estate_page.estate_page_images) &&\n\t    \t\t\tArray.isArray(res.estate_page.estate_page_elements)){\n\n\n\t\t\t\t\tconst estatePage = res.estate_page;\n\n\t\t\t\t\tconsole.log(estatePage)\n\n\t\t\t\t\t// 1️⃣ Group estate_page_elements by estate_title\n\t\t\t\t\tconst elementsMap = {};\n\t\t\t\t\tlet mainTextObj = null;\n\n\t\t\t\t\testatePage.estate_page_elements.forEach(element => {\n\t\t\t\t\t  // Capture main text object\n\t\t\t\t\t  if (element.estate_id === \"estates-main-article1-p1\") {\n\t\t\t\t\t    mainTextObj = {\n\t\t\t\t\t      id: element.estate_id,\n\t\t\t\t\t      estate_main_text: element.estate_main_text\n\t\t\t\t\t    };\n\t\t\t\t\t  }\n\t\t\t\t\t  console.log(mainTextObj)\n\n\t\t\t\t\t  // Group into a map first\n\t\t\t\t\t  if (element.estate_title) {\n\t\t\t\t\t    if (!elementsMap[element.estate_title]) {\n\t\t\t\t\t      elementsMap[element.estate_title] = [];\n\t\t\t\t\t    }\n\t\t\t\t\t    elementsMap[element.estate_title].push(element);\n\t\t\t\t\t  }\n\t\t\t\t\t});\n\n\t\t\t\t\t// Convert to array of groups\n\t\t\t\t\tlet groupedElements = Object.entries(elementsMap).map(([title, items]) => ({\n\t\t\t\t\t  estate_title: title,\n\t\t\t\t\t  elements: items\n\t\t\t\t\t}));\n\n\t\t\t\t\t// 2️⃣ Group estate_page_images by estate_category\n\t\t\t\t\tconst imagesMap = {};\n\t\t\t\t\testatePage.estate_page_images.forEach(image => {\n\t\t\t\t\t  const category = image.estate_category;\n\t\t\t\t\t  if (category) {\n\t\t\t\t\t    if (!imagesMap[category]) {\n\t\t\t\t\t      imagesMap[category] = [];\n\t\t\t\t\t    }\n\t\t\t\t\t    imagesMap[category].push(image);\n\t\t\t\t\t  }\n\t\t\t\t\t});\n\n\t\t\t\t\t// 3️⃣ Merge images into groupedElements if estate_title matches estate_category\n\t\t\t\t\tgroupedElements = groupedElements.map(group => {\n\t\t\t\t\t  const images = imagesMap[group.estate_title] || [];\n\t\t\t\t\t  return {\n\t\t\t\t\t    ...group,\n\t\t\t\t\t    images // new property containing matching images\n\t\t\t\t\t  };\n\t\t\t\t\t});\n\n\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\testate_elements:groupedElements,\n\t\t\t\t\t\testate_elements_empty: null,\n\t\t\t\t\t\testate_main_text:{\n\t\t\t\t\t\t\tid: mainTextObj.id,\n\t\t\t\t\t\t\ttext: mainTextObj.estate_main_text\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n    \t\t\t}\n    \t\t\t// unsuccessful fetch from estate_page tables OR empty tables \n    \t\t\telse{\n\n    \t\t\t\t// successful fetch but empty tables\n    \t\t\t\tif(res.success && res.estate_page === null){\n    \t\t\t\t\tthis.setState({\n\t\t\t\t    \t\tloading: false,\n\t\t\t\t\t\t\testate_elements:[],\n\t\t\t\t\t\t\testate_elements_empty: true,\n\t\t\t\t\t\t\testate_main_text:{\n\t\t\t\t\t\t\t\t\tid: null,\n\t\t\t\t\t\t\t\t\ttext: ''\n\t\t\t\t\t\t\t}\n\t\t\t    \t\t})\n    \t\t\t\t}\n    \t\t\t\t// unsuccessful fetch from estate_page\n    \t\t\t\telse{\n\n    \t\t\t\t\tthis.setState({\n\t\t\t\t    \t\tloading: false,\n\t\t\t\t\t\t\testate_elements:[],\n\t\t\t\t\t\t\testate_elements_empty: null,\n\t\t\t\t\t\t\testate_main_text:{\n\t\t\t\t\t\t\t\t\tid: null,\n\t\t\t\t\t\t\t\t\ttext: ''\n\t\t\t\t\t\t\t}\n\t\t\t    \t\t})\n    \t\t\t\t}\n    \t\t\t}\n\n    \t\t})\n    \t\t.catch((err)=>{\n    \t\t\tconsole.log(err)\n    \t\t})\n    \t}\n    }\n}","export class Estates_view{\n\n\tconstructor(){\n\n\t\t// stopping multiple re renders after initial render of elements\n\t\tthis.initial_elements_render = false;\n\n\t\tthis.estate_element_images = [];\n\t\tthis.estate_element_images_mobile=[];\n\n\t\tthis.current_image_index = {}\n\n\t\tthis.slideshowIntervals = {};\n\t}\n\n\topen_and_close_navbar = () => {\n\n\t\tconst navbar_btn_open = \n\t\tdocument.getElementById(\"mobile-menu-btn\")\n\n\t\tconst navbar_btn_close = \n\t\tdocument.getElementById(\"mobile-menu-close\")\n\n\t\tconst menu = document.getElementById(\"mobile-menu\");\n\n\t\tnavbar_btn_open.addEventListener(\"click\", (event)=>{\n\n\t\t\tmenu.style.display = 'block';\n\t\t})\n\n\t\tnavbar_btn_close.addEventListener(\"click\", (event)=>{\n\t\t\tmenu.style.display = 'none';\n\t\t})\n\t}\n\n\trender_page_elements = (state) => {\n\n\t\t// caching parent elements of page elements\n\t\tconst estates_main_section1 = \n\t\tdocument.getElementById(\"estates-main-section1\");\n\t\tconst estates_main_text_parent_div = \n\t\tdocument.getElementById(\"estates-main-article1\");\n\t\t// MOBILE \n\t\tconst estates_main_section1_mobile = \n\t\tdocument.getElementById(\"estates-mobile-card\");\n\t\tconst estates_main_text_parent_div_mobile = \n\t\tdocument.getElementById(\"estates-mobile-about-div1\");\n\n\t\t// if elements are loading \n\t\tif(state.loading){\n\n\t\t\t// estates main text loading \n\t\t\tconst estates_main_text_loading = \n\t\t\tdocument.createElement(\"div\");\n\t\t\testates_main_text_loading\n\t\t\t.setAttribute(\"id\", \"estates-main-article1-p1-loading\");\n\t\t\testates_main_text_loading.classList.add(\"loading\");\n\t\t\testates_main_text_parent_div.appendChild(estates_main_text_loading)\n\t\t\t//estates main article loading\n\t\t\tconst estates_main_section1_loading = \n\t\t\tdocument.createElement(\"div\");\n\t\t\testates_main_section1_loading\n\t\t\t.setAttribute(\"id\", \"estates-main-section1-loading\");\n\t\t\testates_main_section1_loading.classList.add(\"loading\");\n\t\t\testates_main_section1.appendChild(estates_main_section1_loading)\n\n\t\t\t//MOBILE\n\t\t\tconst previous_text = document.getElementById(\"estates-mobile-p\")\n\n\t\t\tif(previous_text){\n\t\t\t\testates_main_text_parent_div_mobile.removeChild(\n\t\t\t\t\tprevious_text)\n\t\t\t}\n\n\t\t\tconst estates_main_text_loading_mobile = \n\t\t\tdocument.createElement(\"div\");\n\n\t\t\testates_main_text_loading_mobile\n\t\t\t.setAttribute(\"id\", \"estates_main_text_loading_mobile\");\n\n\t\t\testates_main_text_loading_mobile.classList.add(\"loading\");\n\n\t\t\testates_main_text_parent_div_mobile.appendChild(estates_main_text_loading_mobile)\n\n\t\t\t//estates main article loading\n\t\t\tconsole.log(estates_main_section1_mobile)\n\t\t\testates_main_section1_mobile.replaceChildren();\n\n\t\t\tconst estates_main_section1_loading_mobile = \n\t\t\tdocument.createElement(\"div\");\n\n\t\t\testates_main_section1_loading_mobile\n\t\t\t.setAttribute(\"id\", \"estates_main_section1_loading_mobile\");\n\n\t\t\testates_main_section1_loading_mobile.classList.add(\"loading\");\n\t\t\testates_main_section1_mobile.appendChild(estates_main_section1_loading_mobile)\n\n\t\t}\n\t\t// if elements have finished loading \n\t\telse{\n\n\t\t    // remove loading elements\n\t\t    const estates_main_text_loading = \n\t\t  \tdocument.getElementById(\"estates-main-article1-p1-loading\");\n\t\t  \tconst estates_main_section1_loading = \n\t\t  \tdocument.getElementById(\"estates-main-section1-loading\");\n\t\t  \testates_main_text_loading.remove();\n\t\t  \testates_main_section1_loading.remove();\n\t\t  \t//MOBILE\n\t\t  \tconst estates_main_text_loading_mobile = \n\t\t  \tdocument.getElementById(\"estates_main_text_loading_mobile\");\n\t\t  \tconst estates_main_section1_loading_mobile = \n\t\t  \tdocument.getElementById(\"estates_main_section1_loading_mobile\");\n\t\t  \testates_main_text_loading_mobile.remove();\n\t\t  \testates_main_section1_loading_mobile.remove();\n\n\n\t\t\t// if estate_elements & estate_main_text exist\n\t\t\tif (\n\t\t\t  Array.isArray(state.estate_elements) &&\n\t\t\t  state.estate_elements.length > 0 &&\n\t\t\t  state.estate_elements.every(el =>\n\t\t\t    typeof el.estate_title === \"string\" &&\n\t\t\t    Array.isArray(el.elements) &&\n\t\t\t    Array.isArray(el.images)\n\t\t\t  ) &&\n\t\t\t  state.estate_main_text &&\n\t\t\t  typeof state.estate_main_text === \"object\" &&\n\t\t\t  typeof state.estate_main_text.id === \"string\" &&\n\t\t\t  typeof state.estate_main_text.text === \"string\" &&\n\t\t\t  this.initial_elements_render === false\n\t\t\t) {\n\n\t\t\t  // create estates main text\n\t\t\t  const main_text_p = document.createElement(\"p\");\n\t\t\t  main_text_p.setAttribute(\"id\", state.estate_main_text.id);\n\t\t\t  // formatting text \n\t\t\t  const text = state.estate_main_text.text;\n\t\t\t  const sentences = text.split(/(?<=\\.)\\s+(?=[A-Z])/);\n\t\t\t  main_text_p.textContent = '';\n\t\t\t  sentences.forEach((sentence, index) => {\n\t\t\t\t  const textNode = document.createTextNode(sentence);\n\t\t\t\t  main_text_p.appendChild(textNode);\n\t\t\t\t  \n\t\t\t\t  // Add a line break after every sentence except the last\n\t\t\t\t  if (index < sentences.length - 1) {\n\t\t\t\t    main_text_p.appendChild(document.createElement(\"br\"));\n\t\t\t\t    main_text_p.appendChild(document.createElement(\"br\"));\n\t\t\t\t  }\n\t\t\t   });\n\t\t\t  estates_main_text_parent_div.appendChild(main_text_p);\n\t\t\t  // MOBILE\n\t\t\t  // create estates main text\n\t\t\t  const main_text_p_mobile = document.createElement(\"p\");\n\t\t\t  main_text_p_mobile.setAttribute(\"id\", \"estates-mobile-p\");\n\t\t\t  main_text_p_mobile.textContent = state.estate_main_text.text;\n\t\t\t  estates_main_text_parent_div_mobile.appendChild(main_text_p_mobile);\n\n\t\t\t  // create article divs\n\t\t\t\tstate.estate_elements.forEach((element)=>{\n\n\t\t\t\t\tconst article = document.createElement(\"article\");\n\n\t\t\t\t\tconst mainDiv1 = document.createElement(\"div\");\n\t\t\t\t\tconst mainDiv2 = document.createElement(\"div\");\n\n\t\t\t\t\tconst mainDiv1_h3 = document.createElement(\"h3\");\n\t\t\t\t\tconst mainDiv1_p = document.createElement(\"p\");\n\t\t\t\t\tconst mainDiv1_div1 = document.createElement(\"div\");\n\t\t\t\t\tconst mainDiv1_div2 = document.createElement(\"div\");\n\n\t\t\t\t\tconst mainDiv1_div1_div1 = document.createElement(\"div\");\n\t\t\t\t\tconst mainDiv1_div1_div2 = document.createElement(\"div\");\n\n\t\t\t\t\tconst mainDiv1_div1_div1_a1 = document.createElement(\"a\");\n\t\t\t\t\tconst mainDiv1_div1_div1_a2 = document.createElement(\"a\");\n\t\t\t\t\tconst mainDiv1_div1_div2_p1 = document.createElement(\"p\");\n\t\t\t\t\tconst mainDiv1_div1_div2_p2 = document.createElement(\"p\");\n\n\t\t\t\t\tconst mainDiv2_div1 = document.createElement(\"div\");\n\n\t\t\t\t\tconst mainDiv2_div1_div1 = document.createElement(\"div\");\n\t\t\t\t\tconst mainDiv2_div1_div2 = document.createElement(\"div\");\n\t\t\t\t\tconst mainDiv2_div1_div3 = document.createElement(\"div\");\n\n\t\t\t\t\t// adding relevant attributes \n\t\t\t\t\tarticle.setAttribute(\"id\", element.estate_title)\n\t\t\t\t\tarticle.classList.add(\"estates-main-section1-article1\");\n\n\t\t\t\t\tmainDiv1.classList.add(\"estates-main-section1-article1-div1\");\n\t\t\t\t\tmainDiv2.classList.add(\"estates-main-section1-article1-div2\");\n\n\t\t\t\t\tmainDiv1_h3.setAttribute(\"id\", `${element.elements[0].estate_id}_title`);\n\t\t\t\t\tmainDiv1_h3.classList.add(\"estates-main-section1-article1-div-h3\");\n\t\t\t\t\tmainDiv1_p.setAttribute(\"id\",`${element.elements[0].estate_id}_desc`);\n\t\t\t\t\tmainDiv1_p.classList.add(\"estates-main-section1-article1-div-p\");\n\t\t\t\t\tmainDiv1_div1.classList.add(\"estates-main-section1-article1-div-div1\");\n\t\t\t\t\tmainDiv1_div2.classList.add(\"estates-main-section1-article1-div-div1\");\n\n\t\t\t\t\tmainDiv1_div1_div1.classList.add(\"estates-main-section1-article1-div-div1\");\n\t\t\t\t\tmainDiv1_div1_div2.classList.add(\"estates-main-section1-article1-div2-div2-div1\");\n\n\t\t\t\t\tmainDiv1_div1_div1_a1.setAttribute(\"id\", `${element.elements[0].estate_id}_google_maps`)\n\t\t\t\t\tmainDiv1_div1_div1_a1.setAttribute(\"href\", element.elements[0].estate_google_maps_url)\n\t\t\t\t\tmainDiv1_div1_div1_a1.setAttribute(\"target\", \"_blank\")\n\t\t\t\t\tmainDiv1_div1_div1_a1.classList.add(\"estates-main-section1-article1-div2-div2-a\");\n\t\t\t\t\tmainDiv1_div1_div1_a2.setAttribute(\"id\", `${element.elements[0].estate_id}_google_street`)\n\t\t\t\t\tmainDiv1_div1_div1_a2.setAttribute(\"href\", element.elements[0].estate_google_street_url)\n\t\t\t\t\tmainDiv1_div1_div1_a2.setAttribute(\"target\", \"_blank\")\n\t\t\t\t\tmainDiv1_div1_div1_a2.classList.add(\"estates-main-section1-article1-div2-div2-a\");\n\t\t\t\t\tmainDiv1_div1_div2_p1.classList.add(\"estates-main-section1-article1-div2-div2-span1-p\");\n\t\t\t\t\tmainDiv1_div1_div2_p2.classList.add(\"estates-main-section1-article1-div2-div2-span1-p2\");\n\t\t\t\t\tmainDiv1_div1_div2_p2.setAttribute(\"id\", `${element.elements[0].estate_id}_address`);\n\n\t\t\t\t\tmainDiv2_div1.classList.add(\"estates-main-section1-article1-div2-div1\");\n\t\t\t\t\tmainDiv2_div1.setAttribute(\"id\", `${element.estate_title}_img_div`)\n\n\t\t\t\t\tmainDiv2_div1_div1.classList.add(\"estates-main-section1-article1-div2-div1-img-backward\");\n\t\t\t\t\tmainDiv2_div1_div1.setAttribute(\"id\", `${element.estate_title}_div_backward`)\n\t\t\t\t\tmainDiv2_div1_div2.classList.add(\"estates-main-section1-article1-div2-div1-img-forward\");\n\t\t\t\t\tmainDiv2_div1_div2.setAttribute(\"id\", `${element.estate_title}_div_forward`)\n\t\t\t\t\tmainDiv2_div1_div3.classList.add(\"estates-main-section1-article1-div2-div1-img-footer\");\n\t\t\t\t\tmainDiv2_div1_div3.setAttribute(\"id\", `${element.estate_title}_div_footer`)\n\n\t\t\t\t\t// adding text content \n\t\t\t\t\tmainDiv1_h3.textContent = element.elements[0].estate_title;\n\n\t\t\t\t\t\t// formatting text \n\t\t\t\t\t  const text = element.elements[0].estate_text;\n\t\t\t\t\t  const sentences = text.split(/(?<=\\.)\\s+(?=[A-Z])/);\n\t\t\t\t\t  mainDiv1_p.textContent = '';\n\t\t\t\t\t  sentences.forEach((sentence, index) => {\n\t\t\t\t\t\t  const textNode = document.createTextNode(sentence);\n\t\t\t\t\t\t  mainDiv1_p.appendChild(textNode);\n\t\t\t\t\t\t  \n\t\t\t\t\t\t  // Add a line break after every sentence except the last\n\t\t\t\t\t\t  if (index < sentences.length - 1) {\n\t\t\t\t\t\t    mainDiv1_p.appendChild(document.createElement(\"br\"));\n\t\t\t\t\t\t    mainDiv1_p.appendChild(document.createElement(\"br\"));\n\t\t\t\t\t\t  }\n\t\t\t\t\t   });\n\n\t\t\t\t\tmainDiv1_div1_div1_a1.textContent = \"Google Maps Location\";\n\t\t\t\t\tmainDiv1_div1_div1_a2.textContent = \"Google Street Location\";\n\t\t\t\t\tmainDiv1_div1_div2_p1.textContent = \"Address:\";\n\t\t\t\t\tmainDiv1_div1_div2_p2.textContent = element.elements[0].estate_address;\n\t\t\t\t\tmainDiv2_div1_div1.textContent = \"<\";\n\t\t\t\t\tmainDiv2_div1_div2.textContent = \">\";\n\n\t\t\t\t\t// appending elements\n\t\t\t\t\testates_main_section1.appendChild(article);\n\t\t\t\t\tarticle.append(mainDiv1,mainDiv2);\n\t\t\t\t\tmainDiv1.append(mainDiv1_h3,mainDiv1_p,mainDiv1_div1,mainDiv1_div2);\n\t\t\t\t\tmainDiv2.appendChild(mainDiv2_div1);\n\t\t\t\t\tmainDiv1_div1.appendChild(mainDiv1_div1_div1);\n\t\t\t\t\tmainDiv1_div2.appendChild(mainDiv1_div1_div2);\n\t\t\t\t\tmainDiv1_div1_div1.append(mainDiv1_div1_div1_a1,mainDiv1_div1_div1_a2)\n\t\t\t\t\tmainDiv1_div1_div2.append(mainDiv1_div1_div2_p1,mainDiv1_div1_div2_p2)\n\t\t\t\t\tmainDiv2.appendChild(mainDiv2_div1);\n\t\t\t\t\tmainDiv2_div1.append(mainDiv2_div1_div1,mainDiv2_div1_div2,mainDiv2_div1_div3);\n\n\t\t\t\t\tconst images_object = {};\n\n\t\t\t\t\tlet image_index = 1;\n\n\t\t\t\t\t// creating image elements & appending first image\n\t\t\t\t\telement.images.forEach((image)=>{\n\n\t\t\t\t\t\tconst img = document.createElement(\"img\");\n\t\t\t\t\t\timg.classList.add(\"estates-main-section1-article1-div2-div1-img\");\n\t\t\t\t\t\timg.setAttribute(\"id\", `${element.estate_title}_img_${image_index}`)\n\t\t\t\t\t\timg.setAttribute(\"src\", process.env.NODE_ENV === \"production\" ? \n\t\t\t\t\t\t\timage.estate_image_production_url: image.estate_image_development_url \n\t\t\t\t\t\t)\n\n\t\t\t\t\t    if (!images_object[image.estate_category]) {\n\t\t\t\t\t      images_object[image.estate_category] = [];\n\t\t\t\t\t    }\n\n\t\t\t\t\t\timages_object[image.estate_category].push(img)\n\n\t\t\t\t\t\timage_index = image_index +1;\n\n\t\t\n\t\t\t\t\t\n\t\t\t\t\t})\n\n\t\t\t\t\tthis.estate_element_images = [...this.estate_element_images,images_object]\n\t\t\t\t})\n\n\t\t\t\t//MOBILE\n\t\t\t\tstate.estate_elements.forEach((element)=>{\n\n\t\t\t\t\tconsole.log(element)\n\n\t\t\t\t\tconst div1 = document.createElement(\"div\");\n\t\t\t\t\tconst div2 = document.createElement(\"div\");\n\t\t\t\t\tconst div3 = document.createElement(\"div\");\n\t\t\t\t\tconst div4 = document.createElement(\"div\");\n\t\t\t\t\tconst div5 = document.createElement(\"div\");\n\n\t\t\t\t\tconst h3 = document.createElement(\"h3\");\n\t\t\t\t\tconst p1 = document.createElement(\"p\");\n\t\t\t\t\tconst p2 = document.createElement(\"p\");\n\t\t\t\t\tconst a1 = document.createElement(\"a\");\n\t\t\t\t\tconst a2 = document.createElement(\"a\");\n\t\t\t\t\tconst span = document.createElement(\"span\");\n\n\t\t\t\t\tdiv1.classList.add(\"estates-mobile-card-div\");\n\t\t\t\t\th3.classList.add(\"estates-mobile-h3\");\n\t\t\t\t\tdiv2.classList.add(\"estates-mobile-image-wrapper\");\n\t\t\t\t\t\n\t\t\t\t\tdiv3.classList.add(\"estates-mobile-content\");\n\t\t\t\t\tp1.classList.add(\"estates-mobile-desc\");\n\t\t\t\t\tdiv4.classList.add(\"estates-mobile-address\");\n\t\t\t\t\tdiv5.classList.add(\"estates-mobile-links\");\n\n\t\t\t\t\th3.textContent = element.elements[0].estate_title;\n\t\t\t\t\tp1.textContent = element.elements[0].estate_text;\n\t\t\t\t\tspan.textContent = `Address:`\n\t\t\t\t\tp2.textContent = element.elements[0].estate_address;\n\t\t\t\t\ta1.setAttribute(\"href\",element.elements[0].estate_google_maps_url);\n\t\t\t\t\ta1.textContent = `Google Maps`\n\t\t\t\t\ta2.setAttribute(\"href\",element.elements[0].estate_google_street_url); \n\t\t\t\t\ta2.textContent = `Google Street`\n\n\n\t\t\t\t\testates_main_section1_mobile.appendChild(div1);\n\t\t\t\t\tdiv1.append(h3,div2,div3);\n\t\t\t\t\tdiv3.append(p1,div4,div5)\n\t\t\t\t\tdiv4.append(span,p2)\n\t\t\t\t\tdiv5.append(a1,a2)\n\n\t\t\t\t\tconst images_object_mobile = {};\n\n\t\t\t\t\tlet image_index_mobile = 1;\n\n\t\t\t\t\t// creating image elements & appending first image\n\t\t\t\t\telement.images.forEach((image)=>{\n\n\t\t\t\t\t\tconst img = document.createElement(\"img\");\n\t\t\t\t\t\timg.classList.add(\"estates-mobile-image\");\n\t\t\t\t\t\timg.setAttribute(\"src\", process.env.NODE_ENV === \"production\" ? \n\t\t\t\t\t\t\timage.estate_image_production_url: image.estate_image_development_url \n\t\t\t\t\t\t)\n\n\t\t\t\t\t    if (!images_object_mobile[image.estate_category]) {\n\t\t\t\t\t      images_object_mobile[image.estate_category] = [];\n\t\t\t\t\t    }\n\n\t\t\t\t\t\timages_object_mobile[image.estate_category].push(img)\n\n\t\t\t\t\t\timage_index_mobile = image_index_mobile +1;\n\n\t\t\t\t\t})\n\n\t\t\t\t\tthis.estate_element_images_mobile = [...this.estate_element_images_mobile,images_object_mobile]\n\t\t\t\t})\n\n\t\t\t\tthis.initial_elements_render = true;\n\t\t\t\tthis.initDesktopSlideshow();\n\t\t\t\tthis.initMobileSlideshow();\n\n\n\t\t\t} \n\t\t\t// if estate_elements & estate_main_text DOESNT exist\n\t\t\telse {\n\n\t\t\t\t// caching parent containers \n\t\t\t\tconst main_p_article = document.getElementById(\"estates-main-article1\");\n\t\t\t\tconst main_p_section = document.getElementById(\"estates-main-section1\");\n\t\t\t\tconst p = document.createElement(\"p\");\n\t\t\t\tconst p2 = document.createElement(\"p\");\n\n\t\t\t\tp.setAttribute(\"id\", \"estates-main-article1-p1\");\n\t\t\t\tp.textContent = \"Currently no information about our estates, Please visit Later\";\n\t\t\t\tp2.setAttribute(\"id\", \"estates-main-section1-p1\");\n\t\t\t\tp2.textContent = \"Currently no information about our estates, Please visit Later\";\n\n\t\t\t\tmain_p_article.appendChild(p);\n\t\t\t\tmain_p_section.appendChild(p2);\n\n\t\t\t\t//MOBILE\n\t\t\t\tp_mobile.setAttribute(\"id\", \"estates-mobile-p\");\n\t\t\t\tp_mobile.textContent = \"Currently no information about our estates, Please visit Later\";\n\t\t\t\tp2_mobile.setAttribute(\"id\", \"#no_estates_p\");\n\t\t\t\tp2_mobile.textContent = \"Currently no information about our estates, Please visit Later\";\n\n\t\t\t\tmain_p_article.appendChild(p2_mobile);\n\t\t\t\tmain_p_section.appendChild(p2_mobile);\n\n\t\t\t}\n\n\t\t}\n\t}\n\n\tinitDesktopSlideshow = () => {\n\t  this.slideshowIntervals = this.slideshowIntervals || {};\n\t  this.current_image_index = this.current_image_index || {};\n\n\t  const articles = Array.from(\n\t    document.getElementsByClassName(\"estates-main-section1-article1\")\n\t  );\n\n\t  const fadeSwap = (imgDiv, sourceImg) => {\n\t    const oldImg = imgDiv.querySelector(\n\t      \".estates-main-section1-article1-div2-div1-img\"\n\t    );\n\n\t    const newImg = sourceImg.cloneNode(true);\n\t    newImg.classList.add(\"estates-main-section1-article1-div2-div1-img\");\n\n\t    const TRANS_MS = 1000;\n\n\t    if (oldImg) {\n\t      oldImg.classList.remove(\"show\");\n\n\t      setTimeout(() => {\n\t        if (oldImg.parentNode) oldImg.remove();\n\t        imgDiv.prepend(newImg);\n\t        requestAnimationFrame(() => newImg.classList.add(\"show\"));\n\t      }, TRANS_MS);\n\t    } else {\n\t      imgDiv.prepend(newImg);\n\t      requestAnimationFrame(() => newImg.classList.add(\"show\"));\n\t    }\n\t  };\n\n\t  articles.forEach((article) => {\n\t    const imgDiv = document.getElementById(`${article.id}_img_div`);\n\t    if (!imgDiv) return;\n\n\t    const imgCatObj = this.estate_element_images.find(\n\t      (o) => Object.keys(o)[0] === article.id\n\t    );\n\t    if (!imgCatObj) return;\n\n\t    const images = Object.values(imgCatObj)[0];\n\t    if (!images.length) return;\n\n\t    let index = 0;\n\n\t    fadeSwap(imgDiv, images[index]);\n\n\t    this.slideshowIntervals[article.id] = setInterval(() => {\n\t      index = (index + 1) % images.length;\n\t      fadeSwap(imgDiv, images[index]);\n\t      this.current_image_index[article.id] = index;\n\t    }, 10000);\n\n\t    const back = document.getElementById(`${article.id}_div_backward`);\n\t    const forward = document.getElementById(`${article.id}_div_forward`);\n\n\t    const manual = (dir) => {\n\t      clearInterval(this.slideshowIntervals[article.id]);\n\n\t      index =\n\t        dir === \"back\"\n\t          ? (index - 1 + images.length) % images.length\n\t          : (index + 1) % images.length;\n\n\t      fadeSwap(imgDiv, images[index]);\n\t      this.current_image_index[article.id] = index;\n\t    };\n\n\t    back && back.addEventListener(\"click\", () => manual(\"back\"));\n\t    forward && forward.addEventListener(\"click\", () => manual(\"forward\"));\n\t  });\n\t};\n\n\tinitMobileSlideshow = () => {\n  if (!Array.isArray(this.estate_element_images_mobile)) return;\n\n  this.mobileIntervals = this.mobileIntervals || {};\n\n  const wrappers = document.querySelectorAll(\".estates-mobile-image-wrapper\");\n\n  wrappers.forEach((wrapper, i) => {\n    const imgObj = this.estate_element_images_mobile[i];\n    if (!imgObj) return;\n\n    const images = Object.values(imgObj)[0];\n    if (!images || images.length === 0) return;\n\n    wrapper.replaceChildren();\n\n    images.forEach((img, idx) => {\n      const clone = img.cloneNode(true);\n      clone.classList.add(\"estates-mobile-image\");\n      if (idx === 0) clone.classList.add(\"show\");\n      wrapper.appendChild(clone);\n    });\n\n    let index = 0;\n\n    this.mobileIntervals[i] = setInterval(() => {\n      const imgs = wrapper.querySelectorAll(\".estates-mobile-image\");\n      imgs[index].classList.remove(\"show\");\n      index = (index + 1) % imgs.length;\n      imgs[index].classList.add(\"show\");\n    }, 10000);\n  });\n\t};\n\n}"],"names":["$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","parcelRequire","$parcel$global","globalThis","parcelRegister","register","module","exports","$f326917f7fe9f45b$export$c735fcc5c69788eb","$1igQN","$edyy0","model","Estates_model","view","Estates_view","registerListener","state","render_page_elements","fetch_estate_elements","open_and_close_navbar","$0f148b0776ddaff4$export$1ecb0017af8e631a","loading","estate_elements","estate_elements_empty","estate_main_text","id","text","listeners","setState","newState","notifyListeners","console","log","listener","forEach","fetch","then","res","json","success","estate_page","Array","isArray","estate_page_images","estate_page_elements","estatePage","elementsMap","mainTextObj","element","estate_id","estate_title","push","groupedElements","entries","map","title","items","elements","imagesMap","image","category","estate_category","group","images","catch","err","$a59d14025f8669c7$export$ec11318d4fa72ed6","initial_elements_render","estate_element_images","estate_element_images_mobile","current_image_index","slideshowIntervals","navbar_btn_open","document","getElementById","navbar_btn_close","menu","addEventListener","event","style","display","estates_main_section1","estates_main_text_parent_div","estates_main_section1_mobile","estates_main_text_parent_div_mobile","estates_main_text_loading","createElement","setAttribute","classList","add","appendChild","estates_main_section1_loading","previous_text","removeChild","estates_main_text_loading_mobile","replaceChildren","estates_main_section1_loading_mobile","remove","length","every","el","main_text_p","sentences","split","textContent","sentence","index","textNode","createTextNode","main_text_p_mobile","article","mainDiv1","mainDiv2","mainDiv1_h3","mainDiv1_p","mainDiv1_div1","mainDiv1_div2","mainDiv1_div1_div1","mainDiv1_div1_div2","mainDiv1_div1_div1_a1","mainDiv1_div1_div1_a2","mainDiv1_div1_div2_p1","mainDiv1_div1_div2_p2","mainDiv2_div1","mainDiv2_div1_div1","mainDiv2_div1_div2","mainDiv2_div1_div3","estate_google_maps_url","estate_google_street_url","estate_text","estate_address","append","images_object","image_index","img","estate_image_production_url","div1","div2","div3","div4","div5","h3","p1","p2","a1","a2","span","images_object_mobile","image_index_mobile","initDesktopSlideshow","initMobileSlideshow","main_p_article","main_p_section","p","p_mobile","p2_mobile","articles","from","getElementsByClassName","fadeSwap","imgDiv","sourceImg","oldImg","querySelector","newImg","cloneNode","setTimeout","parentNode","prepend","requestAnimationFrame","imgCatObj","find","o","keys","values","setInterval","back","forward","manual","dir","clearInterval","mobileIntervals","wrappers","querySelectorAll","wrapper","i","imgObj","idx","clone","imgs"],"version":3,"file":"controller.67ef8a33.js.map"}