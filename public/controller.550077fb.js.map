{"mappings":"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","sources":["<anon>","src/javascript/resident-involvement/controller/controller.js","src/javascript/resident-involvement/view/view.js","src/javascript/resident-involvement/model/model.js"],"sourcesContent":["\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global = globalThis;\n    var parcelRequire = $parcel$global[\"parcelRequire8ea6\"];\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"fSVia\", function(module, exports) {\n\n$parcel$export(module.exports, \"RIController\", () => $b908572cae8f9884$export$ec5571c3111e9c9c);\n\nvar $9O7T7 = parcelRequire(\"9O7T7\");\n\nvar $jDneo = parcelRequire(\"jDneo\");\nclass $b908572cae8f9884$export$ec5571c3111e9c9c {\n    constructor(){\n        this.view = new (0, $9O7T7.RIView)();\n        this.model = new (0, $jDneo.RIModel)();\n        this.view.open_and_close_navbar();\n        this.model.fetch_images().then((res)=>{\n            console.log(res);\n            this.view.render_all_images(res);\n            this.view.render_all_images_mobile(res);\n        }).catch((err)=>{\n            console.log(err);\n        });\n    }\n}\n\n});\nparcelRegister(\"9O7T7\", function(module, exports) {\n\n$parcel$export(module.exports, \"RIView\", () => $723ee6f34c47ffbe$export$65db8170fdc24822);\nclass $723ee6f34c47ffbe$export$65db8170fdc24822 {\n    constructor(){}\n    open_and_close_navbar = ()=>{\n        const navbar_btn_open = document.getElementById(\"mobile-menu-btn\");\n        const navbar_btn_close = document.getElementById(\"mobile-menu-close\");\n        const menu = document.getElementById(\"mobile-menu\");\n        navbar_btn_open.addEventListener(\"click\", (event)=>{\n            menu.style.display = 'block';\n        });\n        navbar_btn_close.addEventListener(\"click\", (event)=>{\n            menu.style.display = 'none';\n        });\n    };\n    render_all_images = (fetch_images_result)=>{\n        // cache \n        const parentDiv = document.getElementById(\"resident_involvement_main_section2-div2\");\n        const divForward = document.getElementById(\"resident_involvement_main_section2-div-div-forwards-main\");\n        const divBackward = document.getElementById(\"resident_involvement_main_section2-div-div-backwards-main\");\n        let currentDiv = null;\n        let divIndex = 0;\n        let changeDivSlide = 0;\n        fetch_images_result.data.forEach((imgSrc, imgIndex)=>{\n            if (imgIndex % 4 === 0) {\n                currentDiv = document.createElement(\"div\");\n                currentDiv.classList.add(\"resident_involvement_main_section2-div-div\");\n                currentDiv.setAttribute(\"id\", `resident_involvement_main_section2-div-div-${divIndex}`);\n                parentDiv.append(currentDiv);\n                divIndex++;\n                if (divIndex > 2) currentDiv.style.display = 'none';\n            }\n            const img = document.createElement(\"img\");\n            img.setAttribute(\"src\", imgSrc.image_prod_url);\n            img.classList.add(\"resident_involvement_main_section2-div-div-img\");\n            img.alt = `photo for image id:${imgSrc.image_id}`;\n            img.addEventListener(\"click\", ()=>{\n                this.full_screen_images(imgSrc.image_prod_url);\n            });\n            currentDiv.appendChild(img);\n        });\n        this.render_image_galleries(fetch_images_result.data);\n        divForward.addEventListener(\"click\", (event)=>{\n            const divs = Array.from(document.getElementsByClassName(\"resident_involvement_main_section2-div-div\"));\n            for(let i = changeDivSlide; i < changeDivSlide + 2 && i < divs.length; i++)divs[i].style.display = \"none\";\n            changeDivSlide += 2;\n            if (changeDivSlide >= divs.length) {\n                if (divs.length % 2 === 0) // if even number, show the last 2\n                changeDivSlide = divs.length - 2;\n                else // if odd number, show the very last 1\n                changeDivSlide = divs.length - 1;\n            }\n            for(let i = changeDivSlide; i < changeDivSlide + 2 && i < divs.length; i++)divs[i].style.display = \"flex\";\n        });\n        divBackward.addEventListener(\"click\", (event)=>{\n            const divs = Array.from(document.getElementsByClassName(\"resident_involvement_main_section2-div-div\"));\n            for(let i = changeDivSlide; i < changeDivSlide + 2 && i < divs.length; i++)divs[i].style.display = \"none\";\n            changeDivSlide -= 2;\n            if (changeDivSlide < 0) changeDivSlide = 0;\n            for(let i = changeDivSlide; i < changeDivSlide + 2 && i < divs.length; i++)divs[i].style.display = \"flex\";\n        });\n    };\n    render_all_images_mobile = (fetch_images_result)=>{\n        const section = document.getElementById(\"resident-involvement-albums-mobile\");\n        if (!section) return;\n        const images = fetch_images_result.data;\n        // ---------- GROUP BY CATEGORY ----------\n        const grouped = images.reduce((acc, img)=>{\n            if (!img.image_category) return acc;\n            if (!acc[img.image_category]) acc[img.image_category] = [];\n            acc[img.image_category].push(img);\n            return acc;\n        }, {});\n        // Albums: All images + per-category\n        const albums = [\n            {\n                title: \"All images\",\n                images: images\n            },\n            ...Object.entries(grouped).map(([key, imgs])=>({\n                    title: key,\n                    images: imgs\n                }))\n        ];\n        // Use first album as template\n        const templateAlbum = section.querySelector(\".resident-album-mobile\");\n        // Remove all existing albums safely\n        section.replaceChildren();\n        // ---------- CREATE ALBUMS ----------\n        albums.forEach((album)=>{\n            let currentIndex = 0;\n            const albumEl = templateAlbum.cloneNode(true);\n            const titleEl = albumEl.querySelector(\".resident-involvement-album-title-mobile\");\n            const viewport = albumEl.querySelector(\".resident-album-viewport\");\n            const btnLeft = albumEl.querySelector(\".resident-album-arrow-left\");\n            const btnRight = albumEl.querySelector(\".resident-album-arrow-right\");\n            titleEl.textContent = album.title;\n            // Clear viewport safely\n            viewport.replaceChildren();\n            // Create image nodes\n            const imgNodes = album.images.map((imgData)=>{\n                const img = document.createElement(\"img\");\n                img.classList.add(\"resident-album-img\");\n                img.src = (0, imgData.image_prod_url);\n                img.alt = `photo for image id:${imgData.image_id}`;\n                img.style.display = \"none\";\n                img.addEventListener(\"click\", ()=>{\n                    console.log(\"click\");\n                    this.full_screen_images((0, imgData.image_prod_url));\n                });\n                return img;\n            });\n            viewport.append(...imgNodes);\n            const updateView = ()=>{\n                imgNodes.forEach((img)=>img.style.display = \"none\");\n                imgNodes[currentIndex].style.display = \"block\";\n                imgNodes[currentIndex + 1].style.display = \"block\";\n            };\n            updateView();\n            btnRight.addEventListener(\"click\", ()=>{\n                if (currentIndex + 2 < imgNodes.length) {\n                    currentIndex += 2;\n                    updateView();\n                }\n            });\n            btnLeft.addEventListener(\"click\", ()=>{\n                if (currentIndex - 2 >= 0) {\n                    currentIndex -= 2;\n                    updateView();\n                }\n            });\n            section.append(albumEl);\n        });\n    };\n    full_screen_images = (imageSrc)=>{\n        // display modal for images\n        const modalDiv = document.getElementById(\"resident_involvement_main_section2-div-div3\");\n        modalDiv.setAttribute(\"id\", \"resident_involvement_main_section2-div-div3\");\n        modalDiv.style.display = 'flex';\n        // set corect image src for modal \n        const img = document.getElementById(\"resident_involvement_main_section2-div-div3-img\");\n        img.setAttribute(\"src\", imageSrc);\n        // close modal \n        const closeButton = document.getElementById(\"resident_involvement_main_section2-div-div3-x\");\n        closeButton.addEventListener(\"click\", ()=>{\n            modalDiv.style.display = 'none';\n        });\n        //MOBILE\n        const modalDiv_mobile = document.getElementById(\"image_modal_mobile\");\n        modalDiv_mobile.style.display = 'flex';\n        // set corect image src for modal \n        const img_mobile = document.getElementById(\"image_div_img_mobile\");\n        img_mobile.setAttribute(\"src\", imageSrc);\n        // close modal \n        const closeButton_mobile = document.getElementById(\"image_close_span_mobile\");\n        closeButton_mobile.addEventListener(\"click\", ()=>{\n            modalDiv_mobile.style.display = 'none';\n        });\n    };\n    render_image_galleries = (images)=>{\n        const array2 = Object.values(images.reduce((acc, img)=>{\n            if (!img.image_category) return acc;\n            if (!acc[img.image_category]) acc[img.image_category] = {\n                categoryName: img.image_category,\n                images: []\n            };\n            acc[img.image_category].images.push(img);\n            return acc;\n        }, {}));\n        const mainSection = document.getElementById(\"resident_involvement_main_section3\");\n        array2.forEach((category)=>{\n            let currentIndex = 0;\n            const article = document.createElement(\"article\");\n            const div1 = document.createElement(\"div\");\n            const h3 = document.createElement(\"h3\");\n            const btnBack = document.createElement(\"div\");\n            const btnForward = document.createElement(\"div\");\n            const imagesWrapper = document.createElement(\"div\"); // wrapper for fade\n            article.classList.add(\"resident_involvement_main_articles\");\n            h3.classList.add(\"resident_involvement_main_articles-h3\");\n            div1.classList.add(\"resident_involvement_main_articles-div\");\n            btnBack.classList.add(\"resident_involvement_main_section2-div-div-backwards\");\n            btnBack.textContent = '<';\n            btnBack.setAttribute(\"id\", 'resident_involvement_main_articles_div_div_backward');\n            btnForward.setAttribute(\"id\", 'resident_involvement_main_articles_div_div_forward');\n            btnForward.classList.add(\"resident_involvement_main_section2-div-div-forwards\");\n            btnForward.textContent = '>';\n            h3.textContent = category.categoryName;\n            // Add fade class to wrapper\n            imagesWrapper.classList.add(\"fade-container\");\n            mainSection.append(article);\n            article.append(h3, div1);\n            div1.append(btnBack, imagesWrapper, btnForward);\n            const renderChunk = ()=>{\n                // fade out\n                imagesWrapper.classList.add(\"fade-out\");\n                setTimeout(()=>{\n                    // Clear old images\n                    imagesWrapper.innerHTML = \"\";\n                    // Render new chunk\n                    const chunk = category.images.slice(currentIndex, currentIndex + 4);\n                    chunk.forEach((imgData)=>{\n                        const newImg = document.createElement(\"img\");\n                        newImg.classList.add(\"resident_involvement_main_articles-div-img\");\n                        newImg.setAttribute(\"src\", (0, imgData.image_prod_url));\n                        newImg.addEventListener(\"click\", ()=>{\n                            this.full_screen_images(imgData.image_prod_url);\n                        });\n                        imagesWrapper.appendChild(newImg);\n                    });\n                    // fade back in\n                    imagesWrapper.classList.remove(\"fade-out\");\n                }, 400); // match CSS duration\n            };\n            // Initial render\n            renderChunk();\n            btnForward.addEventListener(\"click\", ()=>{\n                if (currentIndex + 4 < category.images.length) {\n                    currentIndex += 4;\n                    renderChunk();\n                }\n            });\n            btnBack.addEventListener(\"click\", ()=>{\n                if (currentIndex - 4 >= 0) {\n                    currentIndex -= 4;\n                    renderChunk();\n                }\n            });\n        });\n    };\n}\n\n});\n\nparcelRegister(\"jDneo\", function(module, exports) {\n\n$parcel$export(module.exports, \"RIModel\", () => $e4b3ae0ba680e9cf$export$ed3feabfecc6ca10);\nclass $e4b3ae0ba680e9cf$export$ed3feabfecc6ca10 {\n    constructor(){\n        this.images = [];\n    }\n    get_images = ()=>{\n        return this.images;\n    };\n    fetch_images = ()=>{\n        var res, res1, err;\n        return fetch(\"https://www.abbeyroad.org.uk/api/resident-involvment-page/get_all_images\").then((res)=>{\n            return res.json();\n        }).then((res)=>{\n            if (res.success & res.data.length > 0) {\n                this.images = [\n                    ...this.images,\n                    ...res.data\n                ];\n                return Promise.resolve({\n                    status: true,\n                    data: this.get_images()\n                });\n            } else return Promise.reject({\n                status: false\n            });\n        }).catch((err)=>{\n            console.log(err);\n            return Promise.reject({\n                status: false\n            });\n        });\n    };\n}\n\n});\n\n\n\n//# sourceMappingURL=controller.550077fb.js.map\n","import {RIView} from '../view/view.js';\nimport {RIModel} from '../model/model.js';\n\nexport class RIController {\n\n\tconstructor(){\n\n\t\tthis.view = new RIView();\n\t\tthis.model = new RIModel();\n\n\t\t\tthis.view.open_and_close_navbar(); \n\t\t\t\n\t\t\tthis.model.fetch_images()\n\t\t\t.then((res)=>{\n\t\t\t\tconsole.log(res)\n\t\t\t\tthis.view.render_all_images(res)\n\t\t\t\tthis.view.render_all_images_mobile(res)\n\t\t\t})\n\t\t\t.catch((err)=>{\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t\t\n\t}\n\n}","export class RIView {\n\n\tconstructor(){\n\n\t}\n\n\topen_and_close_navbar = () => {\n\n\t\tconst navbar_btn_open = \n\t\tdocument.getElementById(\"mobile-menu-btn\")\n\n\t\tconst navbar_btn_close = \n\t\tdocument.getElementById(\"mobile-menu-close\")\n\n\t\tconst menu = document.getElementById(\"mobile-menu\");\n\n\t\tnavbar_btn_open.addEventListener(\"click\", (event)=>{\n\n\t\t\tmenu.style.display = 'block';\n\t\t})\n\n\t\tnavbar_btn_close.addEventListener(\"click\", (event)=>{\n\t\t\tmenu.style.display = 'none';\n\t\t})\n\t}\n\n\trender_all_images = (fetch_images_result) => {\n\t\n\t\t// cache \n\t\tconst parentDiv = \n\t\tdocument.getElementById(\"resident_involvement_main_section2-div2\");\n\n\t\tconst divForward = \n\t\tdocument.getElementById(\"resident_involvement_main_section2-div-div-forwards-main\");\n\n\t\tconst divBackward = \n\t\tdocument.getElementById(\"resident_involvement_main_section2-div-div-backwards-main\");\n\n\t\tlet currentDiv = null;\n\n\t\tlet divIndex = 0;\n\n\t\tlet changeDivSlide = 0;\n\n\n\t\tfetch_images_result.data.forEach((imgSrc,imgIndex)=>{\n\n\t\t\tif(imgIndex % 4 === 0){\n\n\t\t\t\tcurrentDiv = document.createElement(\"div\");\n\t\t\t\tcurrentDiv.classList.add(\"resident_involvement_main_section2-div-div\");\n\t\t\t\tcurrentDiv.setAttribute(\"id\",`resident_involvement_main_section2-div-div-${divIndex}`)\n\n\t\t\t\tparentDiv.append(currentDiv)\n\n\t\t\t\tdivIndex ++;\n\n\t\t\t\tif(divIndex > 2) {\n\t\t\t\t\tcurrentDiv.style.display = 'none';\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst img = document.createElement(\"img\");\n\t\t\t\n\t\t\tif(process.env.NODE_ENV === 'production'){\n\t\t\t\timg.setAttribute(\"src\", imgSrc.image_prod_url)\n\t\t\t}\n\t\t\telse{\n\t\t\t\timg.setAttribute(\"src\", imgSrc.image_dev_url)\n\t\t\t}\n\t\t\t\n\t\t    img.classList.add(\"resident_involvement_main_section2-div-div-img\");\n\n\t\t    img.alt = `photo for image id:${imgSrc.image_id}`;\n\n\t\t    img.addEventListener(\"click\", ()=>{\n\t\t    \tif(process.env.NODE_ENV === 'production'){\n\t\t    \t\tthis.full_screen_images(imgSrc.image_prod_url)\n\t\t    \t}\n\t\t    \telse{\n\t\t    \t\tthis.full_screen_images(imgSrc.image_dev_url)\n\t\t    \t}\n\t    \t})\n\n\t\t    currentDiv.appendChild(img);\n\n\t\t})\n\n\t\tthis.render_image_galleries(fetch_images_result.data);\n\n\t\tdivForward.addEventListener(\"click\", (event)=>{\n\n\t\t\tconst divs = \n\t\t\tArray.from(\n\t\t\t\tdocument.getElementsByClassName(\"resident_involvement_main_section2-div-div\")\n\t\t\t)\n\n\t\t\tfor (let i = changeDivSlide; i < changeDivSlide + 2 && i < divs.length; i++) {\n\t\t\t  divs[i].style.display = \"none\";\n\n\t\t\t}\n\n\t  \t\tchangeDivSlide += 2;\n\t  \t\t\n\t  \t\tif (changeDivSlide >= divs.length) {\n\t  \t\t\tif (divs.length % 2 === 0) {\n\t\t\t    // if even number, show the last 2\n\t\t\t    \tchangeDivSlide = divs.length - 2;\n\t\t\t  \t} \n\t\t\t  \telse {\n\t\t\t    // if odd number, show the very last 1\n\t\t\t    \tchangeDivSlide = divs.length - 1;\n  \t\t\t\t}\n\t  \t\t}\n\n\t\t  \tfor (let i = changeDivSlide; i < changeDivSlide + 2 && i < divs.length; i++) {\n\t\t    \tdivs[i].style.display = \"flex\";\n\t\t    \t \n\t\t  \t}\n\t\t});\n\n\t\tdivBackward.addEventListener(\"click\", (event) => {\n\t\t  \n\t\t  const divs = \n\t\t  Array.from(\n\t\t  \tdocument.getElementsByClassName(\"resident_involvement_main_section2-div-div\")\n\t\t  )\n\n\t\t  for (let i = changeDivSlide; i < changeDivSlide + 2 && i < divs.length; i++) {\n\t\t    divs[i].style.display = \"none\";\n\t\t    \n\t\t  }\n\n\t\t  changeDivSlide -= 2;\n\n\t\t  if (changeDivSlide < 0){\n\t\t  \tchangeDivSlide = 0;\n\t\t  }\n\n\t\t  for (let i = changeDivSlide; i < changeDivSlide + 2 && i < divs.length; i++) {\n\t\t    divs[i].style.display = \"flex\";\n\t\t    \n\t\t  }\n\t\t});\n\t}\n\n\trender_all_images_mobile = (fetch_images_result) => {\n\n\t  const section = document.getElementById(\"resident-involvement-albums-mobile\");\n\t  if (!section) return;\n\n\t  const images = fetch_images_result.data;\n\n\t  // ---------- GROUP BY CATEGORY ----------\n\t  const grouped = images.reduce((acc, img) => {\n\t    if (!img.image_category) return acc;\n\n\t    if (!acc[img.image_category]) acc[img.image_category] = [];\n\t    acc[img.image_category].push(img);\n\n\t    return acc;\n\t  }, {});\n\n\t  // Albums: All images + per-category\n\t  const albums = [\n\t    { title: \"All images\", images },\n\t    ...Object.entries(grouped).map(([key, imgs]) => ({\n\t      title: key,\n\t      images: imgs\n\t    }))\n\t  ];\n\n\t  // Use first album as template\n\t  const templateAlbum = section.querySelector(\".resident-album-mobile\");\n\n\t  // Remove all existing albums safely\n\t  section.replaceChildren();\n\n\t  // ---------- CREATE ALBUMS ----------\n\t  albums.forEach(album => {\n\t    let currentIndex = 0;\n\n\t    const albumEl = templateAlbum.cloneNode(true);\n\n\t    const titleEl = albumEl.querySelector(\".resident-involvement-album-title-mobile\");\n\t    const viewport = albumEl.querySelector(\".resident-album-viewport\");\n\t    const btnLeft = albumEl.querySelector(\".resident-album-arrow-left\");\n\t    const btnRight = albumEl.querySelector(\".resident-album-arrow-right\");\n\n\t    titleEl.textContent = album.title;\n\n\t    // Clear viewport safely\n\t    viewport.replaceChildren();\n\n\t    // Create image nodes\n\t    const imgNodes = album.images.map(imgData => {\n\t      const img = document.createElement(\"img\");\n\t      img.classList.add(\"resident-album-img\");\n\n\t      img.src =\n\t        process.env.NODE_ENV === \"production\"\n\t          ? imgData.image_prod_url\n\t          : imgData.image_dev_url;\n\n\t      img.alt = `photo for image id:${imgData.image_id}`;\n\t      img.style.display = \"none\";\n\n\t      img.addEventListener(\"click\", () => {\n\t      \tconsole.log(\"click\")\n\t        this.full_screen_images(\n\t          process.env.NODE_ENV === \"production\"\n\t            ? imgData.image_prod_url\n\t            : imgData.image_dev_url\n\t        );\n\t      });\n\n\t      return img;\n\t    });\n\n\t    viewport.append(...imgNodes);\n\n\t    const updateView = () => {\n\t      imgNodes.forEach(img => (img.style.display = \"none\"));\n\n\t      imgNodes[currentIndex].style.display = \"block\";\n\t      imgNodes[currentIndex + 1].style.display = \"block\";\n\t    };\n\n\t    updateView();\n\n\t    btnRight.addEventListener(\"click\", () => {\n\t      if (currentIndex + 2 < imgNodes.length) {\n\t        currentIndex += 2;\n\t        updateView();\n\t      }\n\t    });\n\n\t    btnLeft.addEventListener(\"click\", () => {\n\t      if (currentIndex - 2 >= 0) {\n\t        currentIndex -= 2;\n\t        updateView();\n\t      }\n\t    });\n\n\t    section.append(albumEl);\n\t  });\n\t};\n\n\tfull_screen_images = (imageSrc)=>{\n\n\t\t// display modal for images\n\t\tconst modalDiv = \n\t\tdocument.getElementById(\"resident_involvement_main_section2-div-div3\");\n\n\t\tmodalDiv.setAttribute(\"id\", \"resident_involvement_main_section2-div-div3\");\n\n\t\tmodalDiv.style.display = 'flex';\n\n\t\t// set corect image src for modal \n\t\tconst img = \n\t\tdocument.getElementById(\"resident_involvement_main_section2-div-div3-img\");\n\n\t\timg.setAttribute(\"src\", imageSrc);\n\n\t\t// close modal \n\t\tconst closeButton = \n\t\tdocument.getElementById(\"resident_involvement_main_section2-div-div3-x\");\n\n\t\tcloseButton.addEventListener(\"click\", ()=>{\n\t\t\tmodalDiv.style.display = 'none'\n\t\t})\n\n\t\t//MOBILE\n\t\tconst modalDiv_mobile = \n\t\tdocument.getElementById(\"image_modal_mobile\");\n\n\t\tmodalDiv_mobile.style.display = 'flex';\n\n\t\t// set corect image src for modal \n\t\tconst img_mobile = \n\t\tdocument.getElementById(\"image_div_img_mobile\");\n\n\t\timg_mobile.setAttribute(\"src\", imageSrc);\n\n\t\t// close modal \n\t\tconst closeButton_mobile = \n\t\tdocument.getElementById(\"image_close_span_mobile\");\n\n\t\tcloseButton_mobile.addEventListener(\"click\", ()=>{\n\t\t\tmodalDiv_mobile.style.display = 'none'\n\t\t})\n\n\t}\n\n\trender_image_galleries = (images) => {\n\t  const array2 = Object.values(\n\t    images.reduce((acc, img) => {\n\t      if (!img.image_category) return acc;\n\n\t      if (!acc[img.image_category]) acc[img.image_category] = {\n\t        categoryName: img.image_category,\n\t        images: []\n\t      };\n\n\t      acc[img.image_category].images.push(img);\n\t      return acc;\n\t    }, {})\n\t  );\n\n\t  const mainSection = document.getElementById(\"resident_involvement_main_section3\");\n\n\t  array2.forEach((category) => {\n\t    let currentIndex = 0;\n\n\t    const article = document.createElement(\"article\");\n\t    const div1 = document.createElement(\"div\");\n\t    const h3 = document.createElement(\"h3\");\n\t    const btnBack = document.createElement(\"div\");\n\t    const btnForward = document.createElement(\"div\");\n\t    const imagesWrapper = document.createElement(\"div\"); // wrapper for fade\n\n\t    article.classList.add(\"resident_involvement_main_articles\");\n\t    h3.classList.add(\"resident_involvement_main_articles-h3\");\n\t    div1.classList.add(\"resident_involvement_main_articles-div\");\n\n\t    btnBack.classList.add(\"resident_involvement_main_section2-div-div-backwards\");\n\t    btnBack.textContent = '<';\n\t    btnBack.setAttribute(\"id\", 'resident_involvement_main_articles_div_div_backward');\n\t\t\t\n\t    btnForward.setAttribute(\"id\", 'resident_involvement_main_articles_div_div_forward');\n\t    btnForward.classList.add(\"resident_involvement_main_section2-div-div-forwards\");\n\t    btnForward.textContent = '>';\n\n\t    h3.textContent = category.categoryName;\n\n\t    // Add fade class to wrapper\n\t    imagesWrapper.classList.add(\"fade-container\");\n\n\t    mainSection.append(article);\n\t    article.append(h3, div1);\n\t    div1.append(btnBack, imagesWrapper, btnForward);\n\n\t    const renderChunk = () => {\n\t      // fade out\n\t      imagesWrapper.classList.add(\"fade-out\");\n\n\t      setTimeout(() => {\n\t        // Clear old images\n\t        imagesWrapper.innerHTML = \"\";\n\n\t        // Render new chunk\n\t        const chunk = category.images.slice(currentIndex, currentIndex + 4);\n\t        chunk.forEach(imgData => {\n\t          const newImg = document.createElement(\"img\");\n\t          newImg.classList.add(\"resident_involvement_main_articles-div-img\");\n\t          newImg.setAttribute(\n\t            \"src\",\n\t            process.env.NODE_ENV === \"production\" ? imgData.image_prod_url : imgData.image_dev_url\n\t          );\n\t          newImg.addEventListener(\"click\", ()=>{\n\t            if(process.env.NODE_ENV === 'production'){\n\t              this.full_screen_images(imgData.image_prod_url);\n\t            }\n\t            else{\n\t              this.full_screen_images(imgData.image_dev_url);\n\t            }\n\t          });\n\t          imagesWrapper.appendChild(newImg);\n\t        });\n\n\t        // fade back in\n\t        imagesWrapper.classList.remove(\"fade-out\");\n\t      }, 400); // match CSS duration\n\t    };\n\n\t    // Initial render\n\t    renderChunk();\n\n\t    btnForward.addEventListener(\"click\", () => {\n\t      if (currentIndex + 4 < category.images.length) {\n\t        currentIndex += 4;\n\t        renderChunk();\n\t      }\n\t    });\n\n\t    btnBack.addEventListener(\"click\", () => {\n\t      if (currentIndex - 4 >= 0) {\n\t        currentIndex -= 4;\n\t        renderChunk();\n\t      }\n\t    });\n\t  });\n\t};\n\n\n}\n\n\t","export class RIModel {\n\n\tconstructor (){\n\n\t\tthis.images = [];\n\n\t}\n\n\tget_images = () => {\n\n\t\treturn this.images;\n\t}\n\n\tfetch_images = () => {\n\n    if (process.env.NODE_ENV === \"production\") {\n\t\treturn fetch(\"https://www.abbeyroad.org.uk/api/resident-involvment-page/get_all_images\")\n\t\t.then((res)=>{\n\t\t\treturn res.json()\n\t\t})\n\t\t.then((res)=>{\n\n\t\t\tif(res.success & res.data.length > 0){\n\n\t\t\t\tthis.images = [...this.images,...res.data]\n\n\t\t\t\treturn Promise.resolve({\n\t\t\t\t\tstatus: true,\n\t\t\t\t\tdata: this.get_images()\n\t\t\t\t})\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn Promise.reject({\n\t\t\t\t\tstatus: false\n\t\t\t\t})\n\t\t\t\tconsole.log(\"error loading images\")\n\t\t\t}\n\t\t})\n\t\t.catch((err)=>{\n\t\t\tconsole.log(err)\n\t\t\treturn Promise.reject({\n\t\t\t\t\tstatus: false\n\t\t\t\t})\n\t\t})\n    }\n    else{\n\t\treturn fetch(\"http://localhost:3001/api/resident-involvment-page/get_all_images\")\n\t\t.then((res)=>{\n\t\t\treturn res.json()\n\t\t})\n\t\t.then((res)=>{\n\n\t\t\tif(res.success & res.data.length > 0){\n\n\t\t\t\tthis.images = [...this.images,...res.data]\n\n\t\t\t\treturn Promise.resolve({\n\t\t\t\t\tstatus: true,\n\t\t\t\t\tdata: this.get_images()\n\t\t\t\t})\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn Promise.reject({\n\t\t\t\t\tstatus: false\n\t\t\t\t})\n\t\t\t\tconsole.log(\"error loading images\")\n\t\t\t}\n\t\t})\n\t\t.catch((err)=>{\n\t\t\tconsole.log(err)\n\t\t\treturn Promise.reject({\n\t\t\t\t\tstatus: false\n\t\t\t\t})\n\t\t})\n    }\n\t}\n\n}"],"names":["$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","parcelRequire","$parcel$global","globalThis","parcelRegister","register","module","exports","$b908572cae8f9884$export$ec5571c3111e9c9c","$9O7T7","$jDneo","view","RIView","model","RIModel","open_and_close_navbar","fetch_images","then","res","console","log","render_all_images","render_all_images_mobile","catch","err","$723ee6f34c47ffbe$export$65db8170fdc24822","navbar_btn_open","document","getElementById","navbar_btn_close","menu","addEventListener","event","style","display","fetch_images_result","parentDiv","divForward","divBackward","currentDiv","divIndex","changeDivSlide","data","forEach","imgSrc","imgIndex","createElement","classList","add","setAttribute","append","img","image_prod_url","alt","image_id","full_screen_images","appendChild","render_image_galleries","divs","Array","from","getElementsByClassName","i","length","section","images","grouped","reduce","acc","image_category","push","albums","title","entries","map","key","imgs","templateAlbum","querySelector","replaceChildren","album","currentIndex","albumEl","cloneNode","titleEl","viewport","btnLeft","btnRight","textContent","imgNodes","imgData","src","updateView","imageSrc","modalDiv","closeButton","modalDiv_mobile","img_mobile","closeButton_mobile","array2","values","categoryName","mainSection","category","article","div1","h3","btnBack","btnForward","imagesWrapper","renderChunk","setTimeout","innerHTML","chunk","slice","newImg","remove","$e4b3ae0ba680e9cf$export$ed3feabfecc6ca10","get_images","fetch","json","success","Promise","resolve","status","reject"],"version":3,"file":"controller.550077fb.js.map"}