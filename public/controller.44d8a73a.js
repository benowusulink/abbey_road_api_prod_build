function e(e,d,t,_){Object.defineProperty(e,d,{get:t,set:_,enumerable:!0,configurable:!0})}var d=globalThis.parcelRequire8ea6,t=d.register;t("kavht",function(t,_){e(t.exports,"Admin_board_members_controller",()=>s);var a=d("cudlD"),i=d("5KqvO");class s{constructor(){this.model=new(0,i.Admin_board_members_Model),this.view=new(0,a.Admin_board_members_View),this.model.registerListener(e=>{this.view.render_fetch_board_members(e)}),this.model.registerListener(e=>{this.view.render_fetch_board_documents(e)}),this.model.registerListener(e=>{this.view.render_add_board_members(e)}),this.model.registerListener(e=>{this.view.render_edit_board_members(e)}),this.model.registerListener(e=>{this.view.render_delete_board_members(e)}),this.model.registerListener(e=>{this.view.render_add_board_documents(e)}),this.model.registerListener(e=>{this.view.render_delete_board_documents(e)}),this.view.articles_event_listener(e=>{1===e&&this.model.fetch_board_members(),2===e&&this.view.add_board_members(this.add_board_members),3===e&&(this.model.fetch_board_members(),this.view.delete_board_members(this.delete_board_members)),4===e&&(this.model.fetch_board_members(),this.view.edit_board_members(this.edit_board_members)),5===e&&this.model.fetch_board_documents(),6===e&&this.view.add_board_documents(this.add_board_documents),7===e&&(this.model.fetch_board_documents(),this.view.delete_board_documents(this.delete_board_documents))})}edit_board_members=(e,d,t)=>{this.model.edit_board_members(e,d,t)};add_board_members=(e,d)=>{this.model.add_board_members(e,d)};delete_board_members=e=>{this.model.delete_board_member(e)};add_board_documents=(e,d)=>{this.model.add_board_documents(e,d)};delete_board_documents=e=>{this.model.delete_board_documents(e)}}}),t("cudlD",function(d,t){e(d.exports,"Admin_board_members_View",()=>_);class _{constructor(){this.clicked_btn=!1,this.old_username="",this.old_document="",this.delete_btn_rendered=!1,this.delete_btn_rendered2=!1}articles_event_listener=e=>{let d=Array.from(document.getElementsByClassName("admin_board_members_main_section_article_div_span")),t=null;d.forEach((d,_)=>{d.addEventListener("click",()=>{t=`admin_board_members_main_section_article_div_span${_+1}`;let a=document.getElementById(`admin_board_members_main_section_article_div${_+1}`);this.clicked_btn?(this.clicked_btn=!1,a.style.display="none",d.textContent="Click Here",d.style.fontSize="110%",d.style.color="var(--fourth-color)",d.style.backgroundColor="var(--third-color)",d.style.border="var(--fourth-color) solid 2px"):(this.clicked_btn=!0,a.style.display="flex",d.textContent="X",d.style.fontSize="200%",d.style.color="darkred",d.style.border="red solid 2px",e(_+1)),Array.from(document.getElementsByClassName("admin_board_members_main_section_article_div1")).forEach((e,d)=>{e.id!==a.id&&(e.style.display="none")}),Array.from(document.getElementsByClassName("admin_board_members_main_section_article_div_span")).forEach(e=>{t!==e.id&&(e.textContent="Click Here",e.style.fontSize="110%",e.style.color="var(--fourth-color)",e.style.backgroundColor="var(--third-color)",e.style.border="var(--fourth-color) solid 2px")})})})};render_fetch_board_members=e=>{let d=document.getElementById("admin_board_members_main_section_article_div1_loading"),t=document.getElementById("admin_board_members_main_section_article_div1_h3"),_=document.getElementById("admin_board_members_main_section_article_div1_ul1");e.loading?(t.style.display="none",_.style.display="none",d.style.display="none",d.style.display="block"):e.board_members&&!1===e.loading?(d.style.display="none",t.style.display="none",_.replaceChildren(),_.style.display="flex",e.board_members.forEach(e=>{let d=document.createElement("li");d.classList.add("admin_board_members_main_section_article_div1_ul1_li"),d.textContent=e,_.appendChild(d)})):null===e.board_members&&(d.style.display="none",_.style.display="none",t.style.display="none",t.style.display="flex")};render_add_board_members=e=>{let d=document.getElementById("add_board_member_form_div_loading"),t=document.getElementById("add_board_member_form_err_msg"),_=document.getElementById("add_board_member_form_success_msg");e.loading?(d.style.display="none",_.style.display="none",t.style.display="none",d.style.display="block"):!1===e.loading&&!0===e.added_board_member?(_.style.display="none",d.style.display="none",t.style.display="none",_.style.display="flex",_.textContent=`User Added Successfully \u{2705} Username: ${e.new_edited_user.username}, Password: ${e.new_edited_user.password}`):!1===e.loading&&!1===e.added_board_member&&!0===e.attempted_add_board_member?(_.style.display="none",d.style.display="none",t.style.display="none",t.style.display="flex"):(d.style.display="none",_.style.display="none",t.style.display="none")};add_board_members=e=>{document.getElementById("add_board_member_form").onsubmit=d=>{d.preventDefault();let t=document.getElementById("add_board_member_form_username"),_=document.getElementById("add_board_member_form_password");e(t.value,_.value),_.value="",t.value=""}};render_edit_board_members=e=>{let d=document.getElementById("admin_board_members_main_section_article_div4_div1_loading"),t=document.getElementById("admin_board_members_main_section_article_div4_div1_h4"),_=document.getElementById("admin_board_members_main_section_article_div4_div1_h42"),a=document.getElementById("edit_board_member_form_div_loading"),i=document.getElementById("edit_board_member_form_err_msg"),s=document.getElementById("edit_board_member_form_success_msg"),n=document.getElementById("admin_board_members_main_section_article_div4_div1_ul"),l=document.getElementById("edit_board_member_form"),r=()=>{d.style.display="none",t.style.display="none",_.style.display="none",s.style.display="none",i.style.display="none",a.style.display="none",l.style.display="none"};e.loading?(r(),n.replaceChildren(),d.style.display="block",a.style.display="block"):!0===e.edited_board_member?(r(),n.replaceChildren(),_.style.display="flex",s.style.display="flex",l.style.display="block",s.textContent=`Board Member Username or Password Changed Successfully \u{2705} Username: ${e.new_edited_user.username}, Password: ${e.new_edited_user.password}`,n.replaceChildren(),e.board_members.forEach(e=>{let d=document.createElement("li");d.classList.add("admin_board_members_main_section_article_div4_div1_ul_li"),d.setAttribute("name",e),d.textContent=e,d.addEventListener("click",e=>{this.old_username=e.target.getAttribute("name"),n.querySelectorAll(".admin_board_members_main_section_article_div4_div1_ul_li").forEach(e=>e.classList.remove("admin_board_members_main_section_article_div4_div1_ul_li_selected")),d.classList.add("admin_board_members_main_section_article_div4_div1_ul_li_selected")}),n.appendChild(d)})):!1===e.edited_board_member&&!0===e.attempted_edit_board_member?(r(),n.replaceChildren(),_.style.display="flex",i.style.display="flex",l.style.display="block",e.board_members.forEach(e=>{let d=document.createElement("li");d.classList.add("admin_board_members_main_section_article_div4_div1_ul_li"),d.setAttribute("name",e),d.textContent=e,d.addEventListener("click",e=>{this.old_username=e.target.getAttribute("name"),n.querySelectorAll(".admin_board_members_main_section_article_div4_div1_ul_li").forEach(e=>e.classList.remove("admin_board_members_main_section_article_div4_div1_ul_li_selected")),d.classList.add("admin_board_members_main_section_article_div4_div1_ul_li_selected")}),n.appendChild(d)})):e.board_members?(r(),n.replaceChildren(),_.style.display="flex",l.style.display="block",e.board_members.forEach(e=>{let d=document.createElement("li");d.classList.add("admin_board_members_main_section_article_div4_div1_ul_li"),d.setAttribute("name",e),d.textContent=e,d.addEventListener("click",e=>{this.old_username=e.target.getAttribute("name"),n.querySelectorAll(".admin_board_members_main_section_article_div4_div1_ul_li").forEach(e=>e.classList.remove("admin_board_members_main_section_article_div4_div1_ul_li_selected")),d.classList.add("admin_board_members_main_section_article_div4_div1_ul_li_selected")}),n.appendChild(d)})):(r(),t.style.display="flex")};edit_board_members=e=>{let d=document.getElementById("edit_board_member_form"),t=document.getElementById("edit_board_member_form_username"),_=document.getElementById("edit_board_member_form_password");d.onsubmit=d=>{d.preventDefault(),e(this.old_username,t.value,_.value),t.value="",_.value=""}};render_delete_board_members=e=>{let d=document.getElementById("admin_board_members_main_section_article_div3_div1_loading"),t=document.getElementById("admin_board_members_main_section_article_div3_div1_h4"),_=document.getElementById("admin_board_members_main_section_article_div3_div1_h42"),a=document.getElementById("admin_board_members_main_section_article_div3_div2_h5"),i=document.getElementById("admin_board_members_main_section_article_div3_div2_btn"),s=document.getElementById("admin_board_members_main_section_article_div3_div3_loading"),n=document.getElementById("admin_board_members_main_section_article_div3_div3_err"),l=document.getElementById("admin_board_members_main_section_article_div3_div3_success"),r=document.getElementById("admin_board_members_main_section_article_div3_div1_ul"),m=()=>{d.style.display="none",t.style.display="none",_.style.display="none",l.style.display="none",n.style.display="none",s.style.display="none",a.style.display="none",i.style.display="none"};e.loading?(m(),r.replaceChildren(),d.style.display="block",s.style.display="block"):!1===e.loading&&!1===e.attempted_delete_board_member&&!0===e.deleted_board_member?(m(),r.replaceChildren(),e.board_members?_.style.display="flex":t.style.display="flex",l.style.display="flex",a.style.display="flex",i.style.display="flex",l.textContent=`Board member: ${this.old_username} successfully deleted \u{2705}`,e.board_members.forEach(e=>{let d=document.createElement("li");d.classList.add("admin_board_members_main_section_article_div3_div1_ul_li"),d.setAttribute("name",e),d.textContent=e,d.addEventListener("click",e=>{this.old_username=e.target.getAttribute("name"),r.querySelectorAll(".admin_board_members_main_section_article_div3_div1_ul_li").forEach(e=>e.classList.remove("admin_board_members_main_section_article_div3_div1_ul_li_selected")),d.classList.add("admin_board_members_main_section_article_div4_div1_ul_li_selected")}),r.appendChild(d)})):!1===e.loading&&!0===e.attempted_delete_board_member&&!1===e.deleted_board_member?(m(),r.replaceChildren(),_.style.display="flex",n.style.display="flex",a.style.display="flex",i.style.display="flex",n.textContent=`Error deleting Board Member, Please try again \u{274C}`,e.board_members.forEach(e=>{let d=document.createElement("li");d.classList.add("admin_board_members_main_section_article_div3_div1_ul_li"),d.setAttribute("name",e),d.textContent=e,d.addEventListener("click",e=>{console.log("click"),this.old_username=e.target.getAttribute("name"),r.querySelectorAll(".admin_board_members_main_section_article_div3_div1_ul_li").forEach(e=>e.classList.remove("admin_board_members_main_section_article_div3_div1_ul_li_selected")),d.classList.add("admin_board_members_main_section_article_div4_div1_ul_li_selected")}),r.appendChild(d)})):!1===e.loading&&e.board_members?(m(),r.replaceChildren(),_.style.display="flex",a.style.display="flex",i.style.display="flex",e.board_members.forEach(e=>{let d=document.createElement("li");d.classList.add("admin_board_members_main_section_article_div3_div1_ul_li"),d.setAttribute("name",e),d.textContent=e,d.addEventListener("click",e=>{console.log("click"),this.old_username=e.target.getAttribute("name"),r.querySelectorAll(".admin_board_members_main_section_article_div3_div1_ul_li").forEach(e=>e.classList.remove("admin_board_members_main_section_article_div3_div1_ul_li_selected")),d.classList.add("admin_board_members_main_section_article_div4_div1_ul_li_selected")}),r.appendChild(d)})):(m(),r.replaceChildren(),t.style.display="flex")};delete_board_members=e=>{let d=document.getElementById("admin_board_members_main_section_article_div3_div2_btn");this.delete_btn_rendered||(d.addEventListener("click",d=>{e(this.old_username)}),this.delete_btn_rendered=!0)};render_fetch_board_documents=e=>{let d=document.getElementById("admin_board_members_main_section_article_div5_loading"),t=document.getElementById("admin_board_members_main_section_article_div5_h4"),_=document.getElementById("admin_board_members_main_section_article_div5_ul1");e.loading?(t.style.display="none",_.style.display="none",d.style.display="none",d.style.display="block"):e.board_documents&&!1===e.loading?(d.style.display="none",t.style.display="none",_.replaceChildren(),_.style.display="flex",e.board_documents.forEach(e=>{let d=document.createElement("li"),t=document.createElement("a");d.classList.add("admin_board_members_main_section_article_div5_ul1_li"),t.classList.add("admin_board_members_main_section_article_div5_ul1_li_a"),t.setAttribute("href",e.production_url),t.setAttribute("target","_blank"),t.textContent=e.name,d.appendChild(t),_.appendChild(d)})):(d.style.display="none",_.style.display="none",t.style.display="none",t.style.display="flex")};render_add_board_documents=e=>{let d=document.getElementById("add_board_document_form_div_loading"),t=document.getElementById("add_board_document_form_err_msg"),_=document.getElementById("add_board_document_form_success_msg");e.loading?(d.style.display="none",_.style.display="none",t.style.display="none",d.style.display="block"):!1===e.loading&&!0===e.added_board_document?(_.style.display="none",d.style.display="none",t.style.display="none",_.style.display="flex",_.textContent=`Document Added Successfully \u{2705} : ${e.added_board_document_name}`):!1===e.loading&&!1===e.added_board_document&&!0===e.attempted_add_board_document?(_.style.display="none",d.style.display="none",t.style.display="none",t.style.display="flex"):(e.board_documents,d.style.display="none",_.style.display="none",t.style.display="none")};add_board_documents=e=>{let d=document.getElementById("add_board_document_form"),t=document.getElementById("add_board_document_form_upload_input");d.onsubmit=_=>{_.preventDefault();let a=document.getElementById("add_board_document_form_name"),i=t.files[0];i||(i=null),e(a.value,i),d.reset()}};render_delete_board_documents=e=>{let d=document.getElementById("admin_board_members_main_section_article_div7_div1_loading"),t=document.getElementById("admin_board_members_main_section_article_div7_div1_h4"),_=document.getElementById("admin_board_members_main_section_article_div7_div1_h42"),a=document.getElementById("admin_board_members_main_section_article_div7_div2_h5"),i=document.getElementById("admin_board_members_main_section_article_div7_div2_btn"),s=document.getElementById("admin_board_members_main_section_article_div7_div3_loading"),n=document.getElementById("admin_board_members_main_section_article_div7_div3_err"),l=document.getElementById("admin_board_members_main_section_article_div7_div3_success"),r=document.getElementById("admin_board_members_main_section_article_div7_div1_ul"),m=()=>{d.style.display="none",t.style.display="none",_.style.display="none",l.style.display="none",n.style.display="none",s.style.display="none",a.style.display="none",i.style.display="none"};e.loading?(m(),r.replaceChildren(),d.style.display="block",s.style.display="block"):!1===e.loading&&!1===e.attempted_delete_board_document&&!0===e.deleted_board_document?(m(),r.replaceChildren(),e.board_documents?_.style.display="flex":t.style.display="flex",l.style.display="flex",a.style.display="flex",i.style.display="flex",l.textContent=`Board Document: ${e.added_board_document_name} successfully deleted \u{2705}`,e.board_documents.forEach(e=>{let d=document.createElement("li");d.classList.add("admin_board_members_main_section_article_div7_div1_ul_li"),d.setAttribute("name",e.name),d.textContent=e.name,d.addEventListener("click",e=>{console.log("click"),this.old_document=e.target.getAttribute("name"),r.querySelectorAll(".admin_board_members_main_section_article_div7_div1_ul_li").forEach(e=>e.classList.remove("admin_board_members_main_section_article_div7_div1_ul_li_selected")),d.classList.add("admin_board_members_main_section_article_div7_div1_ul_li_selected")}),r.appendChild(d)})):!1===e.loading&&!0===e.attempted_delete_board_document&&!1===e.deleted_board_document?(m(),r.replaceChildren(),_.style.display="flex",n.style.display="flex",a.style.display="flex",i.style.display="flex",n.textContent=`Error deleting Board Member, Please try again \u{274C}`,e.board_documents.forEach(e=>{let d=document.createElement("li");d.classList.add("admin_board_members_main_section_article_div7_div1_ul_li"),d.setAttribute("name",e.name),d.textContent=e.name,d.addEventListener("click",e=>{this.old_document=e.target.getAttribute("name"),r.querySelectorAll(".admin_board_members_main_section_article_div7_div1_ul_li").forEach(e=>e.classList.remove("admin_board_members_main_section_article_div7_div1_ul_li_selected")),d.classList.add("admin_board_members_main_section_article_div7_div1_ul_li_selected")}),r.appendChild(d)})):!1===e.loading&&e.board_documents?(m(),r.replaceChildren(),_.style.display="flex",a.style.display="flex",i.style.display="flex",e.board_documents.forEach(e=>{let d=document.createElement("li");d.classList.add("admin_board_members_main_section_article_div7_div1_ul_li"),d.setAttribute("name",e.name),d.textContent=e.name,d.addEventListener("click",e=>{this.old_document=e.target.getAttribute("name"),r.querySelectorAll(".admin_board_members_main_section_article_div7_div1_ul_li").forEach(e=>e.classList.remove("admin_board_members_main_section_article_div7_div1_ul_li_selected")),d.classList.add("admin_board_members_main_section_article_div7_div1_ul_li_selected")}),r.appendChild(d)})):(m(),r.replaceChildren(),t.style.display="flex")};delete_board_documents=e=>{let d=document.getElementById("admin_board_members_main_section_article_div7_div2_btn");this.delete_btn_rendered2||(d.addEventListener("click",d=>{e(this.old_document)}),this.delete_btn_rendered2=!0)}}}),t("5KqvO",function(d,t){e(d.exports,"Admin_board_members_Model",()=>_);class _{constructor(){this.state={loading:!1,board_members:null,board_documents:null,added_board_member:!1,attempted_add_board_member:!1,added_board_document:!1,added_board_document_name:"",attempted_add_board_document:!1,attempted_delete_board_document:!1,deleted_board_document:!1,edited_board_member:!1,attempted_edit_board_member:!1,new_edited_user:{username:"",password:""},attempted_delete_board_member:!1,deleted_board_member:!1},this.listeners=[]}setState=e=>{let d=(e,t)=>{for(let _ in t)"object"!=typeof e[_]||"object"!=typeof t[_]||null===e[_]||null===t[_]||Array.isArray(e[_])||Array.isArray(t[_])?e[_]=t[_]:d(e[_],t[_]);return e};return this.state=d({...this.state},e),this.notifyListeners(),console.log(this.state),this.state};registerListener=e=>{this.listeners.push(e),e(this.state)};notifyListeners=()=>{this.listeners.forEach(e=>{e(this.state)})};fetch_board_members=()=>{this.setState({loading:!0}),fetch("https://www.abbeyroad.org.uk/api/admin_board_members_page/fetch_board_members").then(e=>e.json()).then(e=>{if(e.success){let d=e.board_members.map(e=>e.username);d.length>0?this.setState({loading:!1,board_members:d}):this.setState({loading:!1,board_members:null})}else this.setState({loading:!1,board_members:null})}).catch(e=>{console.log(e),this.setState({loading:!1,board_members:null})})};add_board_members=(e,d)=>{e.length>0&&d.length>6?(this.setState({loading:!0,added_board_member:!1,attempted_add_board_member:!1}),fetch("https://www.abbeyroad.org.uk/admin_board_members_page/add_board_members",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:d})}).then(e=>e.json()).then(t=>{t.success?(console.log(t),this.setState({loading:!1,added_board_member:!0,attempted_add_board_member:!1,new_edited_user:{username:e,password:d}})):this.setState({loading:!1,added_board_member:!1,attempted_add_board_member:!0})}).catch(e=>{this.setState({loading:!1,added_board_member:!1,attempted_add_board_member:!0})})):this.setState({loading:!1,added_board_member:!1,attempted_add_board_member:!0})};edit_board_members=(e,d,t)=>{d.length>0&&e.length>0&&t.length>6?(this.setState({loading:!0,edited_board_member:!1,attempted_edit_board_member:!1}),fetch("https://www.abbeyroad.org.uk/api/admin_board_members_page/edit_board_members",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:d,password:t,old_username:e})}).then(e=>e.json()).then(e=>{e.success?(this.setState({loading:!1,edited_board_member:!0,attempted_edit_board_member:!1,new_edited_user:{username:d,password:t}}),this.fetch_board_members()):this.setState({loading:!1,edited_board_member:!1,attempted_edit_board_member:!0})}).catch(e=>{this.setState({loading:!1,edited_board_member:!1,attempted_edit_board_member:!0})})):this.setState({loading:!1,edited_board_member:!1,attempted_edit_board_member:!0})};delete_board_member=e=>{this.setState({loading:!0,attempted_delete_board_member:!1,deleted_board_member:!1}),fetch("http://localhost:3001/api/admin_board_members_page/delete_board_members",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e})}).then(e=>e.json()).then(d=>{d.success?(this.setState({loading:!1,new_edited_user:{username:e},attempted_delete_board_member:!1,deleted_board_member:!0}),this.fetch_board_members()):this.setState({loading:!1,attempted_delete_board_member:!0,deleted_board_member:!1})}).catch(e=>{this.setState({loading:!1,attempted_delete_board_member:!0,deleted_board_member:!1})})};fetch_board_documents=()=>{this.setState({loading:!0}),fetch("https://www.abbeyroad.org.uk/admin_board_members_page/fetch_board_documents").then(e=>e.json()).then(e=>{console.log(e),e.success?this.setState({loading:!1,board_documents:e.documents}):this.setState({loading:!1,board_documents:null})}).catch(e=>{console.log(e),this.setState({loading:!1,board_documents:null})})};add_board_documents=(e,d)=>{let t=()=>{let d=e.replace(/\s+/g,"_");return d.toLowerCase().endsWith(".pdf")||(d+=".pdf"),d};if(t().length>0&&d){this.setState({loading:!0,added_board_document:!1,attempted_add_board_document:!1});let e=new FormData;e.append("board_members_pdf",d,t()),console.log([...e]),fetch("https://www.abbeyroad.org.uk/admin_board_members_page/add_board_documents",{method:"POST",body:e}).then(e=>e.json()).then(e=>{e.success?(console.log(e),this.setState({loading:!1,added_board_document:!0,attempted_add_board_document:!1,added_board_document_name:t()})):this.setState({loading:!1,added_board_document:!1,attempted_add_board_document:!0,added_board_document_name:t()})}).catch(e=>{this.setState({loading:!1,added_board_document:!1,attempted_add_board_document:!0,added_board_document_name:t()})})}else this.setState({loading:!1,added_board_document:!1,attempted_add_board_document:!0,added_board_document_name:t()})};delete_board_documents=e=>{this.setState({loading:!0,attempted_delete_board_document:!1,deleted_board_document:!1}),fetch("https://www.abbeyroad.org.uk/admin_board_members_page/delete_board_documents",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({document_name:e})}).then(e=>e.json()).then(d=>{d.success?(this.setState({loading:!1,added_board_document_name:e,attempted_delete_board_document:!1,deleted_board_document:!0}),this.fetch_board_documents()):this.setState({loading:!1,attempted_delete_board_document:!0,deleted_board_document:!1})}).catch(e=>{this.setState({loading:!1,attempted_delete_board_document:!0,deleted_board_document:!1})})}}});
//# sourceMappingURL=controller.44d8a73a.js.map
