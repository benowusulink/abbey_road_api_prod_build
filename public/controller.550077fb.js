function e(e,t,i,n){Object.defineProperty(e,t,{get:i,set:n,enumerable:!0,configurable:!0})}var t=globalThis.parcelRequire8ea6,i=t.register;i("fSVia",function(i,n){e(i.exports,"RIController",()=>s);var l=t("9O7T7"),a=t("jDneo");class s{constructor(){this.view=new(0,l.RIView),this.model=new(0,a.RIModel),this.view.open_and_close_navbar(),this.model.fetch_images().then(e=>{console.log(e),this.view.render_all_images(e),this.view.render_all_images_mobile(e)}).catch(e=>{console.log(e)})}}}),i("9O7T7",function(t,i){e(t.exports,"RIView",()=>n);class n{constructor(){}open_and_close_navbar=()=>{let e=document.getElementById("mobile-menu-btn"),t=document.getElementById("mobile-menu-close"),i=document.getElementById("mobile-menu");e.addEventListener("click",e=>{i.style.display="block"}),t.addEventListener("click",e=>{i.style.display="none"})};render_all_images=e=>{let t=document.getElementById("resident_involvement_main_section2-div2"),i=document.getElementById("resident_involvement_main_section2-div-div-forwards-main"),n=document.getElementById("resident_involvement_main_section2-div-div-backwards-main"),l=null,a=0,s=0;e.data.forEach((e,i)=>{i%4==0&&((l=document.createElement("div")).classList.add("resident_involvement_main_section2-div-div"),l.setAttribute("id",`resident_involvement_main_section2-div-div-${a}`),t.append(l),++a>2&&(l.style.display="none"));let n=document.createElement("img");n.setAttribute("src",e.image_prod_url),n.classList.add("resident_involvement_main_section2-div-div-img"),n.alt=`photo for image id:${e.image_id}`,n.addEventListener("click",()=>{this.full_screen_images(e.image_prod_url)}),l.appendChild(n)}),this.render_image_galleries(e.data),i.addEventListener("click",e=>{let t=Array.from(document.getElementsByClassName("resident_involvement_main_section2-div-div"));for(let e=s;e<s+2&&e<t.length;e++)t[e].style.display="none";(s+=2)>=t.length&&(s=t.length%2==0?t.length-2:t.length-1);for(let e=s;e<s+2&&e<t.length;e++)t[e].style.display="flex"}),n.addEventListener("click",e=>{let t=Array.from(document.getElementsByClassName("resident_involvement_main_section2-div-div"));for(let e=s;e<s+2&&e<t.length;e++)t[e].style.display="none";(s-=2)<0&&(s=0);for(let e=s;e<s+2&&e<t.length;e++)t[e].style.display="flex"})};render_all_images_mobile=e=>{let t=document.getElementById("resident-involvement-albums-mobile");if(!t)return;let i=e.data,n=i.reduce((e,t)=>(t.image_category&&(e[t.image_category]||(e[t.image_category]=[]),e[t.image_category].push(t)),e),{}),l=[{title:"All images",images:i},...Object.entries(n).map(([e,t])=>({title:e,images:t}))],a=t.querySelector(".resident-album-mobile");t.replaceChildren(),l.forEach(e=>{let i=0,n=a.cloneNode(!0),l=n.querySelector(".resident-involvement-album-title-mobile"),s=n.querySelector(".resident-album-viewport"),d=n.querySelector(".resident-album-arrow-left"),r=n.querySelector(".resident-album-arrow-right");l.textContent=e.title,s.replaceChildren();let m=e.images.map(e=>{let t=document.createElement("img");return t.classList.add("resident-album-img"),t.src=e.image_prod_url,t.alt=`photo for image id:${e.image_id}`,t.style.display="none",t.addEventListener("click",()=>{console.log("click"),this.full_screen_images(e.image_prod_url)}),t});s.append(...m);let o=()=>{m.forEach(e=>e.style.display="none"),m[i].style.display="block",m[i+1].style.display="block"};o(),r.addEventListener("click",()=>{i+2<m.length&&(i+=2,o())}),d.addEventListener("click",()=>{i-2>=0&&(i-=2,o())}),t.append(n)})};full_screen_images=e=>{let t=document.getElementById("resident_involvement_main_section2-div-div3");t.setAttribute("id","resident_involvement_main_section2-div-div3"),t.style.display="flex",document.getElementById("resident_involvement_main_section2-div-div3-img").setAttribute("src",e),document.getElementById("resident_involvement_main_section2-div-div3-x").addEventListener("click",()=>{t.style.display="none"});let i=document.getElementById("image_modal_mobile");i.style.display="flex",document.getElementById("image_div_img_mobile").setAttribute("src",e),document.getElementById("image_close_span_mobile").addEventListener("click",()=>{i.style.display="none"})};render_image_galleries=e=>{let t=Object.values(e.reduce((e,t)=>(t.image_category&&(e[t.image_category]||(e[t.image_category]={categoryName:t.image_category,images:[]}),e[t.image_category].images.push(t)),e),{})),i=document.getElementById("resident_involvement_main_section3");t.forEach(e=>{let t=0,n=document.createElement("article"),l=document.createElement("div"),a=document.createElement("h3"),s=document.createElement("div"),d=document.createElement("div"),r=document.createElement("div");n.classList.add("resident_involvement_main_articles"),a.classList.add("resident_involvement_main_articles-h3"),l.classList.add("resident_involvement_main_articles-div"),s.classList.add("resident_involvement_main_section2-div-div-backwards"),s.textContent="<",s.setAttribute("id","resident_involvement_main_articles_div_div_backward"),d.setAttribute("id","resident_involvement_main_articles_div_div_forward"),d.classList.add("resident_involvement_main_section2-div-div-forwards"),d.textContent=">",a.textContent=e.categoryName,r.classList.add("fade-container"),i.append(n),n.append(a,l),l.append(s,r,d);let m=()=>{r.classList.add("fade-out"),setTimeout(()=>{r.innerHTML="",e.images.slice(t,t+4).forEach(e=>{let t=document.createElement("img");t.classList.add("resident_involvement_main_articles-div-img"),t.setAttribute("src",e.image_prod_url),t.addEventListener("click",()=>{this.full_screen_images(e.image_prod_url)}),r.appendChild(t)}),r.classList.remove("fade-out")},400)};m(),d.addEventListener("click",()=>{t+4<e.images.length&&(t+=4,m())}),s.addEventListener("click",()=>{t-4>=0&&(t-=4,m())})})}}}),i("jDneo",function(t,i){e(t.exports,"RIModel",()=>n);class n{constructor(){this.images=[]}get_images=()=>this.images;fetch_images=()=>fetch("https://www.abbeyroad.org.uk/api/resident-involvment-page/get_all_images").then(e=>e.json()).then(e=>e.success&e.data.length>0?(this.images=[...this.images,...e.data],Promise.resolve({status:!0,data:this.get_images()})):Promise.reject({status:!1})).catch(e=>(console.log(e),Promise.reject({status:!1})))}});
//# sourceMappingURL=controller.550077fb.js.map
